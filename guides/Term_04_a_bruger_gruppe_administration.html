<!DOCTYPE html>
<html lang="da">
<head>
  <title>Term 4</title>
  <link rel="icon" href="../images/favicon.png">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link href='http://fonts.googleapis.com/css?family=Ubuntu+Mono|Ubuntu|Ubuntu+Condensed' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/bootstrap.min.css">
  <link rel="stylesheet" href="../css/jquery-ui.min.css">
  <link rel="stylesheet" href="../css/jquery.tocify.css">
  <link rel="stylesheet" href="../css/style_new.css" />
<!-- Scripts in bottom to speed up pageload-->
 

</head>
<body>
	
	
<div class="container-fluid">

<div class="row-fluid">
	
<div class="col-xs-3">
	
	<nav>
		
		<div id="toc">
		
			<div id="toc_headline"></div>
		
		</div>
		
	</nav>

</div><!-- Start slut 1. kolonne - TOC -->
	
<div class="col-xs-9">

<h1>Brugeradministration</h1>

<p>Alle rettigheder i Linux er sat ud fra ejerskab. Tilgængeligheden af filer, mapper og enheder bliver styret af disse brugerrettigigheder </p>

<h2><span class="inl_cmd">adduser / deluser</span></h2>

<p>Man opretter og sletter brugere med kommandown <span class="inl_cmd">adduser</span>. Herunder opretter jeg brugeren <span class="inl_cmd">testuser</span>.</p>

<code class="cmd">sudo adduser testuser</code>

<pre class="ubuntu_terminal">
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ sudo adduser testuser
[sudo] password for tj: <span class="red">&lt;-- Indtast dit kodeord</span>
Tilføjer bruger »testuser«...
Tilføjer ny gruppe »testuser« (1001)...
Tilføjer ny bruger »testuser« (1001) med gruppe »testuser«...
Opretter hjemmemappe »/home/testuser«...
Kopierer filer fra »/etc/skel«...
Indtast ny UNIX-adgangskode: <span class="red">&lt;-- indtast den nye bruger password</span>
Genindtast ny UNIX-adgangskode: <span class="red">&lt;-- skriv det igen</span>
passwd: adgangskoden blev opdateret
Ændrer brugeroplysninger for testuser
Angiv ny værdi eller tryk RETUR for standardværdien
	Fulde navn []: <span class="red">[Retur]</span>
	Værelsesnummer []: <span class="red">[Retur]</span>
	Arbejdstelefon []: <span class="red">[Retur]</span>
	Telefon []: <span class="red">[Retur]</span>
	Andet []: <span class="red">[Retur]</span>
Er informationerne korrekte? [J/n] <span class="red">[Retur]</span>
</pre>

<p>Kontroller at han er blevet oprettet:</p>

<code class="cmd">cat /etc/passwd | grep testuser</code>

<pre class="ubuntu_terminal">
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ cat /etc/passwd | grep testuser
<span class="red">testuser</span>:x:1001:1001:,,,:/home/<span class="red">testuser</span>:/bin/bash
</pre>


<p>For at slette en bruger anvendes kommandoen <span class="inl_cmd">deluser</span></p>

<code class="cmd">sudo deluser testuser</code>

<p>Anvender man ovenstående kommando bliver brugerens hjemmemappe ikke slettet. For at slette alle brugerens filer skal der tilføjes<span class="inl_cmd">--remove-home</span> - altså:</p>

<code class="cmd">sudo deluser testuser --remove-home</code>

<p>man-page <span class="inl_cmd">adduser</span>: 
<a href="http://manpages.ubuntu.com/manpages/trusty/man8/adduser.8.html" target="_blank">
http://manpages.ubuntu.com/manpages/trusty/man8/adduser.8.html</a></p>

<p>man-page <span class="inl_cmd">deluser</span>: 
<a href="http://manpages.ubuntu.com/manpages/trusty/en/man8/deluser.8.html" target="_blank">
http://manpages.ubuntu.com/manpages/trusty/en/man8/deluser.8.html</a></p>

<h2><span class="inl_cmd">useradd</span></h2>

<p>Når man anvender <span class="inl_cmd">adduser</span> er det egentlig en scriptfil der arbejder med kommandoen <span class="inl_cmd">useradd</span>. <span class="inl_cmd">useradd</span> giver mulighed for at man kan sætte en bruger op i detaljer med en længere kommando. Kommanden anvendes ved at man tilføjer konfigurationen bagefter.</p>

<p>Du kan læse om <span class="inl_cmd">useradd</span> her: <a href="https://www.tecmint.com/add-users-in-linux/" target="_blank">https://www.tecmint.com/add-users-in-linux/</a>.</p>

<h2><span class="inl_cmd">id</span></h2>

<p>Checke om en bruger findes anvendes <span class="inl_cmd">id</span>.</p>

<code class="cmd">id *brugernavn*</code>

<pre class="ubuntu_terminal">
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ id tj
uid=1000(tj) gid=1000(tj) grupper=1000(tj),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),108(lpadmin),124(sambashare)
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ id hugo
id: hugo: ingen sådan bruger
</pre>



<h2><span class="inl_cmd">usermod</span></h2>

<p><span class="inl_cmd">usermod</span> anvendes til at ændre på brugerens konto.</p>

<table class="cmd_table">
	<thead>
		<tr>
			<th></th>
			<th></th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>usermod -L testuser2</td>
			<td>Lås testuser2' konto</td>
		</tr>
		<tr>
			<td>usermod -U testuser2</td>
			<td>Åbn testuser2' konti</td>
		</tr>
	</tbody>
</table>

<p>man-page <span class="inl_cmd">usermod</span>: 
<a href="http://manpages.ubuntu.com/manpages/trusty/en/man8/usermod.8.html" target="_blank">
http://manpages.ubuntu.com/manpages/trusty/en/man8/usermod.8.html</a></p>

<h2><span class="inl_cmd">chage</span></h2>

<p><span class="inl_cmd">chage</span> anvendes til at konfigurere brugerens password og måden de skal fornys på. Hvis man ønsker at få et overblik over hvordan brugerens indstillinger kan man anvende kommandoen: </p>

<code class="cmd">sudo chage -l testuser2</code>

<p>Herunder er et eksemel på resultatet</p>

<pre class="ubuntu_terminal">
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ sudo chage -l testuser2
Sidste ændring af adgangskode					: mar 16, 2016
Adgangskode udløber					: aldrig
Adgangskode inaktiv					: aldrig
Konto udløber						: aldrig
Minimalt antal dage mellem ændring af adgangskoden		: 0
Maksimalt antal dage mellem ændring af adgangskoden		: 99999
Antal dages forvarsel om adgangskodens udløb	: 7
</pre>

<p>Hvis man ønsker at ændre den måde brugerens password er sat op kan man køre nedestående kommando. Værdierne der angives er dage</p>

<code class="cmd">sudo chage testuser2</code>

<p>Herunder er et eksempel på resultatet af denne kommando, kørt på brugeren "chagetest"</p>

<pre class="ubuntu_terminal">
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ sudo chage testuser2
Ændrer forældelsesoplysninger for testuser2
Angiv ny værdi eller tryk RETUR for standardværdien

	Minimal alder for adgangskode [0]: <span class="red">&lt;-- ny værdi eller [Enter]</span>
	Maksimal alder for adgangskode [99999]: <span class="red">&lt;-- ny værdi eller [Enter]</span>
	Sidste ændring af adgangskode (ÅÅÅÅ-MM-DD) [2016-03-16]: <span class="red">&lt;-- ny værdi eller [Enter]</span>
	Advarsel om udløb af adgangskode [7]: <span class="red">&lt;-- ny værdi eller [Enter]</span>
	Adgangskode inaktiv [-1]: <span class="red">&lt;-- ny værdi eller [Enter]</span>
	Udløbsdato for konto (ÅÅÅÅ-MM-DD) [-1]: <span class="red">&lt;-- ny værdi eller [Enter]</span>
</pre>

<p>Hvis man ønsker at brugeren skal ændre sit passeword wed første login kan man anvende kommandoen <span class="inl_cmd">chage</span> med en option. Herunder laver vi ændringen for <span class="inl_cmd">testuser2</span></p>

<code class="cmd">sudo chage -d 0 testuser2</code>

<pre class="ubuntu_terminal">
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ sudo chage -d 0 testuser2
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ su testuser2
Adgangskode: 
Du skal omgående ændre din adgangskode (gennemtvunget af roden)
Ændrer adgangskode for testuser2.
(nuværende) UNIX-adgangskode: 
Indtast ny UNIX-adgangskode: 
Genindtast ny UNIX-adgangskode: 
<span class="green1">testuser2@tj-VirtualBox</span>:<span class="blue1">/home/tj</span>$
</pre>

<p>man-page <span class="inl_cmd">chage</span>: 
<a href="http://manpages.ubuntu.com/manpages/trusty/en/man1/chage.1.html" target="_blank">
http://manpages.ubuntu.com/manpages/trusty/en/man1/chage.1.html</a></p>

<h2>Administration af grupper</h2>

<table class="cmd_table">
	<thead>
		<tr>
			<th></th>
			<th></th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>Addgroup testgruppe</td>
			<td>Tilføjer gruppen testgruppe</td>
		</tr>
		<tr>
			<td>Delgroup testgruppe</td>
			<td>Fjerner testgruppe</td>
		</tr>
		<tr>
			<td>Adduser test testgruppe</td>
			<td>Tilføjer brugeren test til gruppen testgruppe</td>
		</tr>
		<tr>
			<td>Deluser test testgruppe</td>
			<td>Fjerner brugeren test fra gruppe testgruppe</td>
		</tr>
	</tbody>
</table>

<p>Manpages til add- og delgroup er de samme som add- og deluser.</p>

<p>Grupperne og deres medlemmer kan ses i filen <span class="inl_cmd">/etc/group</span>.</p>


<h2><span class="inl_cmd">sudo</span>-gruppen</h2>

<p><span class="inl_cmd">sudo</span>-gruppen er en af de vigtiste grupper på et Linux-system, da disse brugere har ret til at udføre system- og administrationsarbejde.</p>

<code class="cmd">sudo adduser *brugernavn* sudo </brugernavn></code>

<p>Hvis man tilføjer en bruger gennem en terminal der er startet på en desktop skal man genstarte GUI'en, dvs. logge af og på igen. Det skyldes at GUI terminalen kører under samme session som GUI'en. For at genindlæse rettigheder osv. bliver man altså nød til at logge af og på igen.</p>

<p>For at se hvilke brugere der tilhører <span class="inl_cmd">sudo</span> gruppen kan du køre:</p>

<code class="cmd">cat /etc/group | grep sudo</code>

<pre class="ubuntu_terminal">
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ cat /etc/group | grep sudo
<span class="red">sudo</span>:x:27:tj
</pre>



	
</div><!-- end: col-md-9 -->

<footer>

	<p onclick="parentNode.remove()"><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons licens" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a>Indholdet på Vidas.dk er  er licenseret under <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> og er skrevet af Thomas Jensen. (<a href="../hvem_er_jeg.html" target="_blank">Læs mere</a>)</p>

</footer>
	
	
</div><!-- end: row-fluid -->

</div> <!-- end: container-fluid -->


<!-- SCRIPT SECTION -->
<script type="text/javascript" src="../js/jquery.min.js"></script>
<script type="text/javascript" src="../js/jquery-ui.min.js"></script>
<script type="text/javascript" src="../js/jquery.tocify.min.js"></script>
<script type="text/javascript" src="../js/bootstrap.min.js"></script>

<!-- PRETTYFY-->
<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>


<!-- HIGHLIGHT -->
	<script src="../js/highlight.pack.js" type="text/javascript"></script>
	<script>hljs.initHighlightingOnLoad();</script>

<!-- MATHJAX -->
<script type="text/javascript" 
	src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  displayAlign: "left",
  displayIndent: "0em"
});
</script>


<!-- TOCIFY -->
<script>
	$(function() {var toc = $("#toc").tocify({ selectors: "h1, h2, h3, h4" }).data("toc-tocify"); });
</script>
<!-- GOOGLE ANALYTICS -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-89933285-1', 'auto');
  ga('send', 'pageview');
</script>

</body>
</html>
