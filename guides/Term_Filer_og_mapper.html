<!DOCTYPE html>
<html lang="da">
<head>
  <title>Filer og mapper</title>
  <link rel="icon" href="../images/favicon.png">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link href='http://fonts.googleapis.com/css?family=Ubuntu+Mono|Ubuntu|Ubuntu+Condensed' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/bootstrap.min.css">
  <link rel="stylesheet" href="../css/jquery-ui.min.css">
  <link rel="stylesheet" href="../css/jquery.tocify.css">
  <link rel="stylesheet" href="../css/style_new.css" />
<!-- Scripts in bottom to speed up pageload-->
 

</head>
<body>
	
	
<div class="container-fluid">

<div class="row-fluid">
	
<div class="col-xs-3">
	
	<nav>
		
		<div id="toc">
		
			<div id="toc_headline"></div>
		
		</div>
		
	</nav>

</div><!-- Start slut 1. kolonne - TOC -->
	
<div class="col-xs-9">
	
<h1>Terminalen: Filer og mapper</h1>

<div class="alert">
	<p>Denne side er skrevet som en manual du kan køre igennem fra start til slut. </p>
</div>

<p>Terminalen bruger vi til at udføre grundlæggende systemarbejde med filer. Det kan være at:</p>

<ul class="disc">
	<li>Navigation</li>
	<li>Oprette og slette</li>
	<li>Flytte og kopiere</li>
	<li>Hente</li>
	<li>finde</li>
	<li>Se og redigere rettigheder</li>
	<li>Se og redigere indhold</li>
	<li>pipes og redirect</li>
	<li>Pakning af filer</li>
	<li>genstarte og slukke</li>
</ul>

<h2>Grundlæggende terminal brug</h2>

<dl class="">
	<dt>cd</dt>
	<dd>Skift mappe</dd>
	<dt>pwd</dt>
	<dd>Viser det bibliotek man står i</dd>	
	<dt>clear</dt>
	<dd>Renser kommandovinduet</dd>
	<dt>ls</dt>
	<dd>Viser indholdet af mappen</dd>
	<dt>tree</dt>
	<dd>se træstruktur</dd>
	<dt>Piping</dt>
	<dd>Overførsel output til anden kommando</dd>


</dl>

<h3>cd og pwd</h3>

<p>Når vi åbner en terminal står du i din personlige mappe. Den ligger i <em>/home/*BRUGERNAVN*</em>.</p>

<p>Det kan vi se når vi kigger på kommandolinien</p>

<samp><span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~</span>$ </samp>

<p>Tegnet <em>~</em> (kaldes en tilde) viser at vi står i vores egen mappe</p>

<p>Lad os se hvor vi står. Det bruger vi <em>pwd</em> til.</p>

<pre><code>pwd</code></pre>

<samp>/home/tj</samp>

<p>Vi vil gerne flytte os til mappen med indstillinger. Den hedder <em>/etc/apt</em></p>

<pre><code>cd /etc/apt</code></pre>

<samp><span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">/etc/apt</span>$ </samp>

<p>Nu kan vi se at <em>~</em> har ændret sig til <em>/etc/apt</em></p>

<p>Vi flytter os lige tilbage til vores egen mappe:</p>

<pre><code>cd ~</code></pre>

<samp><span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~</span>$ </samp>

<h3>clear</h3>

<p>Bliver terminalvinduet for rodet kan man rense det med kommandoen <em>clear</em></p>

<pre><code>clear</code></pre>

<h3>ls</h3>

<p>Lad os se på indholdet i en mappe. Her vil vi kigge på mappen vi lige besøgte: <em>/etc/apt</em></p>

<pre><code>ls /etc/apt</code></pre>

<samp><span class="terminal_tilde">apt.conf.d   preferences.d</span>  sources.list.curtin.old  <span class="terminal_tilde">trusted.gpg.d
auth.conf.d</span>   sources.list   <span class="terminal_tilde">sources.list.d</span></samp>

<p>De blå filer er mapper og de hvide er almindelige filer.</p>

<div class="alert">
	<p>Læg mærke til at vi kigger på filerne i en anden mappe end den vi står i.</p>
	
	<p>Der er ingen grund til at navigere til den mappe man vil se eller gøre noget i.</p>
</div>

<p>Vi vil gerne have flere deltaljer om den mappe vi kigger i, så vi bruger ls med optionen <em>-ls</em></p>

<pre><code>ls -al /etc/apt</code></pre>

<samp>total 36
drwxr-xr-x  7 root root 4096 Dec 14 09:02 <span class="terminal_tilde">.</span>
drwxr-xr-x 94 root root 4096 Dec 17 09:51 <span class="terminal_tilde">..</span>
drwxr-xr-x  2 root root 4096 Dec 14 10:00 <span class="terminal_tilde">apt.conf.d</span>
drwxr-xr-x  2 root root 4096 Apr  9  2020 <span class="terminal_tilde">auth.conf.d</span>
drwxr-xr-x  2 root root 4096 Apr  9  2020 <span class="terminal_tilde">preferences.d</span>
-rw-r--r--  1 root root 2777 Dec 14 09:02 sources.list
-rw-r--r--  1 root root 2743 Jul 31 16:30 sources.list.curtin.old
drwxr-xr-x  2 root root 4096 Apr  9  2020 <span class="terminal_tilde">sources.list.d</span>
drwxr-xr-x  2 root root 4096 Jul 31 16:28 <span class="terminal_tilde">trusted.gpg.d</span>
</samp>

<p>Dette er den udskrift du vil komme til at bruge oftest, da den giver dig information om filtype, rettigheder og ejerskab </p>

<p>Læg mærke til at der som første tegn er et <em>d</em> ved dokumenter og en <em>-</em> ved filerne. Så kan alle se hvad det er ;).</p>

<p>En smart ting som bliver gennemgået senere er at man kan <em>pipe</em> (en lodret streg)det og søge ud i resultaterne. Lad os sige vi kun vil have vist filer og mapper hvor ordet <em>sources</em> indgår.</p>

<pre><code>ls -al /etc/apt | grep sources</code></pre>

<samp>-rw-r--r--  1 root root 2777 Dec 14 09:02 <span class="red">sources</span>.list
-rw-r--r--  1 root root 2743 Jul 31 16:30 <span class="red">sources</span>.list.curtin.old
drwxr-xr-x  2 root root 4096 Apr  9  2020 <span class="red">sources</span>.list.d
</samp>

<p>Så kan man designe sin visning til nøjagtigt det man leder efter.</p>

<h3>tree</h3>

<p>En anden måde at få overblik er ved hjælp af <em>tree</em>. <em>tree</em> skal først installeres. <em>tree</em> bliver gennemgået senere.</p>

<pre><code>sudo apt install tree -y</code></pre>

<p>Lad os kigge på <em>/etc/apt</em> med tree</p>

<pre><code>tree /etc/apt</code></pre>

<samp><span class="terminal_tilde">/etc/apt</span>
├── <span class="terminal_tilde">apt.conf.d</span>
│   ├── 01autoremove
│   ├── 01autoremove-kernels
│   ├── 01-vendor-ubuntu
│   ├── 10periodic
│   ├── 15update-stamp
│   ├── 20archive
│   ├── 20auto-upgrades
│   ├── 20packagekit
│   ├── 20snapd.conf
│   ├── 50command-not-found
│   ├── 50unattended-upgrades
│   ├── 70debconf
│   └── 99update-notifier
├── <span class="terminal_tilde">auth.conf.d</span>
├── <span class="terminal_tilde">preferences.d</span>
├── sources.list
├── sources.list.curtin.old
├── <span class="terminal_tilde">sources.list.d</span>
└── <span class="terminal_tilde">trusted.gpg.d</span>
    ├── ubuntu-keyring-2012-archive.gpg
    ├── ubuntu-keyring-2012-cdimage.gpg
    └── ubuntu-keyring-2018-archive.gpg

5 directories, 18 files</samp>

<p>Her får vi en visning med træstruktur.</p>

<p>Vil vi kun have mapper sætter vi <em>-d</em> på.</p>

<pre><code>tree -d /etc/apt</code></pre>

<samp><span class="terminal_tilde">/etc/apt</span>
├── <span class="terminal_tilde">apt.conf.d</span>
├── <span class="terminal_tilde">auth.conf.d</span>
├── <span class="terminal_tilde">preferences.d</span>
├── <span class="terminal_tilde">sources.list.d</span>
└── <span class="terminal_tilde">trusted.gpg.d</span></samp>

<details>

	<summary>Avancerede visninger</summary>

	<p>Visning med fulde stier:</p>

<pre><code>tree -fid /etc/apt</code></pre>

<samp><span class="terminal_tilde">/etc/apt</span>
<span class="terminal_tilde">/etc/apt/apt.conf.d</span>
<span class="terminal_tilde">/etc/apt/auth.conf.d</span>
<span class="terminal_tilde">/etc/apt/preferences.d</span>
<span class="terminal_tilde">/etc/apt/sources.list.d</span>
<span class="terminal_tilde">/etc/apt/trusted.gpg.d</span></samp>

<p>Visning med rettigheder, bruger og gruppe.</p>

<pre><code>tree -fidpug /etc/apt</code></pre>

<samp><span class="terminal_tilde">/etc/apt</span>
[drwxr-xr-x root     root    ]  <span class="terminal_tilde">/etc/apt/apt.conf.d</span>
[drwxr-xr-x root     root    ]  <span class="terminal_tilde">/etc/apt/auth.conf.d</span>
[drwxr-xr-x root     root    ]  <span class="terminal_tilde">/etc/apt/preferences.d</span>
[drwxr-xr-x root     root    ]  <span class="terminal_tilde">/etc/apt/sources.list.d</span>
[drwxr-xr-x root     root    ]  <span class="terminal_tilde">/etc/apt/trusted.gpg.d</span></samp>
</details>

<p>læs mere om tree: <a href="http://manpages.ubuntu.com/manpages/focal/en/man1/tree.1.html" target="_blank">http://manpages.ubuntu.com/manpages/focal/en/man1/tree.1.html</a></p>

<h3>Piping</h3>

<p><em>Piping</em> er en metode der oftes anvendes i terminalen. Ved hjælp af piping kan vi overføre output en kommando til en anden kommando. Det skrives på følgende måde:</p>

<pre><code>Kommando_1 | Kommando_2</code></pre>

<p>Output fra <em>Kommando_1</em> bliver brugt som input i <em>Kommando_2</em>.</p>

<p>Lad os se på eksemplet ovenfor</p>

<pre><code>ls -al /etc/apt | grep sources</code></pre>

<p><strong>Kommando 1 siger</strong>: vis en liste over alle filer i <em>/etc/apt</em></p>

<samp>total 36
drwxr-xr-x  7 root root 4096 Dec 14 09:02 .
drwxr-xr-x 94 root root 4096 Dec 17 09:51 ..
drwxr-xr-x  2 root root 4096 Dec 14 10:00 apt.conf.d
drwxr-xr-x  2 root root 4096 Apr  9  2020 auth.conf.d
drwxr-xr-x  2 root root 4096 Apr  9  2020 preferences.d
-rw-r--r--  1 root root 2777 Dec 14 09:02 sources.list
-rw-r--r--  1 root root 2743 Jul 31 16:30 sources.list.curtin.old
drwxr-xr-x  2 root root 4096 Apr  9  2020 sources.list.d
drwxr-xr-x  2 root root 4096 Jul 31 16:28 trusted.gpg.d</samp>

<p>Dette bliver overført til kommando 2</p>

<p><strong>Kommando 2 siger</strong>: vælg alle linier hvor tekststrengen <em>sources</em> står</p>

<samp>-rw-r--r--  1 root root 2777 Dec 14 09:02 <span class="red">sources</span>.list
-rw-r--r--  1 root root 2743 Jul 31 16:30 <span class="red">sources</span>.list.curtin.old
drwxr-xr-x  2 root root 4096 Apr  9  2020 <span class="red">sources</span>.list.d</samp>

<h4>Piping i flere niveauer</h4>

<p>Man kan gøre det i flere niveauer.</p>

<pre><code>Kommando_1 | Kommando_2 | Kommando_3 | ... | Kommando_N</code></pre>

<p>Vi tager eksemplet ovenfor, hvor vi kun vil have dem hvor der står <em>.old</em> ved. Den fulde kommando vil være:</p>

<pre><code>ls -al /etc/apt | grep sources | grep .old</code></pre>

<samp>-rw-r--r--  1 root root 2743 Jul 31 16:30 sources.list.curtin<span class="red">.old</span></samp>

<h2>Oprette og slette</h2>

<dl class="">
	<dt>mkdir</dt>
	<dd>Opretter mapper</dd>
	<dt>touch</dt>
	<dd>Opretter filer og opdaterer tidsstempel på allerede eksisterende filer og mapper</dd>
	<dt>rm</dt>
	<dd>Sletter mapper og filer</dd>
</dl>

<h3>mkdir</h3>

<p><em>Opretter mapper</em></p>

<p>Til at oprette mapper bruges kommandoen <em>mkdir</em>.</p>

<p>Vi starter med at oprette en øvemappe i vores egen mappe. den ligger i <em>/home/*brugernavn*</em>, men kan også tilgås med <em>~</em>.</p>

<p>Her opretter vi en mappe til at lave vores øvelser i. Vi opretter den med den fulde sti, og flytter os op i mappen:</p>

<pre><code>mkdir ~/øvelser</code></pre>

<pre><code>cd ~/øvelser</code></pre>

<samp><span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~/øvelser</span>$ </samp>

<div class="alert">
	<p>Alle eksemplerne her bliver installeret i mappen <em>~/øvelser</em>. Derfor er der ikke en fuld sti på mappenavnene.</p>
</div>

<h4>Enkelt mappe</h4>

<p>Her opretter vi <em>mappe1</em>.</p>

<pre><code>mkdir mappe1</code></pre>

<pre><code>tree -d</code></pre>

<samp><span class="terminal_tilde">.</span>
└── <span class="terminal_tilde">mappe1</span>

1 directory
</samp>

<h4>Flere mapper på en gang</h4>

<p>Her opretter vi to mapper på en gang (<em>mappe2</em> og <em>mappe3</em>).</p>

<pre><code>mkdir mappe2 mappe3</code></pre>

<pre><code>tree -d</code></pre>

<samp><span class="terminal_tilde">.</span>
├── <span class="terminal_tilde">mappe1</span>
├── <span class="terminal_tilde">mappe2</span>
└── <span class="terminal_tilde">mappe3</span>

3 directory
</samp>

<h4>Med undermapper</h4>

<p>Her opretter vi vi en hel struktur: <em>mappe4/um1/uum1</em></p>

<p>Læg mærke til at jeg tilføjer <em>-p</em>, for at kunne oprette mapper i flere niveauer</p>

<pre><code>mkdir -p mappe4/um1/uum1</code></pre>

<samp><span class="terminal_tilde">.</span>
├── <span class="terminal_tilde">mappe1</span>
├── <span class="terminal_tilde">mappe2</span>
├── <span class="terminal_tilde">mappe3</span>
└── <span class="terminal_tilde">mappe4</span>
    └── <span class="terminal_tilde">um1</span>
        └── <span class="terminal_tilde">uum1</span>

7 directories
</samp>

<details>

	<summary>Avanceret anvendelse</summary>

<p><strong>Med flere undermapper</strong></p>

<p>Her opretter vi <em>mappe5</em>, med flere undermapperne i samme niveau<em>um1</em>, <em>um2</em>,<em>um3</em>.</p>

<pre><code>mkdir -p mappe5/{um1,um2,um3}</code></pre>

<samp><span class="terminal_tilde">.</span>
├── <span class="terminal_tilde">mappe1</span>
├── <span class="terminal_tilde">mappe2</span>
├── <span class="terminal_tilde">mappe3</span>
├── <span class="terminal_tilde">mappe4</span>
│    └── <span class="terminal_tilde">um1</span>
│        └── <span class="terminal_tilde">uum1</span>
└── <span class="terminal_tilde">mappe5</span>
    ├── <span class="terminal_tilde">um1</span>
    ├── <span class="terminal_tilde">um2</span>
    └── <span class="terminal_tilde">um3</span></samp>

     
<p><strong>Med flere undermapper</strong></p>

<p>Her opretter vi <em>mappe5</em>, med flere undermapperne i samme niveau<em>um1</em>, <em>um2</em>,<em>um3</em>.</p>

<pre><code>mkdir -p mappe6/{um1,um2,um3}/{uum1,uum2,uum3}</code></pre>

<samp><span class="terminal_tilde">.</span>
├── <span class="terminal_tilde">mappe1</span>
├── <span class="terminal_tilde">mappe2</span>
├── <span class="terminal_tilde">mappe3</span>
├── <span class="terminal_tilde">mappe4</span>
│    └── <span class="terminal_tilde">um1</span>
│        └── <span class="terminal_tilde">uum1</span>
├── <span class="terminal_tilde">mappe5</span>
│   ├── <span class="terminal_tilde">um1</span>
│   ├── <span class="terminal_tilde">um2</span>
│   └── <span class="terminal_tilde">um3</span>
└── <span class="terminal_tilde">mappe6</span>
    ├── <span class="terminal_tilde">um1</span>
    │   ├── <span class="terminal_tilde">uum1</span>
    │   ├── <span class="terminal_tilde">uum2</span>
    │   └── <span class="terminal_tilde">uum3</span>
    ├── <span class="terminal_tilde">um2</span>
    │   ├── <span class="terminal_tilde">uum1</span>
    │   ├── <span class="terminal_tilde">uum2</span>
    │   └── <span class="terminal_tilde">uum3</span>
    └── <span class="terminal_tilde">um3</span>
        ├── <span class="terminal_tilde">uum1</span>
        ├── <span class="terminal_tilde">uum2</span>
        └── <span class="terminal_tilde">uum3</span></samp>
</details>

<h3>touch</h3>

<p><em>Opretter filer og opdaterer tidsstempel på allerede eksisterende filer og mapper</em></p>

<p><em>touch</em> anvendes til 2 ting: </p>

<ul class="disc">
	<li>Oprette nye filer</li>
	<li>Forny tidsstempel på eksisterende filer</li>
</ul>

<p>Her opretter vi filen <em>testfil</em> i vores personlige mappe. <em>~</em> er en smart måde at fortælle, at vi bruger <em>/home/*brugernavn*</em></p>

<pre><code>touch ~/testfil1</code></pre>

<p>Vi kigger på file vi lige har oprettet</p>

<pre><code>ls -al testfil1 | grep testfil</code></pre>

<samp>-rw-rw-r-- 1 tj tj    0 Dec 18 14:03 <span class="red">testfil</span>1</samp>

<p>Man kan også oprette en række af filer på en gang:</p>

<pre><code>touch testfil2 testfil3</code></pre>

<p>Vi kigger.</p>

<pre><code>ls -al testfil1 | grep testfil</code></pre>

<samp>-rw-rw-r-- 1 tj tj    0 Dec 18 14:03 <span class="red">testfil</span>1
-rw-rw-r-- 1 tj tj    0 Dec 18 14:10 <span class="red">testfil</span>2
-rw-rw-r-- 1 tj tj    0 Dec 18 14:10 <span class="red">testfil</span>3</samp>

<p>Som vi kan se har filerne forskellige tidsstempler. Vi vil gerne have at de alle bliver opdatere til nu.</p>

<pre><code>touch testfil*</code></pre>

<p>Vi kigger.</p>

<pre><code>ls -al testfil1 | grep testfil</code></pre>

<samp>-rw-rw-r-- 1 tj tj    0 Dec 18 14:16 <span class="red">testfil</span>1
-rw-rw-r-- 1 tj tj    0 Dec 18 14:16 <span class="red">testfil</span>2
-rw-rw-r-- 1 tj tj    0 Dec 18 14:16 <span class="red">testfil</span>3</samp>

<h3>rm</h3>

<p><em>Sletter filer og mapper</em></p>

<div class="alert">
	<p>Nar man sletter filer og mapper med kommandolinien, så bliver de slettet for alvor. Dvs. man kan ikke hente dem i en skraldespand. Filerne er væk.</p>
	
	<p>Så kontroller at du sletter de rigtige filer.</p>
</div>

<p>Lad os slette <em>testfil3</em></p>

<pre><code>rm testfil3</code></pre>

<p>Vi kigger.</p>

<pre><code>ls -al testfil1 | grep testfil</code></pre>

<samp>-rw-rw-r-- 1 tj tj    0 Dec 18 14:16 <span class="red">testfil</span>1
-rw-rw-r-- 1 tj tj    0 Dec 18 14:16 <span class="red">testfil</span>2</samp>

<p>Vi kan slette flere filer på engang ved at bruge samme fremgangsmåde som ovenfor:</p>

<pre><code>rm testfil2 testfil3</code></pre>

<p>Vi kigger.</p>

<pre><code>ls -al testfil1 | grep testfil</code></pre>

<samp></samp>

<p>Vi kan også slette ved hjælp af at bruge <em>*</em> (asterisk).</p>

<p>Vi starter med at oprette 3 filer igen:</p>

<pre><code>touch testfil1 testfil2 testfil3</code></pre>

<p>Vi kigger.</p>

<pre><code>ls -al testfil1 | grep testfil</code></pre>

<samp>-rw-rw-r-- 1 tj tj    0 Dec 18 14:52 <span class="red">testfil</span>1
-rw-rw-r-- 1 tj tj    0 Dec 18 14:52 <span class="red">testfil</span>2
-rw-rw-r-- 1 tj tj    0 Dec 18 14:52 <span class="red">testfil</span>3</samp>

<p>For at slette alle laver vi følgende kommando</p>

<pre><code>rm test*</code></pre>

<p>Den kommando sletter alle filer der starter med <em>test</em>. Tjek selv efter.</p>

<h4>Sletning af mapper</h4>

<p>For at slette mapper skal man tilføje <em>-R</em>. Når man sletter en mappe, så skal alt indholdet også slettes. Derfor skal det gøres recursivt (<em>-R</em>).</p>

<p>Lad os slette <em>mappe6</em></p>

<pre><code>rm -R mappe6</code></pre>

<p>Lad os slette <em>mappe3</em> til <em>mappe5</em></p>

<pre><code>rm -R mappe[3-6]</code></pre>

<p>For at slutte af sletter vi øvelsesmappen</p>

<pre><code>rm -R ~/øvelser</code></pre>

<p>Nu sker der noget underligt ... vi står i en slettet mappe:</p>

<samp><span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~/øvelser</span>$ rm -R ~/øvelser
<span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~/øvelser</span>$ </samp>

<p>Så vi skifter tilbage til vores hjemmemappe</p>

<pre><code>cd ~</code></pre>

<h4>Vær forsigtig</h4>

<p>Som skrevet ovenfor, så sletter rm alt. Hvis man nu kommer at skrive:</p>

<pre><code>sudo rm -R /</code></pre>

<p>... så beder man faktisk <em>rm</em> om at slette hele harddisken</p>

<samp><span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~</span>$ sudo rm -R / 
[sudo] password for tj: 
rm: it is dangerous to operate recursively on '/'
rm: use --no-preserve-root to override this failsafe</samp>

<p>Heldigvis er systemet sat på så det forhindrer det ... men det betyder ikke at du ikke kan komme til at slette andre vitale dele af systemet med <em>rm</em>.</p>

<p>Brug <em>rm</em> med omtanke.</p>

<h2>Flytte og kopiere</h2>

<dl class="">
	<dt>cp</dt>
	<dd>Kopierer filer og mapper</dd>
	<dt>mv</dt>
	<dd>Flytter filer og mapper</dd>
</dl>

<h3>cp</h3>

<p><em>Kopiere filer og mapper</em></p>

<p>Først opretter vi en øvelsesmappe med en undermappe og en fil, for til sidst at navigere over til den.</p>

<pre><code>mkdir -p øvelse2/mappe1</code></pre>

<pre><code>touch ~/øvelse2/fil1</code></pre>

<pre><code>ls -al ~/øvelse2</code></pre>

<pre><code>cd øvelse2</code></pre>

<p>Vi tjekker mappen</p>

<pre><code>tree</code></pre>

<samp><span class="terminal_tilde">.</span>
├── fil1
└── <span class="terminal_tilde">mappe1</span>

1 directory, 1 file
</samp>

<p>Herunder laver vi følgende:</p>

<ul class="disc">
	<li>Vi kopierer <em>fil1</em> til <em>fil2</em></li>
	<li>Vi laver en kopi af <em>fil1</em> i mappen <em>mappe1</em></li>
	<li>vi laver en kopi af <em>mappe1</em> til <em>mappe2</em></li>
</ul>


<pre><code>cp fil1 fil2</code></pre>

<pre><code>cp fil1 mappe1</code></pre>

<pre><code>cp -R mappe1 mappe2</code></pre>

<p>Vi ser på resultatet</p>

<pre><code>tree</code></pre>

<samp><span class="terminal_tilde">.</span>
├── fil1
├── fil2
├── <span class="terminal_tilde">mappe1</span>
│   └── fil1
└── <span class="terminal_tilde">mappe2</span>
    └── fil1

2 directories, 4 files</samp>

<h4>backup af systemfiler</h4>

<p>Når man arbejder med systemfiler, så er det normalt, at man tager en backup af filen før man laver ændringer. På den måde kan man altid komme tilbage til en oprindelig opsætning.</p>

<p>Man plejer at gøre det ved at kopiere filen og sætte <em>.backup</em> bagpå -evt. med dato.</p>

<p>Så hvis vil skulle lave ændringer i fil1 ville vi først gøre følgende:</p>

<pre><code>cp fil1 fil1.backup</code></pre>


<h3>mv</h3>

<p><em>Bruges til at flytte eller ændre navn på filer og mapper</em></p>

<p>Herunder laver vi følgende</p>

<ul class="disc">
	<li>Vi flytter <em>fil2</em> til <em>fil3</em></li>
	<li>Vi flytter <em>mappe2</em> til <em>mappe3</em></li>
</ul>

<pre><code>mv fil2 fil3</code></pre>

<pre><code>mv mappe2 mappe3</code></pre>trte

<p>Vi ser på resultatet</p>

<pre><code>tree</code></pre>

<samp><span class="terminal_tilde">.</span>
├── fil1
├── fil3
├── <span class="terminal_tilde">mappe1</span>
│   └── fil1
└── <span class="terminal_tilde">mappe3</span>
    └── fil1

2 directories, 4 files
</samp>



<h2>Hente</h2>

<dl class="">
	<dt>wget</dt>
	<dd>Henter filer fra Internetet</dd>

</dl>

<h3>wget</h3>

<p><em>Henter filer på Internettet</em></p>

<p>Der ligger en fil på min hjemmeside med følgende adresse.</p>

<p><em>http://www.vidas.dk/guides/files/wget_testfil</em></p>

<p>Vi vil nu hente den ned i øvelsesmappen, som vi står i.</p>

<pre><code>wget -c http://www.vidas.dk/guides/files/wget_testfil</code></pre>

<samp>--2020-12-18 16:07:08--  http://www.vidas.dk/guides/files/wget_testfil
Resolving www.vidas.dk (www.vidas.dk)... 185.199.110.153, 185.199.108.153, 185.199.111.153, ...
Connecting to www.vidas.dk (www.vidas.dk)|185.199.110.153|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 63 [application/octet-stream]
Saving to: ‘wget_testfil’

wget_testfil        100%[===================>]      63  --.-KB/s    in 0s      

2020-12-18 16:07:08 (2.81 MB/s) - ‘wget_testfil’ saved [63/63]</samp>



<p><em>-c</em> sikrer, at filhentningen kan genoptages hvis der bliver afbrudt.</p>

<p><strong>Overblik</strong></p>

<dl class="">
	<dt>wget -c *filadresse*</dt>
	<dd>Henter filen, med mulighed for at genstarter hentningen.</dd>
	<dt>wget -P ~/*mappe* *filadresse*</dt>
	<dd>Henter filen, men gemmer den i mappen ~/*mappe*</dd>
	<dt>wget -o ~/*hentetfil* *filadresse*</dt>
	<dd>Henter filen, men gemmer den som "hentetfil*</dd>
	<dt>wget -b *filadresse*</dt>
	<dd>Henter filen i baggrunden - frigiver kommandolinien med det samme.</dd>
</dl>

<p>Optionerne kan stackes. På den måde vil <em>wget -cob minfil *filadresse*</em> hente i baggrunden, gemme den som <em>minfil</em> og sikre at download kan genoptages ved afbrydelse.</p>

<p>man-page wget: 
	<a href="http://manpages.ubuntu.com/manpages/focal/man1/wget.1.html" target="_blank">
	http://manpages.ubuntu.com/manpages/focal/man1/wget.1.html</a></p>

<h2>Finde</h2>

<dl class="">
	<dt>find</dt>
	<dd>Finder filer og mapper</dd>
	<dt>grep</dt>
	<dd>finde tekstrenge i filer</dd>
</dl>

<h3>find</h3>

<p><em>find</em> bruges til at finde filer</p>

<p>Lad finde filer med navnet <em>fstab</em>, på computeren. Vi skal bruge <em>sudo</em>, så vi kan nå alle steder hen</p>

<pre><code>sudo find / -type f -name fstab</code></pre>

<samp>/usr/share/doc/util-linux/examples/fstab
/etc/fstab
/snap/core/10577/etc/fstab
/snap/core/10444/etc/fstab
/snap/core18/1932/etc/fstab
/snap/core18/1944/etc/fstab</samp>

<p><strong>Overblik</strong></p>

<dl class="">
	<dt>find / -type f -name fstab</dt>
	<dd>Finder alle filer der hedder fstab</dd>	
	<dt>find . -type d -name apt</dt>
	<dd>Finder alle mapper der hedder noget med apt i den mappe du står i.</dd>
	<dt>find . -type f -perm /a=x</dt>
	<dd>Finder alle filer der kan køres som programmer i den mappe du står i</dd>
	<dt>find . -type d -empty</dt>
	<dd>Finder alle tomme mapper i den mappe du står i.</dd>
</dl>

<h4>Avanceret brug</h4>

<p>Kommandoen kan også bruges til at udføre kommandoer filer der findes.</p>

<p>Her er et eksempel hvor alle filer med endelsen <em>.log</em> får opdateret deres tidsstempel.</p>

<pre><code>find . -type f -name "*.log" -exec touch {} \;</code></pre>


<p>man-page more: 
	<a href="http://manpages.ubuntu.com/manpages/focal/en/man1/find.1.html" target="_blank">
	http://manpages.ubuntu.com/manpages/focal/en/man1/find.1.html</a></p>
	

<h3>grep</h3>

<p>Anvendes til at finde tekststrenge i en fil.</p>

<pre><code>grep backup /etc/passwd</code></pre>

<samp><span class="red">backup</span>:x:34:34:<span class="red">backup</span>:/var/<span class="red">backup</span>s:/usr/sbin/nologin</samp>

<p>Du kan også søge på mere end en tekststreng.</p>

<pre><code>grep "*TEKSTSTRENG1* \| *TEKSTSTRENG2*"</code></pre>

<p>Her vil jeg f.eks. finde både <em>backup</em> og <em>tj</em></p>

<pre><code>grep "backup\|tj" /etc/passwd</code></pre>

<div class="alert">
	<p>Der må ikke være mellemrum mellem i <em>backup\|tj</em></p>
</div>

<p>man-page grep: 
	<a href="http://manpages.ubuntu.com/manpages/focal/man1/grep.1.html" target="_blank">
	http://manpages.ubuntu.com/manpages/focal/man1/grep.1.html</a></p>

<h2>Se og redigere rettigheder</h2>

<dl class="">
	<dt>chown</dt>
	<dd>Ændrer ejerskab på grupper</dd>
	<dt>chmod</dt>
	<dd>Ændret rettigheder på filer og mapper</dd>
</dl>

<h3>chown - change owner</h3>

<p><em>chown</em> bruges til, at ændre ejer og gruppe på en fil eller en mappe.</p>

<p>Det er kun root der kan ændre ejerskab på filer.</p>

<p><strong>Ændring af ejerskab</strong></p>

<p>Her ændres ejeren af <em>~/testfil</em> til brugeren <em>tj</em>.</p>

<pre><code>sudo chown tj ~/testfil</code></pre>

<p><strong>Ændring af ejerskab og gruppe</strong></p>

<p>Herunder ændres filen til at have ejeren og gruppen tj</p>

<pre><code>sudo chown tj:tj ~/testfil</code></pre>

<p>Man kan også anvende følgende "shorthand"</p>

<pre><code>sudo chown tj: ~/testfil</code></pre>

<p>Ved at sætte et kolon, så antager <em>chown</em>, at gruppen er den samme.</p>

<p><strong>Ændring af ejerskab på mapper og undermapper</strong></p>

<p>Skal man ændre rettigheder på alle filer i en mappe anvender man <code class="bash">-R</code> (recursive). Nedestående kommando ændrer ejerskab på alle filer i mappen <em>/data</em></p>

<pre><code>sudo chown -R tj: /data</code></pre>

<samp class=""><span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~</span>$ sudo touch testfil
[sudo] adgangskode for tj: 
<span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~</span>$ ls -al testfil
-rw-r--r-- 1 root root 0 jun  2 10:41 testfil
<span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~</span>$ udo chown tj:tj testfil
-rw-r--r-- 1 tj tj 0 jun  2 10:41 testfil</samp>

<p>man-page chown: 
<a href="http://manpages.ubuntu.com/manpages/focal/man1/chown.1.html" target="_blank">
http://manpages.ubuntu.com/manpages/focal/man1/chown.1.html</a></p>

<h3>chmod - change mode</h3>

<p><em>chmod</em> ændrer rettighederne på filen.</p>

<pre><code>chmod [-R][rettigheder] [fil/mappe]</code></pre>

<p>Skal det gælde alle undermapper indsættes <em>-R</em> (recursiv)</p>

<p>Når vi sætter rettigheder anvender vi en anden skrivemåde end <em>rwx</em>. Vi anvender binære værdier som du kan se herunder.</p>

<ul class="disc">
	<li>0 - Rettigheder: ingen (---)</li>
	<li>1 - Rettigheder: Udføre (--x)</li>
	<li>2 - Rettigheder: Skrive (-w-)</li>
	<li>3 - Rettigheder: Skrive og udføre (-wx)</li>
	<li>4 - Rettigheder: Læse (r--)</li>
	<li>5 - Rettigheder: Læse og udføre (r-x)</li>
	<li>6 - Rettigheder: Læse og skrive (rw-)</li>
	<li>7 - Rettigheder: Læse, skrive og udføre (rwx)</li>
</ul>

<p>Her kan du se beregningerne for de binære værdier: <a href="term_rettigheder_beregninger.html" target="_blank">beregninger af binære værdier.</a></p>

<p>På denne måde skal vi kun angive et tal for henholdsvis brugeren, gruppen og alle. Herunder er nogle praktiske eksempler.</p>

<dl class="">
	<dt>700</dt>
	<dd>Brugeren har alle rettigheder. Bruges f.eks. når man laver script filer og har brug for at køre dem. Ingen andre brugere kan altså se eller anvende dem.</dd>
	<dt>705</dt>
	<dd>Brugeren har alle rettigheder, og alle andre kan se og udføre dem. Bruges f.eks. til webserverens filer, da webserveren skal have fulde rettigheder, men alle andre skal kunne se og udføre filerne</dd>
	<dt>660</dt>
	<dd>Brugeren og gruppen skal kunne læse og skrive i filen, men ikke udføre den. Kan f.eks. være tekstfiler man skla kunne redigere.</dd>
</dl>

<div class="fakta">
	
	<p>Tallet <em>705</em> skal læses som <em>syv nul fem</em>, hvor det første tal sætter rettigheden for brugeren, det andet tal for gruppen og det sidste for alle.</p>
	
	<p>Uanset hvordan du sætter rettigheder og ejerskab har root-brugeren altid mulighed for at ændre disse.</p>
	
	<p>root kan give og fjerne adgang til alle filer.</p>
	
</div>

<h4>Eksempel med fil</h4>

<p>Et eksempel, hvor rettighederne sættes til at brugeren har alle rettigheder (<em>rwx</em>) og alle har ret til at læse og udføre (<span class="inl_cmd">r-w</span>) svarende til rettigheder for html-filerne på en webserver:</p>

<pre><code>chmod 705 testfil</code></pre>

<samp><span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~</span>$ ls -al | grep testfil
-rw-rw-r--  1 tj   tj       0 jun  3 17:02 testfil'
<span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~</span>$ chmod 705 testfil
<span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~</span>$ ls -al | grep testfil
-rwx---r-x  1 tj   tj       0 jun  3 17:02 <span class="red">testfil</span></samp>

<h4>Eksempel med mapper (recursiv)</h4>

<p>Dette eksempel viser hvordan man omdøber alle filer og undermapper.</p>

<pre><code>chmod -R 705 /var/www/html</code></pre>

<p><em>705</em> kombinationen er meget anvendt på systemer hvor brugeren skal have alle rettigheder, men alle skal kunne se filerne og udføre programmerne UDEN at kunne ændre på dem. F.eks. på en webserver som har filerne i mappen <em>/var/www/html</em> og dennes undermapper.</p>

<p>man-page chmod: 
<a href="http://manpages.ubuntu.com/manpages/focal/man1/chmod.1.html" target="_blank">
http://manpages.ubuntu.com/manpages/focal/man1/chmod.1.html</a></p>	

<h2>Se og redigere indhold</h2>

<dl class="">
	<dt>nano</dt>
	<dd>Redigering af filer</dd>
	<dt>cat</dt>
	<dd>Output af hele filen (sammenkædning)</dd>
	<dt>more</dt>
	<dd>Output af filen - en side af gangen</dd>
	<dt>head/tail</dt>
	<dd>Output af starten eller slutningen af filen </dd>
	<dt>sort</dt>
	<dd>sortere filen før visning</dd>
	<dt>Uniq</dt>
	<dd>Viser kun unikke linier (fjerner gentagelser)</dd>

</dl>

<h3>nano</h3>

<p>På en Linuxserver bliver alle tjenester og hardware initialiseret og konfigureret igennem tekstfiler. Derfor skal du kende nano, et effektiv terminal tekstredigeringsprogram. Programmet har også opmærkning med farver, hvis det genkender formatet. <em>nano</em> startes med kommandoen: </p>

<pre><code>nano *filnavn*</code></pre>

<p>Du navigerer i filen ved hjælp af piletasterne, og du kan bruge <kbd>Ctrl</kbd> og kd</p>

<p>Herefter bliver ændres terminalen til nedestående, hvor menuen ligger i bunden af skærmen.</p>

<samp class="terminal"><span class="white_bg">  GNU nano 2.2.6                New Buffer                                                          </span>









<span class="white_bg">^G</span> Få hjælp   <span class="white_bg">^O</span> Gem       <span class="white_bg">^W</span> Hvor er    <span class="white_bg">^K</span> Klip ud       <span class="white_bg">^J</span> Ombryd      <span class="white_bg">^C</span> Position
<span class="white_bg">^X</span> Afslut     <span class="white_bg">^R</span> Læs fil   <span class="white_bg">^\</span> Erstat     <span class="white_bg">^U</span> Indsæt tekst  <span class="white_bg">^T</span> Stavetjek   <span class="white_bg">^_</span> Til linje</samp>

<p>Du navigerer rundt i nano med piletaster ligesom i alle andre tekstbehandlingsprogrammer.</p>

<p>Herunder er de meste basale funktioner</p>

<p><em>^</em> står for <kbd>Ctrl</kbd> og <em>m-</em> for <kbd>Alt</kbd></p>

<dl class="with_keys">
	<dt><kbd>Ctrl</kbd>+<kbd>w</kbd></dt>
	<dd>find</dd>
	<dt><kbd>Ctrl</kbd>+<kbd>y</kbd></dt>
	<dd>en side op</dd>
	<dt><kbd>Ctrl</kbd>+<kbd>v</kbd></dt>
	<dd>En side ned</dd>
	<dt><kbd>Ctrl</kbd>+<kbd>w</kbd>+<kbd>v</kbd></dt>
	<dd>Til filens sidste linie</dd>
	<dt><kbd>Ctrl</kbd>+<kbd>k</kbd></dt>
	<dd>Klip</dd>
	<dt><kbd>Ctrl</kbd>+<kbd>u</kbd></dt>
	<dd>Indsæt</dd>
	<dt><kbd>Ctrl</kbd>+<kbd>x</kbd></dt>
	<dd>Afslut nano</dd>
	<dt><kbd>Alt</kbd>+<kbd>u</kbd></dt>
	<dd>Fortryd</dd>
	<dt><kbd>Alt</kbd>+<kbd>e</kbd></dt>
	<dd>Annuller fortryd</dd>
	<dt><kbd>Alt</kbd>+<kbd>a</kbd></dt>
	<dd>Marker tekst</dd>
	<dt><kbd>Alt</kbd>+<kbd>6</kbd></dt>
	<dd>kopier tekst</dd>
</dl>

<p>Når du har redigeret din tekst færdig afslutter du med <kbd>Ctrl</kbd>+<kbd>x</kbd>, hvorefter nano i bunden svarer:</p>

<samp class="terminal">
<span class="white_bg">Gem ændret buffer (AT SVARE "Nej" VIL ØDELÆGGE ÆNDRINGER)?                                          </span>                    
<span class="white_bg"> J</span> Ja
<span class="white_bg"> N</span> Nej          <span class="white_bg">^C</span> Annullér</samp>

<p>Når du svarer y vil nano skrive filnavnet med den fulde sti, hvortil du taster <kbd>Enter</kbd>.</p>

<p>Får du en fejlmelding om at du ikke kan gemme skyldes det oftest, at man redigerer i en fil man ikke har rettigheder til. Oftes skyldes det at man glemmer at anvende <em>sudo</em> når man redigerer i systemfiler.</p>

<h3>cat</h3>

<p><em>cat</em> laver et output af filen, men stopper ikke når skærmen er fyldt. Derfor er <em>cat</em> ikke velegnet til at vise indholdet af store filer.</p>

<p>vi vil se indholdet af <em>/etc/hosts</em></p>

<code class="cmd">cat /etc/hosts</code>

<samp>127.0.0.1 localhost
127.0.1.1 server1

# The following lines are desirable for IPv6 capable hosts
::1     ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters</samp>

<p>man-page cat: 
	<a href="http://manpages.ubuntu.com/manpages/focal/man1/cat.1.html" target="_blank">
	http://manpages.ubuntu.com/manpages/focal/man1/cat.1.html</a></p>

<h3>more</h3>

<p><em>more</em>  laver en udskrift af filen, et skærmbillede ad gangen. Man fortsætter visningen ved at trykke <kbd>Enter</kbd> eller <kbd>mellemrum</kbd>.</p>

<dl class="with_keys">
	<dt><kbd>Enter</kbd></dt>
	<dd>En linie ad gangen</dd>
	<dt><kbd>mellemrum</kbd></dt>
	<dd>En side ad gangen</dd>
</dl>

<p>Neders på siden står der hvor langt i filen man er angivet i procent.</p>

<pre><code>more /etc/passwd</code></pre>

<samp class="terminal">.... mange linier.....

gnats:x:41:41:Gnats Bug-Reporting System (admin):/var/lib/gnats:/usr/sbin/nologi
n
nobody:x:65534:65534:nobody:/nonexistent:/usr/sbin/nologin
systemd-network:x:100:102:systemd Network Management,,,:/run/systemd:/usr/sbin/n
ologin
systemd-resolve:x:101:103:systemd Resolver,,,:/run/systemd:/usr/sbin/nologin
systemd-timesync:x:102:104:systemd Time Synchronization,,,:/run/systemd:/usr/sbi
<span class="white_bg">--More--(63%)</span>
</samp>

<p>man-page more: 
	<a href="http://manpages.ubuntu.com/manpages/focal/man1/more.1.html" target="_blank">
	http://manpages.ubuntu.com/manpages/focal/man1/more.1.html</a></p>
	
<h3>head/tail</h3>

<p><em>head</em> viser de første 10 linier af en fil og <em>tail</em> viser de sidste 10</p>

<p>Kommandoen er god til at se om noget er blevet korrekt tilføjet til en fil.</p>

<pre><code>tail /etc/passwd</code></pre>

<samp>_apt:x:105:65534::/nonexistent:/usr/sbin/nologin
tss:x:106:111:TPM software stack,,,:/var/lib/tpm:/bin/false
uuidd:x:107:112::/run/uuidd:/usr/sbin/nologin
tcpdump:x:108:113::/nonexistent:/usr/sbin/nologin
landscape:x:109:115::/var/lib/landscape:/usr/sbin/nologin
pollinate:x:110:1::/var/cache/pollinate:/bin/false
sshd:x:111:65534::/run/sshd:/usr/sbin/nologin
systemd-coredump:x:999:999:systemd Core Dumper:/:/usr/sbin/nologin
tj:x:1000:1000:Thomas Jensen:/home/tj:/bin/bash
lxd:x:998:100::/var/snap/lxd/common/lxd:/bin/false</samp>

<p><strong>Overblik</strong></p>

<dl class="">
	<dt>tail /etc/passwd</dt>
	<dd>viser de 10 sidste linier af <em>/etc/passwd</em></dd>
	<dt>tail -5 /etc/passwd</dt>
	<dd>viser de sidste 5 linier af <em>/etc/passwd</em></dd>
	<dt>head -5 /etc/passwd</dt>
	<dd>viser de første 5 linier af <em>/etc/passwd</em></dd>
</dl>

<p>man-page tail: 
	<a href="http://manpages.ubuntu.com/manpages/focal/en/man1/tail.1.html" target="_blank">
	http://manpages.ubuntu.com/manpages/focal/en/man1/tail.1.html</a></p>

<p>man-page head: 
	<a href="http://manpages.ubuntu.com/manpages/focal/man1/head.1.html" target="_blank">
	http://manpages.ubuntu.com/manpages/focal/man1/head.1.html</a></p>

<h3>sort</h3>

<p><em>sort</em> sortere i outputtet.</p>

<p>Her bruger vi <em>sort</em> til at filtrere de sidste 5 linier af <em>/etc/passwd</em></p>

<pre><code>tail -5 /etc/passwd | sort</code></pre>

<samp>lxd:x:998:100::/var/snap/lxd/common/lxd:/bin/false
pollinate:x:110:1::/var/cache/pollinate:/bin/false
sshd:x:111:65534::/run/sshd:/usr/sbin/nologin
systemd-coredump:x:999:999:systemd Core Dumper:/:/usr/sbin/nologin
tj:x:1000:1000:Thomas Jensen:/home/tj:/bin/bash</samp>

<p>Som du kan se er <em>lxd</em> nu blevet flyttet øvers.</p>

<p>Det ændrer ikke på filen, men giver os et bedre overblik.</p>

<p>man-page sort: 
	<a href="http://manpages.ubuntu.com/manpages/focal/man1/sort.1.html" target="_blank">
	http://manpages.ubuntu.com/manpages/focal/man1/sort.1.html</a></p>
	
<h3>uniq</h3>

<p>Nogle gang kan vi have filer der har gentagelser i sig - det kan f.eks. være logfiler. <em>uniq</em> kan hjælpe os med det når filen er sorteret (se <em>sort</em> ovenfor)</p>

<p>Her har jeg en <em>fil1</em> der viser hvem der har været inde i et rum</p>

<pre><code>cat fil1</code></pre>

<samp>Hans
Grethe
Anders
Grethe
Anders
Grethe</samp>

<p>Jeg vil gerne se hvem der har været derinde</p>

<pre><code>sort fil1 | uniq</code></pre>

<samp>Anders
Grethe
Hans</samp>

<p>Jeg vil gerne se hvor mange gange de har været derinde</p>

<pre>sort fil1 | uniq -c</pre>

<samp>      2 Anders
      3 Grethe
      1 Hans</samp>
      
<p>Jeg vil gerne se hvem der har været derinde mere end engang, og hvor mange gange.</p>      

<pre><code>sort fil1 | uniq -cd</code></pre>

<samp>      2 Anders
      3 Grethe
</samp>

<p>Jeg vil gerne se hvem der kun har været derinde 1 gang.</p>

<pre><code>sort fil1 | uniq -u</code></pre>

<samp>Hans</samp>

<p>man-page sort: 
	<a href="http://manpages.ubuntu.com/manpages/focal/man1/uniq.1.html" target="_blank">
	http://manpages.ubuntu.com/manpages/focal/man1/uniq.1.html</a></p>

<h2>Redirect</h2>

<dl class="">
	<dt>Redirect</dt>
	<dd>Overførsel af output</dd>
	<dt>echo</dt>
	<dd>Udskrivning af tekststreng</dd>
	<dt>tee</dt>
	<dd>skriv input til output</dd>
	<dt>sed</dt>
	<dd>Ændring af tekststrenge</dd>
</dl>

<h3>Redirect -omdirigering</h3>

<p>I linux bruges tegnet <em>></em> (større end) til at omdirigere indhold. I denne sammenhæng skal det ses som en pil der peger til højre.</p>

<p>Som standard vises output i terminalen. Men det kan være at man gerne vil have output i en fil, så man kan arbejde videre med den.</p>

<p>Output kan have 2 former:</p>

<dl class="">
	<dt>stdout</dt>
	<dd>Output fra en kommando</dd>
	<dt>stderr</dt>
	<dd>Fejlmeddelelse fra en kommando</dd>
</dl>

<p>Det kan bruges på følgende måder:</p>

<dl class="">
	<dt>> file</dt>
	<dd>omdirigerer <em>stdout</em> til <em>file</em></dd>
	<dt>1> file</dt>
	<dd>omdirigerer <em>stdout</em> til <em>file</em></dd>
	<dt>2> file</dt>
	<dd>omdirigerer <em>stderr</em> til <em>file</em></dd>
	<dt>&> file</dt>
	<dd>omdirigerer <em>stdout</em> og <em>stderr</em> til <em>file</em></dd>
</dl>

<p>Hvis man bare vil fjerne meddelelser fra kommandoer (f.eks. i scripts) kan man i stedet for en fil vælge <em>/dev/null</em>. Det er reelt en mappe på computeren der ikke er der - et sort hul.</p>



<p>Her er en kort oversigt:</p>

<dl class="">
	<dt>> file</dt>
	<dd>Omdirigerer </dd>
	<dt></dt>
	<dd></dd>
	<dt></dt>
	<dd></dd>
</dl>







<p>Der gælder følgende:</p>

<dl class="">
	<dt>></dt>
	<dd>Flyt til (erstatter indhold hvis der er noget i forvejen)</dd>
	<dt>>></dt>
	<dd>Tilføj til slutningen</dd>
</dl>






<p>Nogle gange har man brug for ens output bliver brugt</p>



<p>Nogen gange har man brug for at omdirigere indhold. Det kan f.eks. være at indsætte et output i en fil. Til at omdirigere anvender man <code class="bash">&gt;</code> og <code class="bash">&gt;&gt;</code>. En pil erstatter alt indhold og 2 pile tilføjer til slutningen af filen. </p>

<ul class="disc">
	<li><code class="bash">cat fil1 > fil2</code> - Erstat indholdet af fil2 med indholdet af fil1</li>
	<li><code class="bash">cat fil1 >> fil2</code> - Tilføj indholdet af fil1 til slutningen af fil2</li>
	<li><code class="bash">cat -n fil >> fil_med_numre</code> - sæt linienumre i file</li>
</ul>

<p>Omdirigering anvendes også til at omdirigere fejlmeddelelser. Her anvender man <em>1</em>, <em>2</em> og <em>&</em> til at angive typen af output man vil omdirigere. Se følgende skema</p>

<ul class="disc">
	<li><code class="bash">1 &gt; fil</code> - Sætter "godkendte" output ind i fil</li>
	<li><code class="bash">2 &gt; fil</code> - Sætter fejl-output ind i fil</li>
	<li><code class="bash">& &gt; fil</code> - sætter både rigtig og fejl-output ind i fil</li>
</ul>

<p>Herunder er vist nogle eksempler med eksempler med kommandoen <code class="bash">id</code>:</p>

<p>Her bliver output fra kommandoen ledt direkte ind i filen <em>~/test</em>, hvilket vi viser ved at køre <code class="bash">cat ~/test</code>.</p>

<pre class="ubuntu_terminal">
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ id tj 1> ~/test
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ cat ~/test
uid=1000(tj) gid=1000(tj) grupper=1000(tj),4(adm),24(cdrom),27(sudo),30(dip), 46(plugdev),108(lpadmin),124(sambashare)
</pre>

<p>Her leder vi fejloutput ind i filen <em>~/test</em>. Derfor bliver output fra kommandoen vist, men der er intet i filen <em>~/test</em>, fordi der ikke er noget fejloutput</p>

<pre class="ubuntu_terminal">
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ id tj 2> ~/test
uid=1000(tj) gid=1000(tj) grupper=1000(tj),4(adm),24(cdrom),27(sudo),30(dip), 46(plugdev),108(lpadmin),124(sambashare)
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ cat ~/test
</pre>


<p>Her leder vi et fejloutput ind i filen <em>~/test</em>. Læg mærke til at det ikke bliver betragtet som en fejl at <em>~/test</em> ikke ikke finder en bruger. Herunder prøver vi at anvende en kommando systemet ikke kender. I stedet for at vise fejlen i terminalen skubber den fejl-output ind i filen <em>~/test</em></p>


<pre class="ubuntu_terminal">
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ id hugo 2>/dev/null
id: 'hugo': ingen sådan bruger
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ cat ~/test
</pre>

<p>Man kan også sende output til <em>/dev/null</em>, som bedst kan beskrives som sort hul. På den måde kan man fjerne meddelelser fra et program. Det kan være praktisk hvis man anvender kommandoer i scripts eller man ønsker at køre programmer usynligt i baggrunden.</p>


<pre class="ubuntu_terminal">
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ ifd hugo 2> ~/test
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ cat ~/test
Ingen kommando ved navn "ifd" blev fundet. Mente du istedet:
 Kommandoen "fid" fra pakken "id-utils" (universe)
 Kommandoen "id" fra pakken "coreutils" (main)
 Kommandoen "xfd" fra pakken "x11-utils" (main)
 Kommandoen "if1" fra pakken "ctsim" (universe)
 Kommandoen "if2" fra pakken "ctsim" (universe)
 Kommandoen "fd" fra pakken "fdclone" (universe)
 Kommandoen "ifp" fra pakken "ifp-line-libifp" (universe)
ifd: kommando ikke fundet
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ 
</pre>

<p>Vil man kvæle alle putput fra en kommando anvender man <em>/dev/null</em>. Anvender man <code class="bash">&</code> som argument i et scripts, så kan man se at intentionen er at kvæle alle output.</p>

<pre class="ubuntu_terminal">
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ id tj 
uid=1000(tj) gid=1000(tj) grupper=1000(tj),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),108(lpadmin),124(sambashare)
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ id tj 1>/dev/null
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ id hugo 2>/dev/null
</pre>


<p>En sidste praktisk måde at anvende omdirigering er til at indsætte tekststrenge ved hjælp af <code class="bash">echo</code>. På denne måde kan man indsætte tekstrenge i filer:</p>

<ul class="disc">
	<li><code class="bash">echo "tekststreng" > *fil_navn*</code> - Sletter filens indhold og indsætter "tekststreng" som nyt indhold</li>
	<li><code class="bash">echo "tekststreng" >> *fil_navn*</code> - Indsæt "tekststreng" i bunden af en fil - anvendeligt til logs.</li>
</ul>

<p>Læs mere: <a href="http://askubuntu.com/questions/350208/what-does-2-dev-null-mean" target="_blank">
http://askubuntu.com/questions/350208/what-does-2-dev-null-mean</a></p>

<h3>echo</h3>

<h3>tee</h3>

<h3>sed</h3>

<h2>Pakning af filer</h2>

<dl class="">
	<dt>tar</dt>
	<dd>tarballs - Linux pakkeformat</dd>
	<dt>gzip</dt>
	<dd>Komprimeringsalgoritme</dd>
	<dt>bzip</dt>
	<dd>Komprimeringsalgoritme</dd>
	<dt>lzma</dt>
	<dd>Komprimeringsalgoritme</dd>
</dl>

<h3>tar</h3>
<h3>gzip</h3>
<h3>bzip2</h3>
<h3>lzma</h3>
	
<h2>genstarte og slukke</h2>

<dl class="">
	<dt>reboot</dt>
	<dd>Genstart computeren</dd>
	<dt>shutdown</dt>
	<dd>Luk computeren</dd>
</dl>

<h3>reboot</h3>

<h3>shutdown</h3>


<h2>Arbejde med filer</h2>
















	
<h2>Se og redigere rettigheder</h2>

<p>I Linux er der 3 grundlæggende rettigheder vi kan give filer og mapper: read, write og execute (læse, skrive og udføre).</p>

<ul class="disc">
	<li>Læse - man kan se indholdet.</li>
	<li>Skrive - man kan ændre indholdet</li>
	<li>Eksekvere - kan kan køre filen som et progam</li>
</ul>


<p>Ved hjælp af disse 3 parametre styres alle filer, mapper og enheder på computere. Lad os kigge på et eksempel nemlig <em>/etc/passwd</em> som er den fil der styrer brugerne på Linux .</p>

<pre><code>ls -al /etc/passwd</code></pre>

<samp>-rw-r--r-- 1 root root 2013 mar 16 20:05 /etc/passwd</samp>

<!--
<samp><span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~</span>$ ls -al /etc/passwd
-rw-r--r-- 1 root root 2013 mar 16 20:05 /etc/passwd</samp>

<samp class="terminal"><span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~</span>$ ls -al /etc/passwd
-rw-r--r-- 1 root root 2013 mar 16 20:05 /etc/passwd</samp>
-->

<p>Den linie giver os alle de informationer om rettigheder vi har behov for</p>

<dl class="">
	<dt>-</dt>
	<dd>en streg fortæller det er en fil</dd>
	<dt>rw-r--r--</dt>
	<dd>Oversigt over filens retttigheder</dd>
	<dt>1</dt>
	<dd>Antal hard links (se note nedenfor)</dd>
	<dt>root root</dt>
	<dd>Brugeren og gruppen</dd>
	<dt>2013</dt>
	<dd>Filens størrelse</dd>
	<dt>mar 16 20:05</dt>
	<dd>Tidsstempel</dd>
	<dt>/etc/passwd</dt>
	<dd>Filens navn</dd>
</dl>


<p>I Linux kan man have <em>hard</em> og <em>symbolic</em> links. Forskellen er, at hvis man sletter et hardlink, så forsvinder filen. Hvis man sletter et softlink, så er det kun henvisningen til filen man sletter. Filen er altså uskadt</p>

<p>Læg mærke til, at der både findes en bruger og en gruppe der hedder <em>root</em>. Alle brugere har som standard både tildelt en gruppe med deres egen navn. Det betyder at alle brugere har mulighed for at tilføje brugere til deres grupper så de selv kan tildele rettigheder til filer og mapper.</p>

<h3>Aflæsning af rettigheder</h3>

<p>Rettighederne ovenfor var: <em>- r w - r - - r - -</em>. Der er altså 10 felter vi skal forholde os til.</p>

<p>Det første felt viser filtypen. En streg betyder at det er en standardfil. Hvis er var et <em>d</em> var det en mappe.</p>

<p>De sidste tegn viser rettighederne i grupper af 3 for brugeren (2-4), gruppen (5-7) og alle (8-10). </p>

<ul class="disc">
	<li>Brugeren har rettigheden: <em>r w -</em> (læse, skrive)</li>
	<li>Gruppen har rettigheden <em>r - -</em> (læse)</li>
	<li>Alle har rettigheden <em>r - -</em> (læse)</li>
</ul>


<p>Vi kan altså sige om denne fil at brugeren er <em>root</em>, som må læse og skrive i filen. Alle andre (gruppe og alle). De er nødvendigt for alle at kunne læse denne fil, da det er den der administrere adgangen til systemet. Kigger vi ind i filen kan vise hvad den har at sige om vores bruger, her <em>tj</em>. Da alle har ret til at læse i filen kan jeg som almindelig bruger se den - men kun brugeren root ændre i den.</p>

<pre><code>cat /etc/passwd | grep tj</code></pre>

<samp><span class="red">tj</span>:x:1000:1000:Thomas Jensen,,,:/home/<span class="red">tj</span>:/bin/bash</samp>


<p>Den linie fortæller os om vores bruger, hvilket bruger- og gruppe id man har, ens hjemmemappe og hvilken kommandofortolker vi har adgang til. Det lille x i starten henviser til vores kodeord, som er lagret i filen <span class="inl_cmd">/etc/shadow</span>.</p>

<p>Et andet eksempel er vores hjemmemappe, i dette tilfælde <span class="inl_cmd">/home/tj</span>. Vi kan se rettighedern ved at køre:</p>

<pre><code>ls -al /home</code></pre>

<samp>totalt 12
drwxr-xr-x  3 root root 4096 maj 30 13:33 .
drwxr-xr-x 24 root root 4096 maj 30 13:51 ..
drwxr-xr-x 16 tj   tj   4096 jun  2 09:47 tj</samp>


<h3>Root - superbrugeren</h3>

<p><em>root</em>-brugeren er ikke underlagt de rettigheder der er sat på på de enkelte filer. <em>root</em> kan og skal kunne alt. At have <em>root</em>-rettigheder på et system handler ikke kun om at man er god til Linux, men forudsætter også at man gør sig overvejelser om hvad man bruger disse rettigheder til.</p>

<p>Den danske grundlov (<a href="http://grundloven.dk/" target="_blank">http://grundloven.dk/</a>) siger følgende:</p>

<blockquote>
	
	<p><strong>§ 72</strong></p>

	<p>Boligen er ukrænkelig. Husundersøgelser, beslaglæggelse og undersøgelse af breve og andre papirer samt brud på post-, telegraf- og telefonhemmeligheden må, hvor ingen lov hjemler en særegen undtaglse, alene ske efter en retskendelse. 
	</p>
	
</blockquote>

<p>Grundloven har gode retningslinier til superbrugeren. Du må alt der ikke krænker brugeren, dvs. hjælpe brugeren med at løse sin opgave. Det gælder også selvom brugeren er dit barn, din partner eller kollega. Brugerens personlige filer og mapper er vedkommendes ejendom, og hvis man som administrator krænker dem ved at læse dem - så er det et grundlovsbrud! </p>

<p>Den eneste undtagelse er, når brugeren har fået at vide at det ikke er brugerens private ejendom, f.eks. hvor en virksomhed eller skole stiller ressourcen til rådighed for dig.</p>






<h2>Luk computeren</h2>
	
<h3>reboot</h3>	
	
<p>Denne kommando genstarter computeren. Den skal køres med root-rettigheder.</p>	

<code class="bash">sudo reboot</code>
	

<h3>shutdown</h3>

<p>En server lukkes ned med kommandoen:</p>

<code class="cmd">sudo shutdown [Optioner] tid [besked]</code>

<p>Eksempel</p>

<ul class="disc">
	<li><code class="bash">shutdown -h 0</code> - Computeren lukkes ned nu</li>
	<li><code class="bash">shutdown -h 10 Computeren lukkes ned om 10 minutter</code> - Computeren lukkes ned om 10 minutter med budskabet ”Computeren lukkes ned om 10 minutter”</li>
	<li><code class="bash">shutdown -r 0</code> - Computeren genstartes om 0 minutter</li>
</ul>


<p>man-page shutdown: <a href="http://manpages.ubuntu.com/manpages/focal/en/man8/shutdown.8.html" target="_blank">
http://manpages.ubuntu.com/manpages/focal/en/man8/shutdown.8.html</a></p>

<p>man-page reboot: <a href="http://manpages.ubuntu.com/manpages/focal/man8/reboot.8.html" target="_blank">
http://manpages.ubuntu.com/manpages/focal/man8/reboot.8.html</a></p>





<h2>Redirect</h2>



<h2>Erstat indhold</h2>


<h3>echo</h3>

<p><code class="bash">echo</code> er en simpel kommando som blot gentager sit input f.eks:</p>

<pre class="ubuntu_terminal"><span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ echo "hej"
hej
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ echo "En længere tekstreng"
En længere tekstreng
</pre>

<p>Vi skal bruge <code class="bash">echo</code> til at indsætte tekststrenge ind i andre kommandoer</p>


<h3>tee</h3>

<p>Kommandoen virker lidt som <code class="bash">>></code>, men arbejder med output af en forudgående kommandoe f.eks:</p>

<code class="cmd">date | tee ~/klokken</code>

<p>Kommandoen vil skrive tidsangivelsen ind i filen <em>klokken</em>. Herunder er mit output fra filen ved hjælp af <code class="bash">cat ~/klokken</code>:</p>

<pre class="black">
tir apr 12 08:35:42 CEST 2016
</pre>

<p>Hvis du kører kommandoen flere gange vil du opdage, at den erstatter filens indhold, så der hele tiden kun er en en linie i filen. Hvis du gerne vil have det nye output lagt ind neders i filen anvender du optionen <code class="bash">-a</code></p>

<code class="cmd">date | tee -a ~/klokken</code>

<p>Herunder er filens indhold efter 3 kørsler:</p>

<pre class="black">
tir apr 12 08:36:33 CEST 2016
tir apr 12 08:39:19 CEST 2016
tir apr 12 08:39:21 CEST 2016
</pre>

<p><span class="inl_cmd">tee</span> kan også anvendes til at indsætte tekstrenge i filer. Herunder opretter vi filen <em>testtee</em> i vores hjemmemappe og indsætter tekststrengen <em>hej</em>.</p>

<code class="cmd">touch ~/testtee</code>
<code class="more_cmd">echo "hej" | tee ~/testtee</code>

<pre class="ubuntu_terminal">
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ touch ~/testtee
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ echo "hej" | tee ~/testtee
hej
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ tail ~/testtee
hej
</pre>

<p>Vær opmærksom på at <code class="bash">tee</code> som standard erstatter indholdet af filen. Hvis vi vil indsætte en ny linie skal vi anvende omdirigering (markeret med rødt herunder):</p>

<pre class="ubuntu_terminal">
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ echo "hej (linie nummer 2)" | tee <span class="red">>></span> ~/testtee
hej (linie nummer 2)
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ tail ~/testtee
hej
hej (linie nummer 2)
</pre>

<p>Hvis man vil indsætte tekststrenge i filer der ikke er ejet af en selv skal man også anvende <code class="bash">tee</code>.</p>

<code class="cmd">echo "hejsa root" | sudo tee /root/hej</code>

<pre class="ubuntu_terminal">
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ echo "hejsa root" | sudo tee /root/hej
hejsa root
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ sudo cat /root/hej
hejsa root
</pre>

<p>Læg mærke til at der først skal <code class="bash">sudo</code> på efter pipen. Det skyldes at det først er under skrivningen af filen vi skal anvende root's rettigheder.</p>

<h3>sed</h3>

<p><code class="bash">sed</code> anvendes til at filtrere og transformere tekst i filer. Her vil vi kun se hvordan vi kan erstatte tekst ved hjælp af <code class="bash">sed</code>. Generelt fungerer kommandoen på følgende måde hvis man vil erstatte <em>a</em> med <em>b</em>:</p>

<code class="cmd">sed -i s,a,b,*filnavn*</code>

<ol class="disc">
	<li>Opret <span class="inl_cmd">sedfil</span> <code class="bash">touch sedfil</code></li>
	
	<li>Skriv tekst ind i filen: <code class="bash">echo "Hej jeg hedder Kurt-Georg" > sedfil</code></li>
	
	<li>Erstat <span class="inl_cmd">Kurt-Georg</span> med dit eget navn: <code class="bash">sed -i s,Kurt-Georg,Thomas, sedfil</code></li>
	
</ol>

<pre class="ubuntu_terminal">
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ touch sedfil
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ echo 'Mit navn er Kurt-Georg' > sedfil
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ cat sedfil
Mit navn er Kurt-Georg
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ sed -i s,Kurt-Georg,Thomas, sedfil 
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ cat sedfil
Mit navn er Thomas
</pre>

<p>Hvis du kommer i en situation, hvor du skal indsætte kommaer i teksten kan du bruge <em>/</em> som escape character.</p>

<code class="cmd">sed -i s/a/b/*filnavn*</code>

<p><span class="inl_cmd">sed</span> er velegnet til at bruge i scripts.</p>

<h2>Redigere filer</h2>




<h2>Pakke programmer</h2>

<h3>tar</h3>

<p>Når man skal downloade Linuxprogrammer vil man ofte downloade dem som <span class="inl_cmd">tar</span>-filer. <span class="inl_cmd">tar</span> står for <span class="inl_cmd">T</span>ape <span class="inl_cmd">Archive</span> og er i sin oprindelige form blot en måde at lægger sekventielt efter hinanden, så de kan læses fra et bånd. Selvom man ikke anvender bånd til at lagre filer mere, er komprimerede <span class="inl_cmd">tar</span>-pakker standard for at pakke programmer på Linux. <span class="inl_cmd">tar</span>-filer bliver også kaldt <span class="inl_cmd">tarballs</span>.</p>

<p>Som standard pakker man filer ned i mapper. På den måde sikrer man sig også at filerne ligger i den samme mappestruktur, som det blev pakket ned i.</p>

<p>Man pakker filer ned på følgende måde:</p>

<code class="cmd">tar *optioner* *denPakkedeFil* *mappenDerSkalPakkes*</code>

<p>For at pakke ud (her tar.gz) anvendes:</p>

<code class="cmd">tar *optioner* *denPakkedeFil*</code>

<p>Man kan kende komprimeringsalgoritmen på endelse efter tar f.eks. <span class="inl_cmd">tar.gz</span>. Herunder er de mest anvendte algoritmer gennemgået efter graden de komprimerer, samt eksempler hvor mappen <span class="inl_cmd">gif</span> bliver pakket og udpakket igen.</p>

<h4>Se indhold</h4>

<p>For at se indholdet af tar filer anvendes optionerne <span class="inl_cmd">-tvf</span></p>

<pre class="ubuntu_terminal">
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ tar -tvf gif_backup.tar.gz
drwxr-xr-x tj/tj         0 2016-07-10 12:26 gif/
-rw-r----- tj/tj    805949 2016-07-10 12:26 gif/slow_clap_citizen_kane.gif
drwxr-xr-x tj/tj         0 2016-07-10 12:26 gif/tegnefilm/
-rw-r----- tj/tj    986614 2016-07-10 12:26 gif/tegnefilm/run_simpson_run.gif
drwxr-xr-x tj/tj         0 2016-07-10 12:26 gif/the bird/
-rw-r----- tj/tj   3080999 2016-07-10 12:26 gif/the bird/thebird02.gif
-rw-r----- tj/tj   1890379 2016-07-10 12:26 gif/the bird/thebird01.gif
-rw-r----- tj/tj    121990 2016-07-10 12:26 gif/the bird/thebird03.gif
-rw-r----- tj/tj   6313886 2016-07-10 12:26 gif/the bird/thebird04.gif
-rw-r----- tj/tj    954706 2016-07-10 12:26 gif/mordor.gif
-rw-r----- tj/tj    137685 2016-07-10 12:26 gif/lachifre.gif
</pre>

<p>Man kan også finde teksstrenge i tar-filerne ved hjælp af <span class="inl_cmd">grep</span>.</p>

<pre class="ubuntu_terminal">
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ tar -tvf gif_backup.tar.gz | grep simpson
-rw-r----- tj/tj    986614 2016-07-10 12:26 gif/tegnefilm/run_<span class="red">simpson</span>_run.gif

</pre>

<h4>Udpak enkeltfiler</h4>

<p>For pakke en enkelt fil ud sætter man blot filnavnet til sidst. Læg mærke til at man skal bruge den fulde sti.</p>

<pre class="ubuntu_terminal">
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ tar -xvf gif_backup.tar.gz gif/tegnefilm/run_simpson_run.gif
gif/tegnefilm/run_simpson_run.gif
</pre>

<p>Hvis man vil udpakke flere filer sætter man blot hvert filnavn ind som en tekststreng:</p>

<pre class="ubuntu_terminal">
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ tar -xvf gif_backup.tar.gz gif/tegnefilm/run_simpson_run.gif gif/mordor.gif
gif/tegnefilm/run_simpson_run.gif
gif/mordor.gif
</pre>

<p>Eller med wildcards <span class="inl_cmd">*</span></p>

<pre class="ubuntu_terminal">
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ tar -xvf gif_backup.tar.gz --wildcards *bird*
gif/the bird/
gif/the bird/thebird02.gif
gif/the bird/thebird01.gif
gif/the bird/thebird03.gif
gif/the bird/thebird04.gif
</pre>

<p>Generelt gælder følgende options:</p>

<ul class="disc">
	<li><code class="bash">c</code> - lav (create) et arkiv</li>
	<li><code class="bash">x</code> - udpak (extract)</li>
	<li><code class="bash">v</code> - vis fremgang</li>
	<li><code class="bash">f</code> - filarkivets navn</li>
	<li><code class="bash">t</code> - se indholdet af filen</li>
	<li><code class="bash">j</code> - opret en <em>bzip2</em> pakket fil</li>
	<li><code class="bash">z</code> - opret en <em>gzip</em> pakket fil</li>
</ul>


<p>Læs mere: <a href="http://www.tecmint.com/18-tar-command-examples-in-linux/" target="_blank">http://www.tecmint.com/18-tar-command-examples-in-linux/</a></p>

<h3>gzip</h3>

<p><span class="inl_cmd">gzip</span> er en simpel og effektiv komprimeringsalgoritme. Den har den bedste hastigheds/filstørelses ratio. Kan genkendes på at <span class="inl_cmd">gz</span> eller <span class="inl_cmd">gzip</span> indgår i den pakkede fils navn.</p>

<span class="afsnit">Pakning med gzip</span>

<code class="cmd">tar cvfz gif_backup.tar.gz gif</code>

<pre class="ubuntu_terminal">
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ tar cvzf gif_backup.tar.gz gif
gif/
gif/slow_clap_citizen_kane.gif
gif/tegnefilm/
gif/tegnefilm/run_simpson_run.gif
gif/the bird/
gif/the bird/thebird02.gif
gif/the bird/thebird01.gif
gif/the bird/thebird03.gif
gif/the bird/thebird04.gif
gif/mordor.gif
gif/lachifre.gif
</pre>

<span class="afsnit">Udpakning af gzip</span>

<code class="cmd">tar xvf gif_backup.tar.gz</code>

<pre class="ubuntu_terminal">
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ tar xvf gif_backup.tar.gz
gif/
gif/slow_clap_citizen_kane.gif
gif/tegnefilm/
gif/tegnefilm/run_simpson_run.gif
gif/the bird/
gif/the bird/thebird02.gif
gif/the bird/thebird01.gif
gif/the bird/thebird03.gif
gif/the bird/thebird04.gif
gif/mordor.gif
gif/lachifre.gif
</pre>

<h3>bzip2</h3>

<p><span class="inl_cmd">bzip2</span> er komprimerer hårdere end <span class="inl_cmd">gzip</span> - men også langsommere. Algoritmen kræver også mere CPU og RAM end gzip. Kan genkendes på at <span class="inl_cmd">bz2</span> eller <span class="inl_cmd">bzip2</span> indgår i den pakkede fils navn.</p>

<span class="afsnit">Pakning med bzip2</span>

<code class="cmd">tar cvfj gif_backup.tar.bz gif</code>

<pre class="ubuntu_terminal">
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ tar cvzf gif_backup.tar.gz gif
gif/
gif/slow_clap_citizen_kane.gif
gif/tegnefilm/
gif/tegnefilm/run_simpson_run.gif
gif/the bird/
gif/the bird/thebird02.gif
gif/the bird/thebird01.gif
gif/the bird/thebird03.gif
gif/the bird/thebird04.gif
gif/mordor.gif
gif/lachifre.gif
</pre>

<span class="afsnit">Udpakning af bzip2</span>

<code class="cmd">tar xvf gif_backup.tar.bz</code>

<pre class="ubuntu_terminal">
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ tar xvf gif_backup.tar.gz
gif/
gif/slow_clap_citizen_kane.gif
gif/tegnefilm/
gif/tegnefilm/run_simpson_run.gif
gif/the bird/
gif/the bird/thebird02.gif
gif/the bird/thebird01.gif
gif/the bird/thebird03.gif
gif/the bird/thebird04.gif
gif/mordor.gif
gif/lachifre.gif
</pre>

<h3>lzma</h3>

<p><span class="inl_cmd">lzma</span> komprimerer hårdest af disse 3, men er også meget langsommere. Til gengæld dekomprimerer det rigtigt hurtigt. Fordelen ved at anvende <span class="inl_cmd">lzma</span> er, at man har en meget hård komprimering, og en rimelig hurtig udpakningstid. Formatet er især velegnet til backup af store mængder data. Kan genkendes på at <span class="inl_cmd">lz</span> eller <span class="inl_cmd">lzma</span> indgår i filnavnet.</p>

<span class="afsnit">Pakning med lzma</span>

<code class="cmd">tar cvf gif_backup.tar.lz --lzma gif</code>

<p>Læg mærke til at <span class="inl_cmd">--lzma</span> skal stå før mappen der skal pakkes</p>

<pre class="ubuntu_terminal">
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ tar cvf gif_backup.tar.lz --lzma gif
gif/
gif/slow_clap_citizen_kane.gif
gif/tegnefilm/
gif/tegnefilm/run_simpson_run.gif
gif/the bird/
gif/the bird/thebird02.gif
gif/the bird/thebird01.gif
gif/the bird/thebird03.gif
gif/the bird/thebird04.gif
gif/mordor.gif
gif/lachifre.gif
</pre>

<span class="afsnit">Udpakning af lzma</span>

<code class="cmd">tar xvf gif_backup.tar.lz</code>

<pre class="ubuntu_terminal">
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ tar xvf gif_backup.tar.lz
gif/
gif/slow_clap_citizen_kane.gif
gif/tegnefilm/
gif/tegnefilm/run_simpson_run.gif
gif/the bird/
gif/the bird/thebird02.gif
gif/the bird/thebird01.gif
gif/the bird/thebird03.gif
gif/the bird/thebird04.gif
gif/mordor.gif
gif/lachifre.gif
</pre>


<p>Herunder kan du se en sammenligning taget fra: <a href="http://tukaani.org/lzma/benchmarks.html" target="_blank">http://tukaani.org/lzma/benchmarks.html</a>. Testen er lavet på en mappe med i alt 203 Mb filer:</p>

<table class="">
	<thead>
		<tr>
			<th scope="col">Algoritme</th>
			<th scope="col">Pakket</th>
			<th scope="col">af oprindelig</th>
			<th scope="col">Pakning</th>
			<th scope="col">Udpakning</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>gzip</td>
			<td>79,2 MB</td>
			<td>37,2%</td>
			<td>24,5 s &rArr; 8,3 MB/s</td>
			<td>3,2 s &rArr; 63 MB/s</td>
		</tr>
		<tr>
			<td>bzip</td>
			<td>72,2 MB</td>
			<td>34%</td>
			<td>2m 37s &rArr; 1,3 MB/s</td>
			<td>38,2s &rArr; 0,4 MB/s</td>
		</tr>
		<tr>
			<td>lzma</td>
			<td>54,1 MB</td>
			<td>26,1%</td>
			<td>8m 24s &rArr; 0,4 MB/s</td>
			<td>10,1s &rArr; 20 MB/s</td>
		</tr>		
	</tbody>
</table>

<span class="afsnit">Kort opsumeret</span>

<p>Brug <em>gzip</em> til dagligdags arbejde, og brug <em>lzma</em> når der tages backup af store mængder, f.eks. backups af drev eller store projekter.</p>


	
</div><!-- end: col-md-9 -->

<footer>

	<p onclick="parentNode.remove()"><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons licens" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a>Indholdet på Vidas.dk er licenseret under <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> og er skrevet af Thomas Jensen. (<a href="../hvem_er_jeg.html" target="_blank">Læs mere</a>)</p>

</footer>
	
	
</div><!-- end: row-fluid -->

</div> <!-- end: container-fluid -->


<!-- SCRIPT SECTION -->
<script type="text/javascript" src="../js/jquery.min.js"></script>
<script type="text/javascript" src="../js/jquery-ui.min.js"></script>
<script type="text/javascript" src="../js/jquery.tocify.min.js"></script>
<script type="text/javascript" src="../js/bootstrap.min.js"></script>

<!-- PRETTYFY-->
<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>


<!-- HIGHLIGHT -->
	<script src="../js/highlight.pack.js" type="text/javascript"></script>
	<script>hljs.initHighlightingOnLoad();</script>

<!-- MATHJAX -->
<script type="text/javascript" 
	src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  displayAlign: "left",
  displayIndent: "0em"
});
</script>


<!-- TOCIFY -->
<script>
	$(function() {var toc = $("#toc").tocify({ selectors: "h2, h3, h4" }).data("toc-tocify"); });
</script>
<!-- GOOGLE ANALYTICS -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-89933285-1', 'auto');
  ga('send', 'pageview');
</script>

</body>
</html>
