<!DOCTYPE html>
<html lang="da">
<head>
  <title>Filer og mapper</title>
  <link rel="icon" href="../images/favicon.png">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link href='http://fonts.googleapis.com/css?family=Ubuntu+Mono|Ubuntu|Ubuntu+Condensed' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/bootstrap.min.css">
  <link rel="stylesheet" href="../css/jquery-ui.min.css">
  <link rel="stylesheet" href="../css/jquery.tocify.css">
  <link rel="stylesheet" href="../css/style_new.css" />
<!-- Scripts in bottom to speed up pageload-->
 

</head>
<body>
	
	
<div class="container-fluid">

<div class="row-fluid">
	
<div class="col-xs-3">
	
	<nav>
		
		<div id="toc">
		
			<div id="toc_headline"></div>
		
		</div>
		
	</nav>

</div><!-- Start slut 1. kolonne - TOC -->
	
<div class="col-xs-9">
	
<h1>Terminalen: Filer og mapper</h1>

<div class="alert">
	<p>Denne side er skrevet som en manual du kan køre igennem fra start til slut. </p>
</div>

<p>Terminalen bruger vi til at udføre grundlæggende systemarbejde med filer. Det kan være at:</p>

<ul class="disc">
	<li>Navigation</li>
	<li>Oprette og slette</li>
	<li>Flytte og kopiere</li>
	<li>Hente</li>
	<li>finde</li>
	<li>Se og redigere rettigheder</li>
	<li>Se og redigere indhold</li>
	<li>pipes og redirect</li>
	<li>Pakning af filer</li>
	<li>genstarte og slukke</li>
</ul>

<h2>Grundlæggende terminal brug</h2>

<dl class="">
	<dt>cd</dt>
	<dd>Skift mappe</dd>
	<dt>pwd</dt>
	<dd>Viser det bibliotek man står i</dd>	
	<dt>clear</dt>
	<dd>Renser kommandovinduet</dd>
	<dt>ls</dt>
	<dd>Viser indholdet af mappen</dd>
	<dt>tree</dt>
	<dd>se træstruktur</dd>
	<dt>Piping</dt>
	<dd>Overførsel output til anden kommando</dd>


</dl>

<h3>cd og pwd</h3>

<p>Når vi åbner en terminal står du i din personlige mappe. Den ligger i <em>/home/*BRUGERNAVN*</em>.</p>

<p>Det kan vi se når vi kigger på kommandolinien</p>

<samp><span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~</span>$ </samp>

<p>Tegnet <em>~</em> (kaldes en tilde) viser at vi står i vores egen mappe</p>

<p>Lad os se hvor vi står. Det bruger vi <em>pwd</em> til.</p>

<pre><code>pwd</code></pre>

<samp>/home/tj</samp>

<p>Vi vil gerne flytte os til mappen med indstillinger. Den hedder <em>/etc/apt</em></p>

<pre><code>cd /etc/apt</code></pre>

<samp><span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">/etc/apt</span>$ </samp>

<p>Nu kan vi se at <em>~</em> har ændret sig til <em>/etc/apt</em></p>

<p>Vi flytter os lige tilbage til vores egen mappe:</p>

<pre><code>cd ~</code></pre>

<samp><span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~</span>$ </samp>

<dl class="">
	<dt>cd /etc/apt</dt>
	<dd>Skift til mappen <em>/etc/apt</em></dd>
	<dt>cd /</dt>
	<dd>Skift til roden af filstrukturen</dd>
	<dt>cd ..</dt>
	<dd>Gå et mappeniveau ned</dd>
	<dt>cd ~</dt>
	<dd>Skift til din hjemmemappe</dd>
</dl>


<h3>clear</h3>

<p>Bliver terminalvinduet for rodet kan man rense det med kommandoen <em>clear</em></p>

<pre><code>clear</code></pre>

<h3>ls</h3>

<p>Lad os se på indholdet i en mappe. Her vil vi kigge på mappen vi lige besøgte: <em>/etc/apt</em></p>

<pre><code>ls /etc/apt</code></pre>

<samp><span class="terminal_tilde">apt.conf.d   preferences.d</span>  sources.list.curtin.old  <span class="terminal_tilde">trusted.gpg.d
auth.conf.d</span>   sources.list   <span class="terminal_tilde">sources.list.d</span></samp>

<p>De blå filer er mapper og de hvide er almindelige filer.</p>

<div class="alert">
	<p>Læg mærke til at vi kigger på filerne i en anden mappe end den vi står i.</p>
	
	<p>Der er ingen grund til at navigere til den mappe man vil se eller gøre noget i.</p>
</div>

<p>Vi vil gerne have flere deltaljer om den mappe vi kigger i, så vi bruger ls med optionen <em>-ls</em></p>

<pre><code>ls -al /etc/apt</code></pre>

<samp>total 36
drwxr-xr-x  7 root root 4096 Dec 14 09:02 <span class="terminal_tilde">.</span>
drwxr-xr-x 94 root root 4096 Dec 17 09:51 <span class="terminal_tilde">..</span>
drwxr-xr-x  2 root root 4096 Dec 14 10:00 <span class="terminal_tilde">apt.conf.d</span>
drwxr-xr-x  2 root root 4096 Apr  9  2020 <span class="terminal_tilde">auth.conf.d</span>
drwxr-xr-x  2 root root 4096 Apr  9  2020 <span class="terminal_tilde">preferences.d</span>
-rw-r--r--  1 root root 2777 Dec 14 09:02 sources.list
-rw-r--r--  1 root root 2743 Jul 31 16:30 sources.list.curtin.old
drwxr-xr-x  2 root root 4096 Apr  9  2020 <span class="terminal_tilde">sources.list.d</span>
drwxr-xr-x  2 root root 4096 Jul 31 16:28 <span class="terminal_tilde">trusted.gpg.d</span>
</samp>

<p>Dette er den udskrift du vil komme til at bruge oftest, da den giver dig information om filtype, rettigheder og ejerskab </p>

<p>Læg mærke til at der som første tegn er et <em>d</em> ved dokumenter og en <em>-</em> ved filerne. Så kan alle se hvad det er ;).</p>

<p>En smart ting som bliver gennemgået senere er at man kan <em>pipe</em> (en lodret streg)det og søge ud i resultaterne. Lad os sige vi kun vil have vist filer og mapper hvor ordet <em>sources</em> indgår.</p>

<pre><code>ls -al /etc/apt | grep sources</code></pre>

<samp>-rw-r--r--  1 root root 2777 Dec 14 09:02 <span class="red">sources</span>.list
-rw-r--r--  1 root root 2743 Jul 31 16:30 <span class="red">sources</span>.list.curtin.old
drwxr-xr-x  2 root root 4096 Apr  9  2020 <span class="red">sources</span>.list.d
</samp>

<p>Så kan man designe sin visning til nøjagtigt det man leder efter.</p>

<p><strong>Eksempler</strong></p>

<dl class="">
	<dt>li</dt>
	<dd>Viser filer og mappenavne</dd>
	<dt>ls -l</dt>
	<dd>Udvidet visning (rettigheder, ejerskab, størrelse og dato)</dd>
	<dt>ls -al</dt>
	<dd>Udvidet visning med skulte filer/mapper</dd>
	<dt>ls -al /etc/log</dt>
	<dd>Udvidet visning af <em>/etc/log</em></dd>
	<dt>ls -d</dt>
	<dd>viser kun filer</dd>
	<dt>ls -d .*</dt>
	<dd>viser kun skjulte</dd>
	<dt>ls -d */</dt>
	<dd>viser kun skjulte mapper</dd>
</dl>

<h3>tree</h3>

<p>En anden måde at få overblik er ved hjælp af <em>tree</em>. <em>tree</em> skal først installeres. <em>tree</em> bliver gennemgået senere.</p>

<pre><code>sudo apt install tree -y</code></pre>

<p>Lad os kigge på <em>/etc/apt</em> med tree</p>

<pre><code>tree /etc/apt</code></pre>

<samp><span class="terminal_tilde">/etc/apt</span>
├── <span class="terminal_tilde">apt.conf.d</span>
│   ├── 01autoremove
│   ├── 01autoremove-kernels
│   ├── 01-vendor-ubuntu
│   ├── 10periodic
│   ├── 15update-stamp
│   ├── 20archive
│   ├── 20auto-upgrades
│   ├── 20packagekit
│   ├── 20snapd.conf
│   ├── 50command-not-found
│   ├── 50unattended-upgrades
│   ├── 70debconf
│   └── 99update-notifier
├── <span class="terminal_tilde">auth.conf.d</span>
├── <span class="terminal_tilde">preferences.d</span>
├── sources.list
├── sources.list.curtin.old
├── <span class="terminal_tilde">sources.list.d</span>
└── <span class="terminal_tilde">trusted.gpg.d</span>
    ├── ubuntu-keyring-2012-archive.gpg
    ├── ubuntu-keyring-2012-cdimage.gpg
    └── ubuntu-keyring-2018-archive.gpg

5 directories, 18 files</samp>

<p>Her får vi en visning med træstruktur.</p>

<p>Vil vi kun have mapper sætter vi <em>-d</em> på.</p>

<pre><code>tree -d /etc/apt</code></pre>

<samp><span class="terminal_tilde">/etc/apt</span>
├── <span class="terminal_tilde">apt.conf.d</span>
├── <span class="terminal_tilde">auth.conf.d</span>
├── <span class="terminal_tilde">preferences.d</span>
├── <span class="terminal_tilde">sources.list.d</span>
└── <span class="terminal_tilde">trusted.gpg.d</span></samp>

<p>Et sidste eksempel er at begrænse visningen kun til undermapper.</p>

<pre><code>tree -d /usr -L 1</code></pre>

<samp><span class="terminal_tilde">/usr</span>
├── <span class="terminal_tilde">bin</span>
├── <span class="terminal_tilde">games</span>
├── <span class="terminal_tilde">include</span>
├── <span class="terminal_tilde">lib</span>
├── <span class="terminal_tilde">lib32</span>
├── <span class="terminal_tilde">lib64</span>
├── <span class="terminal_tilde">libexec</span>
├── <span class="terminal_tilde">libx32</span>
├── <span class="terminal_tilde">local</span>
├── <span class="terminal_tilde">sbin</span>
├── <span class="terminal_tilde">share</span>
└── <span class="terminal_tilde">share</span></samp>

<p>Effekten kan du se ved at køre kommandoen med <em>-L 2</em>.</p>

<details>

	<summary>Avancerede visninger</summary>

	<p>Visning med fulde stier:</p>

<pre><code>tree -fid /etc/apt</code></pre>

<samp><span class="terminal_tilde">/etc/apt</span>
<span class="terminal_tilde">/etc/apt/apt.conf.d</span>
<span class="terminal_tilde">/etc/apt/auth.conf.d</span>
<span class="terminal_tilde">/etc/apt/preferences.d</span>
<span class="terminal_tilde">/etc/apt/sources.list.d</span>
<span class="terminal_tilde">/etc/apt/trusted.gpg.d</span></samp>

<p>Visning med rettigheder, bruger og gruppe.</p>

<pre><code>tree -fidpug /etc/apt</code></pre>

<samp><span class="terminal_tilde">/etc/apt</span>
[drwxr-xr-x root     root    ]  <span class="terminal_tilde">/etc/apt/apt.conf.d</span>
[drwxr-xr-x root     root    ]  <span class="terminal_tilde">/etc/apt/auth.conf.d</span>
[drwxr-xr-x root     root    ]  <span class="terminal_tilde">/etc/apt/preferences.d</span>
[drwxr-xr-x root     root    ]  <span class="terminal_tilde">/etc/apt/sources.list.d</span>
[drwxr-xr-x root     root    ]  <span class="terminal_tilde">/etc/apt/trusted.gpg.d</span></samp>
</details>

<p>læs mere om tree: <a href="http://manpages.ubuntu.com/manpages/focal/en/man1/tree.1.html" target="_blank">http://manpages.ubuntu.com/manpages/focal/en/man1/tree.1.html</a></p>

<p><strong>Eksempler</strong></p>

<dl class="">
	<dt>tree</dt>
	<dd>Viser filer og mapper i træstruktur</dd>
	<dt>tree /usr</dt>
	<dd>Viser filerne i mappen <em>/usr</em></dd>
	<dt>tree /usr -d</dt>
	<dd>Viser kun mapper i <em>/usr</em></dd>
	<dt>tree /usr -d -L 1</dt>
	<dd>Viser kun mapper i <em>/usr</em> i et niveau</dd>
	<dt>tree /usr -du -L 1</dt>
	<dd>Viser kun mapper i <em>/usr</em> i et niveau med ejerskab</dd>
	<dt>tree /usr -du -L 1</dt>
	<dd>Viser kun mapper i <em>/usr</em> i et niveau med filstørrelse</dd>
	<dt>tree /usr -dirsfirst -L 1</dt>
	<dd>Viser alle filer i <em>/usr</em> med mapperne først</dd>
	<dt>tree /usr -pua -dirsfirst</dt>
	<dd>viser filerne med rettigheder og ejer ... og sætter mapperne først</dd>
</dl>



<h3>Piping</h3>

<p><em>Piping</em> er en metode der oftes anvendes i terminalen. Ved hjælp af piping kan vi overføre output en kommando til en anden kommando. Det skrives på følgende måde:</p>

<pre><code>Kommando_1 | Kommando_2</code></pre>

<p>Output fra <em>Kommando_1</em> bliver brugt som input i <em>Kommando_2</em>.</p>

<p>Lad os se på eksemplet ovenfor</p>

<pre><code>ls -al /etc/apt | grep sources</code></pre>

<p><strong>Kommando 1 siger</strong>: vis en liste over alle filer i <em>/etc/apt</em></p>

<samp>total 36
drwxr-xr-x  7 root root 4096 Dec 14 09:02 .
drwxr-xr-x 94 root root 4096 Dec 17 09:51 ..
drwxr-xr-x  2 root root 4096 Dec 14 10:00 apt.conf.d
drwxr-xr-x  2 root root 4096 Apr  9  2020 auth.conf.d
drwxr-xr-x  2 root root 4096 Apr  9  2020 preferences.d
-rw-r--r--  1 root root 2777 Dec 14 09:02 sources.list
-rw-r--r--  1 root root 2743 Jul 31 16:30 sources.list.curtin.old
drwxr-xr-x  2 root root 4096 Apr  9  2020 sources.list.d
drwxr-xr-x  2 root root 4096 Jul 31 16:28 trusted.gpg.d</samp>

<p>Dette bliver overført til kommando 2</p>

<p><strong>Kommando 2 siger</strong>: vælg alle linier hvor tekststrengen <em>sources</em> står</p>

<samp>-rw-r--r--  1 root root 2777 Dec 14 09:02 <span class="red">sources</span>.list
-rw-r--r--  1 root root 2743 Jul 31 16:30 <span class="red">sources</span>.list.curtin.old
drwxr-xr-x  2 root root 4096 Apr  9  2020 <span class="red">sources</span>.list.d</samp>

<h4>Piping i flere niveauer</h4>

<p>Man kan gøre det i flere niveauer.</p>

<pre><code>Kommando_1 | Kommando_2 | Kommando_3 | ... | Kommando_N</code></pre>

<p>Vi tager eksemplet ovenfor, hvor vi kun vil have dem hvor der står <em>.old</em> ved. Den fulde kommando vil være:</p>

<pre><code>ls -al /etc/apt | grep sources | grep .old</code></pre>

<samp>-rw-r--r--  1 root root 2743 Jul 31 16:30 sources.list.curtin<span class="red">.old</span></samp>

<h2>Oprette og slette</h2>

<dl class="">
	<dt>mkdir</dt>
	<dd>Opretter mapper</dd>
	<dt>touch</dt>
	<dd>Opretter filer og opdaterer tidsstempel på allerede eksisterende filer og mapper</dd>
	<dt>rm</dt>
	<dd>Sletter mapper og filer</dd>
</dl>

<h3>mkdir</h3>

<p><em>Opretter mapper</em></p>

<p>Til at oprette mapper bruges kommandoen <em>mkdir</em>.</p>

<p>Vi starter med at oprette en øvemappe i vores egen mappe. den ligger i <em>/home/*brugernavn*</em>, men kan også tilgås med <em>~</em>.</p>

<p>Her opretter vi en mappe til at lave vores øvelser i. Vi opretter den med den fulde sti, og flytter os op i mappen:</p>

<pre><code>mkdir ~/øvelser</code></pre>

<pre><code>cd ~/øvelser</code></pre>

<samp><span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~/øvelser</span>$ </samp>

<div class="alert">
	<p>Alle eksemplerne her bliver installeret i mappen <em>~/øvelser</em>. Derfor er der ikke en fuld sti på mappenavnene.</p>
</div>

<h4>Enkelt mappe</h4>

<p>Her opretter vi <em>mappe1</em>.</p>

<pre><code>mkdir mappe1</code></pre>

<pre><code>tree -d</code></pre>

<samp><span class="terminal_tilde">.</span>
└── <span class="terminal_tilde">mappe1</span>

1 directory
</samp>

<h4>Flere mapper på en gang</h4>

<p>Her opretter vi to mapper på en gang (<em>mappe2</em> og <em>mappe3</em>).</p>

<pre><code>mkdir mappe2 mappe3</code></pre>

<pre><code>tree -d</code></pre>

<samp><span class="terminal_tilde">.</span>
├── <span class="terminal_tilde">mappe1</span>
├── <span class="terminal_tilde">mappe2</span>
└── <span class="terminal_tilde">mappe3</span>

3 directory
</samp>

<h4>Med undermapper</h4>

<p>Her opretter vi vi en hel struktur: <em>mappe4/um1/uum1</em></p>

<p>Læg mærke til at jeg tilføjer <em>-p</em>, for at kunne oprette mapper i flere niveauer</p>

<pre><code>mkdir -p mappe4/um1/uum1</code></pre>

<samp><span class="terminal_tilde">.</span>
├── <span class="terminal_tilde">mappe1</span>
├── <span class="terminal_tilde">mappe2</span>
├── <span class="terminal_tilde">mappe3</span>
└── <span class="terminal_tilde">mappe4</span>
    └── <span class="terminal_tilde">um1</span>
        └── <span class="terminal_tilde">uum1</span>

7 directories
</samp>

<details>

	<summary>Avanceret anvendelse</summary>

<p><strong>Med flere undermapper</strong></p>

<p>Her opretter vi <em>mappe5</em>, med flere undermapperne i samme niveau<em>um1</em>, <em>um2</em>,<em>um3</em>.</p>

<pre><code>mkdir -p mappe5/{um1,um2,um3}</code></pre>

<samp><span class="terminal_tilde">.</span>
├── <span class="terminal_tilde">mappe1</span>
├── <span class="terminal_tilde">mappe2</span>
├── <span class="terminal_tilde">mappe3</span>
├── <span class="terminal_tilde">mappe4</span>
│    └── <span class="terminal_tilde">um1</span>
│        └── <span class="terminal_tilde">uum1</span>
└── <span class="terminal_tilde">mappe5</span>
    ├── <span class="terminal_tilde">um1</span>
    ├── <span class="terminal_tilde">um2</span>
    └── <span class="terminal_tilde">um3</span></samp>

     
<p><strong>Med flere undermapper</strong></p>

<p>Her opretter vi <em>mappe5</em>, med flere undermapperne i samme niveau<em>um1</em>, <em>um2</em>,<em>um3</em>.</p>

<pre><code>mkdir -p mappe6/{um1,um2,um3}/{uum1,uum2,uum3}</code></pre>

<samp><span class="terminal_tilde">.</span>
├── <span class="terminal_tilde">mappe1</span>
├── <span class="terminal_tilde">mappe2</span>
├── <span class="terminal_tilde">mappe3</span>
├── <span class="terminal_tilde">mappe4</span>
│    └── <span class="terminal_tilde">um1</span>
│        └── <span class="terminal_tilde">uum1</span>
├── <span class="terminal_tilde">mappe5</span>
│   ├── <span class="terminal_tilde">um1</span>
│   ├── <span class="terminal_tilde">um2</span>
│   └── <span class="terminal_tilde">um3</span>
└── <span class="terminal_tilde">mappe6</span>
    ├── <span class="terminal_tilde">um1</span>
    │   ├── <span class="terminal_tilde">uum1</span>
    │   ├── <span class="terminal_tilde">uum2</span>
    │   └── <span class="terminal_tilde">uum3</span>
    ├── <span class="terminal_tilde">um2</span>
    │   ├── <span class="terminal_tilde">uum1</span>
    │   ├── <span class="terminal_tilde">uum2</span>
    │   └── <span class="terminal_tilde">uum3</span>
    └── <span class="terminal_tilde">um3</span>
        ├── <span class="terminal_tilde">uum1</span>
        ├── <span class="terminal_tilde">uum2</span>
        └── <span class="terminal_tilde">uum3</span></samp>
</details>

<h3>touch</h3>

<p><em>Opretter filer og opdaterer tidsstempel på allerede eksisterende filer og mapper</em></p>

<p><em>touch</em> anvendes til 2 ting: </p>

<ul class="disc">
	<li>Oprette nye filer</li>
	<li>Forny tidsstempel på eksisterende filer</li>
</ul>

<p>Her opretter vi filen <em>testfil</em> i vores personlige mappe. <em>~</em> er en smart måde at fortælle, at vi bruger <em>/home/*brugernavn*</em></p>

<pre><code>touch ~/testfil1</code></pre>

<p>Vi kigger på file vi lige har oprettet</p>

<pre><code>ls -al testfil1 | grep testfil</code></pre>

<samp>-rw-rw-r-- 1 tj tj    0 Dec 18 14:03 <span class="red">testfil</span>1</samp>

<p>Man kan også oprette en række af filer på en gang:</p>

<pre><code>touch testfil2 testfil3</code></pre>

<p>Vi kigger.</p>

<pre><code>ls -al testfil1 | grep testfil</code></pre>

<samp>-rw-rw-r-- 1 tj tj    0 Dec 18 14:03 <span class="red">testfil</span>1
-rw-rw-r-- 1 tj tj    0 Dec 18 14:10 <span class="red">testfil</span>2
-rw-rw-r-- 1 tj tj    0 Dec 18 14:10 <span class="red">testfil</span>3</samp>

<p>Som vi kan se har filerne forskellige tidsstempler. Vi vil gerne have at de alle bliver opdatere til nu.</p>

<pre><code>touch testfil*</code></pre>

<p>Vi kigger.</p>

<pre><code>ls -al testfil1 | grep testfil</code></pre>

<samp>-rw-rw-r-- 1 tj tj    0 Dec 18 14:16 <span class="red">testfil</span>1
-rw-rw-r-- 1 tj tj    0 Dec 18 14:16 <span class="red">testfil</span>2
-rw-rw-r-- 1 tj tj    0 Dec 18 14:16 <span class="red">testfil</span>3</samp>

<h3>rm</h3>

<p><em>Sletter filer og mapper</em></p>

<div class="alert">
	<p>Nar man sletter filer og mapper med kommandolinien, så bliver de slettet for alvor. Dvs. man kan ikke hente dem i en skraldespand. Filerne er væk.</p>
	
	<p>Så kontroller at du sletter de rigtige filer.</p>
</div>

<p>Lad os slette <em>testfil3</em></p>

<pre><code>rm testfil3</code></pre>

<p>Vi kigger.</p>

<pre><code>ls -al testfil1 | grep testfil</code></pre>

<samp>-rw-rw-r-- 1 tj tj    0 Dec 18 14:16 <span class="red">testfil</span>1
-rw-rw-r-- 1 tj tj    0 Dec 18 14:16 <span class="red">testfil</span>2</samp>

<p>Vi kan slette flere filer på engang ved at bruge samme fremgangsmåde som ovenfor:</p>

<pre><code>rm testfil2 testfil3</code></pre>

<p>Vi kigger.</p>

<pre><code>ls -al testfil1 | grep testfil</code></pre>

<samp></samp>

<p>Vi kan også slette ved hjælp af at bruge <em>*</em> (asterisk).</p>

<p>Vi starter med at oprette 3 filer igen:</p>

<pre><code>touch testfil1 testfil2 testfil3</code></pre>

<p>Vi kigger.</p>

<pre><code>ls -al testfil1 | grep testfil</code></pre>

<samp>-rw-rw-r-- 1 tj tj    0 Dec 18 14:52 <span class="red">testfil</span>1
-rw-rw-r-- 1 tj tj    0 Dec 18 14:52 <span class="red">testfil</span>2
-rw-rw-r-- 1 tj tj    0 Dec 18 14:52 <span class="red">testfil</span>3</samp>

<p>For at slette alle laver vi følgende kommando</p>

<pre><code>rm test*</code></pre>

<p>Den kommando sletter alle filer der starter med <em>test</em>. Tjek selv efter.</p>

<h4>Sletning af mapper</h4>

<p>For at slette mapper skal man tilføje <em>-R</em>. Når man sletter en mappe, så skal alt indholdet også slettes. Derfor skal det gøres recursivt (<em>-R</em>).</p>

<p>Lad os slette <em>mappe6</em></p>

<pre><code>rm -R mappe6</code></pre>

<p>Lad os slette <em>mappe3</em> til <em>mappe5</em></p>

<pre><code>rm -R mappe[3-6]</code></pre>

<p>For at slutte af sletter vi øvelsesmappen</p>

<pre><code>rm -R ~/øvelser</code></pre>

<p>Nu sker der noget underligt ... vi står i en slettet mappe:</p>

<samp><span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~/øvelser</span>$ rm -R ~/øvelser
<span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~/øvelser</span>$ </samp>

<p>Så vi skifter tilbage til vores hjemmemappe</p>

<pre><code>cd ~</code></pre>

<h4>Vær forsigtig</h4>

<p>Som skrevet ovenfor, så sletter rm alt. Hvis man nu kommer at skrive:</p>

<pre><code>sudo rm -R /</code></pre>

<p>... så beder man faktisk <em>rm</em> om at slette hele harddisken</p>

<samp><span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~</span>$ sudo rm -R / 
[sudo] password for tj: 
rm: it is dangerous to operate recursively on '/'
rm: use --no-preserve-root to override this failsafe</samp>

<p>Heldigvis er systemet sat på så det forhindrer det ... men det betyder ikke at du ikke kan komme til at slette andre vitale dele af systemet med <em>rm</em>.</p>

<p>Brug <em>rm</em> med omtanke.</p>

<h2>Flytte og kopiere</h2>

<dl class="">
	<dt>cp</dt>
	<dd>Kopierer filer og mapper</dd>
	<dt>mv</dt>
	<dd>Flytter filer og mapper</dd>
</dl>

<h3>cp</h3>

<p><em>Kopiere filer og mapper</em></p>

<p>Først opretter vi en øvelsesmappe med en undermappe og en fil, for til sidst at navigere over til den.</p>

<pre><code>mkdir -p øvelse2/mappe1</code></pre>

<pre><code>touch ~/øvelse2/fil1</code></pre>

<pre><code>ls -al ~/øvelse2</code></pre>

<pre><code>cd øvelse2</code></pre>

<p>Vi tjekker mappen</p>

<pre><code>tree</code></pre>

<samp><span class="terminal_tilde">.</span>
├── fil1
└── <span class="terminal_tilde">mappe1</span>

1 directory, 1 file
</samp>

<p>Herunder laver vi følgende:</p>

<ul class="disc">
	<li>Vi kopierer <em>fil1</em> til <em>fil2</em></li>
	<li>Vi laver en kopi af <em>fil1</em> i mappen <em>mappe1</em></li>
	<li>vi laver en kopi af <em>mappe1</em> til <em>mappe2</em></li>
</ul>


<pre><code>cp fil1 fil2</code></pre>

<pre><code>cp fil1 mappe1</code></pre>

<pre><code>cp -R mappe1 mappe2</code></pre>

<p>Vi ser på resultatet</p>

<pre><code>tree</code></pre>

<samp><span class="terminal_tilde">.</span>
├── fil1
├── fil2
├── <span class="terminal_tilde">mappe1</span>
│   └── fil1
└── <span class="terminal_tilde">mappe2</span>
    └── fil1

2 directories, 4 files</samp>

<h4>backup af systemfiler</h4>

<p>Når man arbejder med systemfiler, så er det normalt, at man tager en backup af filen før man laver ændringer. På den måde kan man altid komme tilbage til en oprindelig opsætning.</p>

<p>Man plejer at gøre det ved at kopiere filen og sætte <em>.backup</em> bagpå -evt. med dato.</p>

<p>Så hvis vil skulle lave ændringer i fil1 ville vi først gøre følgende:</p>

<pre><code>cp fil1 fil1.backup</code></pre>


<h3>mv</h3>

<p><em>Bruges til at flytte eller ændre navn på filer og mapper</em></p>

<p>Herunder laver vi følgende</p>

<ul class="disc">
	<li>Vi flytter <em>fil2</em> til <em>fil3</em></li>
	<li>Vi flytter <em>mappe2</em> til <em>mappe3</em></li>
</ul>

<pre><code>mv fil2 fil3</code></pre>

<pre><code>mv mappe2 mappe3</code></pre>trte

<p>Vi ser på resultatet</p>

<pre><code>tree</code></pre>

<samp><span class="terminal_tilde">.</span>
├── fil1
├── fil3
├── <span class="terminal_tilde">mappe1</span>
│   └── fil1
└── <span class="terminal_tilde">mappe3</span>
    └── fil1

2 directories, 4 files
</samp>

<h2>Filstørrelse</h2>

<dl class="">
	<dt>du</dt>
	<dd>Viser mappestørrelsen</dd>
	<dt>dd</dt>
	<dd>Viser plads på filsystemet</dd>
</dl>


<h3>du</h3>

<p><em>du</em> bruges til at vise størrelsen på mapper.</p>

<p>Her undersøger vi <em>/etc/apt</em></p>

<pre><code>du -h /etc/apt</code></pre>

<samp>4.0K	/etc/apt/sources.list.d
60K	/etc/apt/apt.conf.d
4.0K	/etc/apt/preferences.d
4.0K	/etc/apt/auth.conf.d
16K	/etc/apt/trusted.gpg.d
100K	/etc/apt</samp>

<p>For at se alle filer og det samlede pladsforbrug anvendes <em>-ch</em></p>

<pre><code>du -ch /etc/apt</code></pre>

<samp>4.0K	/etc/apt/sources.list.d
60K	/etc/apt/apt.conf.d
4.0K	/etc/apt/preferences.d
4.0K	/etc/apt/auth.conf.d
16K	/etc/apt/trusted.gpg.d
100K	/etc/apt
100K	total</samp>

<p>For kun at se mappens størrelsen bruger vi <em>-hs</em></p>

<pre><code>du -hs /etc/apt</code></pre>

<samp>100K	/etc/apt</samp>

<h3>df</h3>

<p><em>df</em> bruges for at se den brugte plads på partitioner.</p>

<pre><code>df -h /dev/sda</code></pre>

<samp>Filesystem      Size  Used Avail Use% Mounted on
udev            952M     0  952M   0% /dev</samp>

<p><em>-ht ext4</em> giver et komplet overblik over alle partitioner med filsystemet <em>ext4</em>.</p>

<pre><code>df -ht ext4</code></pre>

<samp>Filesystem                         Size  Used Avail Use% Mounted on
/dev/mapper/ubuntu--vg-ubuntu--lv   30G  4.9G   24G  18% /
/dev/sda2                          976M  104M  806M  12% /boot
/dev/sdb2                           69G   53M   66G   1% /srv/data
/dev/sdb1                           30G   45M   28G   1% /srv/backup
</samp>


<dl class="">
	<dt>df -h</dt>
	<dd>Viser brugt plads på alle monterede partitioner</dd>
	<dt>df -h /</dt>
	<dd>Viser brugt plads på <em>/</em></dd>
	<dt>df -h -t ext4</dt>
	<dd>Viser informationer om partitioner der er formateret med ext4</dd>
	<dt>df -ht</dt>
	<dd>Viser alle blok enheder</dd>
	<dt>df -hT</dt>
	<dd>Viser alle blok enheder + deres filsystem</dd>
</dl>


<h2>Hente</h2>

<dl class="">
	<dt>wget</dt>
	<dd>Henter filer fra Internetet</dd>

</dl>

<h3>wget</h3>

<p><em>Henter filer på Internettet</em></p>

<p>Der ligger en fil på min hjemmeside med følgende adresse.</p>

<p><em>http://www.vidas.dk/guides/files/wget_testfil</em></p>

<p>Vi vil nu hente den ned i øvelsesmappen, som vi står i.</p>

<pre><code>wget -c http://www.vidas.dk/guides/files/wget_testfil</code></pre>

<samp>--2020-12-18 16:07:08--  http://www.vidas.dk/guides/files/wget_testfil
Resolving www.vidas.dk (www.vidas.dk)... 185.199.110.153, 185.199.108.153, 185.199.111.153, ...
Connecting to www.vidas.dk (www.vidas.dk)|185.199.110.153|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 63 [application/octet-stream]
Saving to: ‘wget_testfil’

wget_testfil        100%[===================>]      63  --.-KB/s    in 0s      

2020-12-18 16:07:08 (2.81 MB/s) - ‘wget_testfil’ saved [63/63]</samp>



<p><em>-c</em> sikrer, at filhentningen kan genoptages hvis der bliver afbrudt.</p>

<p><strong>Overblik</strong></p>

<dl class="">
	<dt>wget -c *filadresse*</dt>
	<dd>Henter filen, med mulighed for at genstarter hentningen.</dd>
	<dt>wget -P ~/*mappe* *filadresse*</dt>
	<dd>Henter filen, men gemmer den i mappen ~/*mappe*</dd>
	<dt>wget -o ~/*hentetfil* *filadresse*</dt>
	<dd>Henter filen, men gemmer den som "hentetfil*</dd>
	<dt>wget -b *filadresse*</dt>
	<dd>Henter filen i baggrunden - frigiver kommandolinien med det samme.</dd>
</dl>

<p>Optionerne kan stackes. På den måde vil <em>wget -cob minfil *filadresse*</em> hente i baggrunden, gemme den som <em>minfil</em> og sikre at download kan genoptages ved afbrydelse.</p>

<p>man-page wget: 
	<a href="http://manpages.ubuntu.com/manpages/focal/man1/wget.1.html" target="_blank">
	http://manpages.ubuntu.com/manpages/focal/man1/wget.1.html</a></p>

<h2>Finde</h2>

<dl class="">
	<dt>find</dt>
	<dd>Finder filer og mapper</dd>
	<dt>grep</dt>
	<dd>finde tekstrenge i filer</dd>
</dl>

<h3>find</h3>

<p><em>find</em> bruges til at finde filer</p>

<p>Lad finde filer med navnet <em>fstab</em>, på computeren. Vi skal bruge <em>sudo</em>, så vi kan nå alle steder hen</p>

<pre><code>sudo find / -type f -name fstab</code></pre>

<samp>/usr/share/doc/util-linux/examples/fstab
/etc/fstab
/snap/core/10577/etc/fstab
/snap/core/10444/etc/fstab
/snap/core18/1932/etc/fstab
/snap/core18/1944/etc/fstab</samp>

<p><strong>Overblik</strong></p>

<dl class="">
	<dt>find / -type f -name fstab</dt>
	<dd>Finder alle filer der hedder fstab</dd>	
	<dt>find . -type d -name apt</dt>
	<dd>Finder alle mapper der hedder noget med apt i den mappe du står i.</dd>
	<dt>find . -type f -perm /a=x</dt>
	<dd>Finder alle filer der kan køres som programmer i den mappe du står i</dd>
	<dt>find . -type d -empty</dt>
	<dd>Finder alle tomme mapper i den mappe du står i.</dd>
</dl>

<h4>Avanceret brug</h4>

<p>Kommandoen kan også bruges til at udføre kommandoer filer der findes.</p>

<p>Her er et eksempel hvor alle filer med endelsen <em>.log</em> får opdateret deres tidsstempel.</p>

<pre><code>find . -type f -name "*.log" -exec touch {} \;</code></pre>


<p>man-page more: 
	<a href="http://manpages.ubuntu.com/manpages/focal/en/man1/find.1.html" target="_blank">
	http://manpages.ubuntu.com/manpages/focal/en/man1/find.1.html</a></p>
	

<h3>grep</h3>

<p>Anvendes til at finde tekststrenge i en fil.</p>

<pre><code>grep backup /etc/passwd</code></pre>

<samp><span class="red">backup</span>:x:34:34:<span class="red">backup</span>:/var/<span class="red">backup</span>s:/usr/sbin/nologin</samp>

<p>Du kan også søge på mere end en tekststreng.</p>

<pre><code>grep "*TEKSTSTRENG1* \| *TEKSTSTRENG2*"</code></pre>

<p>Her vil jeg f.eks. finde både <em>backup</em> og <em>tj</em></p>

<pre><code>grep "backup\|tj" /etc/passwd</code></pre>

<div class="alert">
	<p>Der må ikke være mellemrum mellem i <em>backup\|tj</em></p>
</div>

<p>man-page grep: 
	<a href="http://manpages.ubuntu.com/manpages/focal/man1/grep.1.html" target="_blank">
	http://manpages.ubuntu.com/manpages/focal/man1/grep.1.html</a></p>

<h2>Se og redigere rettigheder</h2>

<dl class="">
	<dt>chown</dt>
	<dd>Ændrer ejerskab på grupper</dd>
	<dt>chmod</dt>
	<dd>Ændret rettigheder på filer og mapper</dd>
</dl>

<h3>chown - change owner</h3>

<p><em>chown</em> bruges til, at ændre ejer og gruppe på en fil eller en mappe.</p>

<p>Det er kun root der kan ændre ejerskab på filer.</p>

<p><strong>Ændring af ejerskab</strong></p>

<p>Her ændres ejeren af <em>~/testfil</em> til brugeren <em>tj</em>.</p>

<pre><code>sudo chown tj ~/testfil</code></pre>

<p><strong>Ændring af ejerskab og gruppe</strong></p>

<p>Herunder ændres filen til at have ejeren og gruppen tj</p>

<pre><code>sudo chown tj:tj ~/testfil</code></pre>

<p>Man kan også anvende følgende "shorthand"</p>

<pre><code>sudo chown tj: ~/testfil</code></pre>

<p>Ved at sætte et kolon, så antager <em>chown</em>, at gruppen er den samme.</p>

<p><strong>Ændring af ejerskab på mapper og undermapper</strong></p>

<p>Skal man ændre rettigheder på alle filer i en mappe anvender man <code class="bash">-R</code> (recursive). Nedestående kommando ændrer ejerskab på alle filer i mappen <em>/data</em></p>

<pre><code>sudo chown -R tj: /data</code></pre>

<samp class=""><span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~</span>$ sudo touch testfil
[sudo] adgangskode for tj: 
<span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~</span>$ ls -al testfil
-rw-r--r-- 1 root root 0 jun  2 10:41 testfil
<span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~</span>$ udo chown tj:tj testfil
-rw-r--r-- 1 tj tj 0 jun  2 10:41 testfil</samp>

<p>man-page chown: 
<a href="http://manpages.ubuntu.com/manpages/focal/man1/chown.1.html" target="_blank">
http://manpages.ubuntu.com/manpages/focal/man1/chown.1.html</a></p>

<h3>chmod - change mode</h3>

<p><em>chmod</em> ændrer rettighederne på filen.</p>

<pre><code>chmod [-R][rettigheder] [fil/mappe]</code></pre>

<p>Skal det gælde alle undermapper indsættes <em>-R</em> (recursiv)</p>

<p>Når vi sætter rettigheder anvender vi en anden skrivemåde end <em>rwx</em>. Vi anvender binære værdier som du kan se herunder.</p>

<ul class="disc">
	<li>0 - Rettigheder: ingen (---)</li>
	<li>1 - Rettigheder: Udføre (--x)</li>
	<li>2 - Rettigheder: Skrive (-w-)</li>
	<li>3 - Rettigheder: Skrive og udføre (-wx)</li>
	<li>4 - Rettigheder: Læse (r--)</li>
	<li>5 - Rettigheder: Læse og udføre (r-x)</li>
	<li>6 - Rettigheder: Læse og skrive (rw-)</li>
	<li>7 - Rettigheder: Læse, skrive og udføre (rwx)</li>
</ul>

<p>Her kan du se beregningerne for de binære værdier: <a href="term_rettigheder_beregninger.html" target="_blank">beregninger af binære værdier.</a></p>

<p>På denne måde skal vi kun angive et tal for henholdsvis brugeren, gruppen og alle. Herunder er nogle praktiske eksempler.</p>

<dl class="">
	<dt>700</dt>
	<dd>Brugeren har alle rettigheder. Bruges f.eks. når man laver script filer og har brug for at køre dem. Ingen andre brugere kan altså se eller anvende dem.</dd>
	<dt>705</dt>
	<dd>Brugeren har alle rettigheder, og alle andre kan se og udføre dem. Bruges f.eks. til webserverens filer, da webserveren skal have fulde rettigheder, men alle andre skal kunne se og udføre filerne</dd>
	<dt>660</dt>
	<dd>Brugeren og gruppen skal kunne læse og skrive i filen, men ikke udføre den. Kan f.eks. være tekstfiler man skla kunne redigere.</dd>
</dl>

<div class="fakta">
	
	<p>Tallet <em>705</em> skal læses som <em>syv nul fem</em>, hvor det første tal sætter rettigheden for brugeren, det andet tal for gruppen og det sidste for alle.</p>
	
	<p>Uanset hvordan du sætter rettigheder og ejerskab har root-brugeren altid mulighed for at ændre disse.</p>
	
	<p>root kan give og fjerne adgang til alle filer.</p>
	
</div>

<h4>Eksempel med fil</h4>

<p>Et eksempel, hvor rettighederne sættes til at brugeren har alle rettigheder (<em>rwx</em>) og alle har ret til at læse og udføre (<span class="inl_cmd">r-w</span>) svarende til rettigheder for html-filerne på en webserver:</p>

<pre><code>chmod 705 testfil</code></pre>

<samp><span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~</span>$ ls -al | grep testfil
-rw-rw-r--  1 tj   tj       0 jun  3 17:02 testfil'
<span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~</span>$ chmod 705 testfil
<span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~</span>$ ls -al | grep testfil
-rwx---r-x  1 tj   tj       0 jun  3 17:02 <span class="red">testfil</span></samp>

<h4>Eksempel med mapper (recursiv)</h4>

<p>Dette eksempel viser hvordan man omdøber alle filer og undermapper.</p>

<pre><code>chmod -R 705 /var/www/html</code></pre>

<p><em>705</em> kombinationen er meget anvendt på systemer hvor brugeren skal have alle rettigheder, men alle skal kunne se filerne og udføre programmerne UDEN at kunne ændre på dem. F.eks. på en webserver som har filerne i mappen <em>/var/www/html</em> og dennes undermapper.</p>

<p>man-page chmod: 
<a href="http://manpages.ubuntu.com/manpages/focal/man1/chmod.1.html" target="_blank">
http://manpages.ubuntu.com/manpages/focal/man1/chmod.1.html</a></p>	

<h2>Se og redigere indhold</h2>

<dl class="">
	<dt>nano</dt>
	<dd>Redigering af filer</dd>
	<dt>cat</dt>
	<dd>Output af hele filen (sammenkædning)</dd>
	<dt>more</dt>
	<dd>Output af filen - en side af gangen</dd>
	<dt>head/tail</dt>
	<dd>Output af starten eller slutningen af filen </dd>
	<dt>sort</dt>
	<dd>sortere filen før visning</dd>
	<dt>Uniq</dt>
	<dd>Viser kun unikke linier (fjerner gentagelser)</dd>

</dl>

<h3>nano</h3>

<p>På en Linuxserver bliver alle tjenester og hardware initialiseret og konfigureret igennem tekstfiler. Derfor skal du kende nano, et effektiv terminal tekstredigeringsprogram. Programmet har også opmærkning med farver, hvis det genkender formatet. <em>nano</em> startes med kommandoen: </p>

<pre><code>nano *filnavn*</code></pre>

<p>Du navigerer i filen ved hjælp af piletasterne, og du kan bruge <kbd>Ctrl</kbd> og kd</p>

<p>Herefter bliver ændres terminalen til nedestående, hvor menuen ligger i bunden af skærmen.</p>

<samp class="terminal"><span class="white_bg">  GNU nano 2.2.6                New Buffer                                                          </span>









<span class="white_bg">^G</span> Få hjælp   <span class="white_bg">^O</span> Gem       <span class="white_bg">^W</span> Hvor er    <span class="white_bg">^K</span> Klip ud       <span class="white_bg">^J</span> Ombryd      <span class="white_bg">^C</span> Position
<span class="white_bg">^X</span> Afslut     <span class="white_bg">^R</span> Læs fil   <span class="white_bg">^\</span> Erstat     <span class="white_bg">^U</span> Indsæt tekst  <span class="white_bg">^T</span> Stavetjek   <span class="white_bg">^_</span> Til linje</samp>

<p>Du navigerer rundt i nano med piletaster ligesom i alle andre tekstbehandlingsprogrammer.</p>

<p>Herunder er de meste basale funktioner</p>

<p><em>^</em> står for <kbd>Ctrl</kbd> og <em>m-</em> for <kbd>Alt</kbd></p>

<dl class="with_keys">
	<dt><kbd>Ctrl</kbd>+<kbd>w</kbd></dt>
	<dd>find</dd>
	<dt><kbd>Ctrl</kbd>+<kbd>y</kbd></dt>
	<dd>en side op</dd>
	<dt><kbd>Ctrl</kbd>+<kbd>v</kbd></dt>
	<dd>En side ned</dd>
	<dt><kbd>Ctrl</kbd>+<kbd>w</kbd>+<kbd>v</kbd></dt>
	<dd>Til filens sidste linie</dd>
	<dt><kbd>Ctrl</kbd>+<kbd>k</kbd></dt>
	<dd>Klip</dd>
	<dt><kbd>Ctrl</kbd>+<kbd>u</kbd></dt>
	<dd>Indsæt</dd>
	<dt><kbd>Ctrl</kbd>+<kbd>x</kbd></dt>
	<dd>Afslut nano</dd>
	<dt><kbd>Alt</kbd>+<kbd>u</kbd></dt>
	<dd>Fortryd</dd>
	<dt><kbd>Alt</kbd>+<kbd>e</kbd></dt>
	<dd>Annuller fortryd</dd>
	<dt><kbd>Alt</kbd>+<kbd>a</kbd></dt>
	<dd>Marker tekst</dd>
	<dt><kbd>Alt</kbd>+<kbd>6</kbd></dt>
	<dd>kopier tekst</dd>
</dl>

<p>Når du har redigeret din tekst færdig afslutter du med <kbd>Ctrl</kbd>+<kbd>x</kbd>, hvorefter nano i bunden svarer:</p>

<samp class="terminal">
<span class="white_bg">Gem ændret buffer (AT SVARE "Nej" VIL ØDELÆGGE ÆNDRINGER)?                                          </span>                    
<span class="white_bg"> J</span> Ja
<span class="white_bg"> N</span> Nej          <span class="white_bg">^C</span> Annullér</samp>

<p>Når du svarer y vil nano skrive filnavnet med den fulde sti, hvortil du taster <kbd>Enter</kbd>.</p>

<p>Får du en fejlmelding om at du ikke kan gemme skyldes det oftest, at man redigerer i en fil man ikke har rettigheder til. Oftes skyldes det at man glemmer at anvende <em>sudo</em> når man redigerer i systemfiler.</p>

<h3>cat</h3>

<p><em>cat</em> laver et output af filen, men stopper ikke når skærmen er fyldt. Derfor er <em>cat</em> ikke velegnet til at vise indholdet af store filer.</p>

<p>vi vil se indholdet af <em>/etc/hosts</em></p>

<code class="cmd">cat /etc/hosts</code>

<samp>127.0.0.1 localhost
127.0.1.1 server1

# The following lines are desirable for IPv6 capable hosts
::1     ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters</samp>

<p>man-page cat: 
	<a href="http://manpages.ubuntu.com/manpages/focal/man1/cat.1.html" target="_blank">
	http://manpages.ubuntu.com/manpages/focal/man1/cat.1.html</a></p>

<h3>more</h3>

<p><em>more</em>  laver en udskrift af filen, et skærmbillede ad gangen. Man fortsætter visningen ved at trykke <kbd>Enter</kbd> eller <kbd>mellemrum</kbd>.</p>

<dl class="with_keys">
	<dt><kbd>Enter</kbd></dt>
	<dd>En linie ad gangen</dd>
	<dt><kbd>mellemrum</kbd></dt>
	<dd>En side ad gangen</dd>
</dl>

<p>Neders på siden står der hvor langt i filen man er angivet i procent.</p>

<pre><code>more /etc/passwd</code></pre>

<samp class="terminal">.... mange linier.....

gnats:x:41:41:Gnats Bug-Reporting System (admin):/var/lib/gnats:/usr/sbin/nologi
n
nobody:x:65534:65534:nobody:/nonexistent:/usr/sbin/nologin
systemd-network:x:100:102:systemd Network Management,,,:/run/systemd:/usr/sbin/n
ologin
systemd-resolve:x:101:103:systemd Resolver,,,:/run/systemd:/usr/sbin/nologin
systemd-timesync:x:102:104:systemd Time Synchronization,,,:/run/systemd:/usr/sbi
<span class="white_bg">--More--(63%)</span>
</samp>

<p>man-page more: 
	<a href="http://manpages.ubuntu.com/manpages/focal/man1/more.1.html" target="_blank">
	http://manpages.ubuntu.com/manpages/focal/man1/more.1.html</a></p>
	
<h3>head/tail</h3>

<p><em>head</em> viser de første 10 linier af en fil og <em>tail</em> viser de sidste 10</p>

<p>Kommandoen er god til at se om noget er blevet korrekt tilføjet til en fil.</p>

<pre><code>tail /etc/passwd</code></pre>

<samp>_apt:x:105:65534::/nonexistent:/usr/sbin/nologin
tss:x:106:111:TPM software stack,,,:/var/lib/tpm:/bin/false
uuidd:x:107:112::/run/uuidd:/usr/sbin/nologin
tcpdump:x:108:113::/nonexistent:/usr/sbin/nologin
landscape:x:109:115::/var/lib/landscape:/usr/sbin/nologin
pollinate:x:110:1::/var/cache/pollinate:/bin/false
sshd:x:111:65534::/run/sshd:/usr/sbin/nologin
systemd-coredump:x:999:999:systemd Core Dumper:/:/usr/sbin/nologin
tj:x:1000:1000:Thomas Jensen:/home/tj:/bin/bash
lxd:x:998:100::/var/snap/lxd/common/lxd:/bin/false</samp>

<p><strong>Overblik</strong></p>

<dl class="">
	<dt>tail /etc/passwd</dt>
	<dd>viser de 10 sidste linier af <em>/etc/passwd</em></dd>
	<dt>tail -5 /etc/passwd</dt>
	<dd>viser de sidste 5 linier af <em>/etc/passwd</em></dd>
	<dt>head -5 /etc/passwd</dt>
	<dd>viser de første 5 linier af <em>/etc/passwd</em></dd>
</dl>

<p>man-page tail: 
	<a href="http://manpages.ubuntu.com/manpages/focal/en/man1/tail.1.html" target="_blank">
	http://manpages.ubuntu.com/manpages/focal/en/man1/tail.1.html</a></p>

<p>man-page head: 
	<a href="http://manpages.ubuntu.com/manpages/focal/man1/head.1.html" target="_blank">
	http://manpages.ubuntu.com/manpages/focal/man1/head.1.html</a></p>

<h3>sort</h3>

<p><em>sort</em> sortere i outputtet.</p>

<p>Her bruger vi <em>sort</em> til at filtrere de sidste 5 linier af <em>/etc/passwd</em></p>

<pre><code>tail -5 /etc/passwd | sort</code></pre>

<samp>lxd:x:998:100::/var/snap/lxd/common/lxd:/bin/false
pollinate:x:110:1::/var/cache/pollinate:/bin/false
sshd:x:111:65534::/run/sshd:/usr/sbin/nologin
systemd-coredump:x:999:999:systemd Core Dumper:/:/usr/sbin/nologin
tj:x:1000:1000:Thomas Jensen:/home/tj:/bin/bash</samp>

<p>Som du kan se er <em>lxd</em> nu blevet flyttet øvers.</p>

<p>Det ændrer ikke på filen, men giver os et bedre overblik.</p>

<p>man-page sort: 
	<a href="http://manpages.ubuntu.com/manpages/focal/man1/sort.1.html" target="_blank">
	http://manpages.ubuntu.com/manpages/focal/man1/sort.1.html</a></p>
	
<h3>uniq</h3>

<p>Nogle gang kan vi have filer der har gentagelser i sig - det kan f.eks. være logfiler. <em>uniq</em> kan hjælpe os med det når filen er sorteret (se <em>sort</em> ovenfor)</p>

<p>Her har jeg en <em>fil1</em> der viser hvem der har været inde i et rum</p>

<pre><code>cat fil1</code></pre>

<samp>Hans
Grethe
Anders
Grethe
Anders
Grethe</samp>

<p>Jeg vil gerne se hvem der har været derinde</p>

<pre><code>sort fil1 | uniq</code></pre>

<samp>Anders
Grethe
Hans</samp>

<p>Jeg vil gerne se hvor mange gange de har været derinde</p>

<pre>sort fil1 | uniq -c</pre>

<samp>      2 Anders
      3 Grethe
      1 Hans</samp>
      
<p>Jeg vil gerne se hvem der har været derinde mere end engang, og hvor mange gange.</p>      

<pre><code>sort fil1 | uniq -cd</code></pre>

<samp>      2 Anders
      3 Grethe
</samp>

<p>Jeg vil gerne se hvem der kun har været derinde 1 gang.</p>

<pre><code>sort fil1 | uniq -u</code></pre>

<samp>Hans</samp>

<p>man-page sort: 
	<a href="http://manpages.ubuntu.com/manpages/focal/man1/uniq.1.html" target="_blank">
	http://manpages.ubuntu.com/manpages/focal/man1/uniq.1.html</a></p>

<h2>Redirect</h2>

<dl class="">
	<dt>Redirect</dt>
	<dd>Overførsel af output</dd>
	<dt>echo</dt>
	<dd>Udskrivning af tekststreng</dd>
	<dt>tee</dt>
	<dd>skriv input til output</dd>
	<dt>sed</dt>
	<dd>Ændring af tekststrenge</dd>
</dl>

<h3>Redirect -omdirigering</h3>

<p>I linux bruges tegnet <em>></em> (større end) eller <em>>></em> til at omdirigere indhold. I denne sammenhæng skal det ses som en pil der peger til højre.</p>

<p>Anvender vi 1 pil (<em>></em>), så erstattes alt indholdet i filen med output. Anvendes der 2 pile (<em>>></em>), så tilføjes ouput til slutningen af filen.</p>

<p>Som standard vises output i terminalen. Men det kan være at man gerne vil have output i en fil, så man kan arbejde videre med den.</p>

<p>Output kan have 2 former:</p>

<ul class="disc">
	<li><em>stdout</em> - Output fra en kommando</li>
	<li><em>stderr</em> - Fejlmeddelelse fra kommando</li>
</ul>

<p>Det kan bruges på følgende måder:</p>

<dl class="">
	<dt>> file</dt>
	<dd>omdirigerer <em>stdout</em> til <em>file</em></dd>
	<dt>1> file</dt>
	<dd>omdirigerer <em>stdout</em> til <em>file</em></dd>
	<dt>2> file</dt>
	<dd>omdirigerer <em>stderr</em> til <em>file</em></dd>
	<dt>&> file</dt>
	<dd>omdirigerer <em>stdout</em> og <em>stderr</em> til <em>file</em></dd>
</dl>

<p>Hvis man bare vil fjerne meddelelser fra kommandoer (f.eks. i scripts) kan man i stedet for en fil vælge <em>/dev/null</em>. Det er reelt en mappe på computeren der ikke er der - et sort hul.</p>



<p><strong>Eksempel</strong>: Vi vil gerne have træstrukturen fra <em>/etc/apt</em>lagt ind i en fil.</p>

<pre><code>tree -d > træstruktur</code></pre>

<samp><span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~</span>$ tree -d > træstruktur
<span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~</span>$ cat træstruktur
/etc/apt
├── apt.conf.d
├── auth.conf.d
├── preferences.d
├── sources.list.d
└── trusted.gpg.d

5 directories</samp>

<p><strong>Eksempel</strong>: Vi vil gerne have lagt fejlmeddelser fra en kommando ind i en filen <em>fejlmeddelelser</em>:</p>

<pre><code>cat fil_findes_ikke 2>fejlmeddelelser</code></pre>

<samp><span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~</span>$ cat fil_findes_ikke 2>fejlmeddelelser
<span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~</span>$ cat fejlmeddelelser
cat: fil_findes_ikke: No such file or directory</samp>

<p><strong>Eksempler</strong></p>

<dl class="">
	<dt>cat fil1 > fil2</dt>
	<dd>Erstatter indholdet af <em>fil2</em> med indholdet af <em>fil1</em></dd>
	<dt>cat fil1 >> fil2</dt>
	<dd>Tilføjer indholdet af <em>fil1</em> til indholdet af <em>fil2</em></dd>
	<dt>cat -n fil1 > fil2</dt>
	<dd>Erstatter indholdet af <em>fil2</em> med indholdet fra <em>fil1</em>, med linienumre</dd>
</dl>

<p>Læs mere: <a href="http://askubuntu.com/questions/350208/what-does-2-dev-null-mean" target="_blank">
http://askubuntu.com/questions/350208/what-does-2-dev-null-mean</a></p>

<h3>echo</h3>

<p><em>echo</em> er bashfortolkerens printfunktion</p>

<pre><code>echo "Hej med dig"</code></pre>

<samp>Hej med dig</samp>

<p>Vi kan f.eks. bruge den til at indsætte datoen i slutningen af en fil (fejlmeddelelser fra før)</p>

<pre><code>echo $(date) >> fejlmeddelelser</code></pre>

<samp><span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~</span>$ echo $(date) >> fejlmeddelelser
<span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~</span>$ cat fejlmeddelelser
cat: fil_findes_ikke: No such file or directory
Sun 20 Dec 2020 12:21:29 PM UTC</samp>

<p>man-page echo: 
	<a href="http://manpages.ubuntu.com/manpages/focal/man1/echo.1.html" target="_blank">
	http://manpages.ubuntu.com/manpages/focal/man1/echo.1.html</a></p>

<h3>tee</h3>

<p><em>tee</em> bruges til omdirigering, og fungerer ligesom <em>></em>. Ved at indsætte <em>-a</em> fungerer den lige som <em>>></em> og indsætter i bunden af filen.</p>

<p>Tee skal bruges sammen med piping.</p>

<p><strong>Eksempler</strong></p>

<dl class="">
	<dt>date | tee ny_fil</dt>
	<dd>Indsætter datoen i <em>ny_fil</em></dd>
	<dt>date | tee -a ny_fil</dt>
	<dd>indsætter datoen i bunden af <em>ny_fil</em></dd>
</dl>

<p><em>tee</em> giver os mulighed for at indsætte tekstrenge i filer vi ikke selv ejer. Det kan vi gøre ved at indsætte <em>sudo</em> foran <em>tee</em></p>

<p>man-page sort: 
	<a href="http://manpages.ubuntu.com/manpages/focal/man1/tee.1.html" target="_blank">
	http://manpages.ubuntu.com/manpages/focal/man1/tee.1.html</a></p>

<h3>sed</h3>

<p><em>sed</em> anvendes til at ændre tekst.</p>

<p>Kommandoen fungerer på følgende måde:</p>

<pre><code>sed -i s/*NUVÆRENDE_TEKST*/*NY_TEKST*/g</code></pre>

<p>Her vil vi ændre alle forekomster af <em>Anders</em> til <em>Thomas</em>:</p>

<pre><code>touch sedfil</code></pre>

<pre><code>echo "Mit navn er Anders" > sedfil</code></pre>

<pre><code>cat sedfil</code></pre>

<samp>Mit navn er Anders</samp>

<pre><code>sed -i s/Anders/Thomas/g sedfil</code></pre>

<pre><code>cat sedfil</code></pre>

<samp>Mit navn er Thomas</samp>

<p><strong>Et eksempel på en kommando der erstatter en tekststreng</strong></p>


<pre><code>find . -type f | xargs sed -i 's/tocify({ selectors: "h1, h2, h3, h4" })/tocify({ selectors: "h2, h3, h4" })/g'</code></pre>



<p>man-page tail: 
	<a href="http://manpages.ubuntu.com/manpages/focal/en/man1/sed.1.html" target="_blank">
	http://manpages.ubuntu.com/manpages/focal/en/man1/sed.1.html</a></p>

<h2>Pakke programmer</h2>

<p>På Linux pakker man filer ved hjælp af <em>tar</em>. De pakkede filer kaldes for <em>tarballs</em>.</p>

<p>Som standard pakker man mapper med filer. På den måde sikrer man sig også at filerne ligger i den samme mappestruktur, som det blev pakket ned i.</p>

<p>Når man pakker tarballs, så navngiver man den på følgende måde: <em>*PAKKENAVN*.tar.*PAKKEFORMAT*</em></p>

<p>Tar anvendes på følgende måde:</p>

<pre><code>tar *OPTIONER* *NAVN_PÅ_PAKKET_FIL* *FILER_DER_SKAL_PAKKES*</code></pre>

<p><strong>Eksempel</strong></p>

<pre><code>tar cvfz gif_backup.tar.gz gif</code></pre>

<p><strong>Optioner</strong></p>

<dl class="">
	<dt>c</dt>
	<dd>lav (create) et arkiv</dd>
	<dt>x</dt>
	<dd>udpak (extract)</dd>
	<dt>v</dt>
	<dd>vis fremgang</dd>
	<dt>f</dt>
	<dd>filarkivets navn</dd>
	<dt>t</dt>
	<dd>se indholdet af filen</dd>
	<dt>j</dt>
	<dd>opret en <em>bzip2</em> pakket fil</dd>
	<dt>z</dt>
	<dd>opret en <em>gzip</em> pakket fil</dd>
</dl>


<h3>Pakning af filer</h3>

<p>Her vil vi gennemgå komprimeringsformaterne <em>gzip</em> og <em>lzma</em>.</p>

<p><strong>Pakning med gzip</strong></p>

<pre><code>tar cvfz gif_backup.tar.gz gif</code></pre>

<p>gzip-filer navngives <em>tar.gz</em> som afslutning.</p>


<p><strong>Pakning med lzma</strong></p>

<pre><code>tar cvf gif_backup.tar.lz --lzma gif</code></pre>

<p>lzma-filer navngives <em>tar.lz</em> som afslutning.</p>

<p>Til daglig brug bør du anvende <em>gzip</em>, som komprimere ca. til &frac13; (33%)af den oprindelige størrelse. <em>gzip</em> har den bedste størrelse/hastigheds ratio.</p>

<p><em>lzma</em> anvendes til større backup opgaver. <em>lzma</em> pakker meget mere effektiv til ca. &frac14; (25%) af den oprindelige størrelse, men bruger også længere tid på det. Selvom <em>lzma</em> bruger længere tid på at pakke, så pakker det ud hurtigt.</p>

<details>

	<summary>Eksempel med Libreoffice</summary>

	<p>Her er et eksempel hvor jeg har har pakket Llibreoffice ned <em>usr/lib/libreoffice</em>. Det fylder ialt 316,6 MB</p>
	
	<table class="_">
		<thead>
			<tr>
				<th scope="col">Algoritme</th>
				<th scope="col">Størrelse</th>
				<th scope="col">forskel i MB</th>
				<th scope="col">forskel i %</th>
				<th scope="col">Tid indpak</th>
				<th scope="col">Tid udpak</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td>gz</td>
				<td>111,4</td>
				<td>205,2</td>
				<td>35%</td>
				<td>11s</td>
				<td>1,7s</td>
			</tr>
			<tr>
				<td>lz</td>
				<td>84 MB</td>
				<td>232,6 MB</td>
				<td>26%</td>
				<td>1m37s</td>
				<td>4,8s</td>
			</tr>
		</tbody>
	</table>

</details>



<h3>Se indhold</h3>

<p>For at se indholdet af <em>tar</em> filer anvendes optionerne <em>tvf</em></p>

<pre><code>tar tvf gif_backup.tar.gz</code></pre>

<samp>drwxr-xr-x tj/tj         0 2016-07-10 12:26 gif/
-rw-r----- tj/tj    805949 2016-07-10 12:26 gif/slow_clap_citizen_kane.gif
drwxr-xr-x tj/tj         0 2016-07-10 12:26 gif/tegnefilm/
-rw-r----- tj/tj    986614 2016-07-10 12:26 gif/tegnefilm/run_simpson_run.gif
drwxr-xr-x tj/tj         0 2016-07-10 12:26 gif/the bird/
-rw-r----- tj/tj   3080999 2016-07-10 12:26 gif/the bird/thebird02.gif
-rw-r----- tj/tj   1890379 2016-07-10 12:26 gif/the bird/thebird01.gif
-rw-r----- tj/tj    121990 2016-07-10 12:26 gif/the bird/thebird03.gif
-rw-r----- tj/tj   6313886 2016-07-10 12:26 gif/the bird/thebird04.gif
-rw-r----- tj/tj    954706 2016-07-10 12:26 gif/mordor.gif
-rw-r----- tj/tj    137685 2016-07-10 12:26 gif/lachifre.gif</samp>

<p>Man kan også bruge <em>grep</em></p>

<pre><code>tar tvf gif_backup.tar.gz | grep simpson</code></pre>

<samp>-rw-r----- tj/tj    986614 2016-07-10 12:26 gif/tegnefilm/run_<span class="red">simpson</span>_run.gif</samp>

<h3>Udpakning af filer</h3>

<p>Man kan vælge mellem at udpakke alle filer eller blot enkelte</p>

<p>Man udpakker filer på følgende måde - uanset komprimeringsformat.</p>

<pre><code>tar xvf *PAKKEFIL*</code></pre>

<p>Her udpakkes filen <em>gif_backup.tar.lz</em></p>

<pre><code>tar xvf gif_backup.tar.lz</code></pre>

<samp>gif/
gif/slow_clap_citizen_kane.gif
gif/tegnefilm/
gif/tegnefilm/run_simpson_run.gif
gif/the bird/
gif/the bird/thebird02.gif
gif/the bird/thebird01.gif
gif/the bird/thebird03.gif
gif/the bird/thebird04.gif
gif/mordor.gif
gif/lachifre.gif</samp>

<h4>Udpak enkeltfiler</h4>

<p>For pakke en enkelt fil ud sætter man blot filnavnet til sidst med den fulde sti.</p>

<pre><code>tar -xvf gif_backup.tar.gz gif/tegnefilm/run_simpson_run.gif</code></pre>

<p>Hvis man vil udpakke flere filer sætter man blot hvert filnavn ind som en tekststreng:</p>

<pre><code>tar -xvf gif_backup.tar.gz gif/tegnefilm/run_simpson_run.gif gif/mordor.gif</code></pre>

<p>Du kan også udpakke alle filer der hedder noget med <em>bird</em></p>

<pre><code>tar -xvf gif_backup.tar.gz --wildcards *bird*</code></pre>

<p>Læs mere: <a href="http://www.tecmint.com/18-tar-command-examples-in-linux/" target="_blank">http://www.tecmint.com/18-tar-command-examples-in-linux/</a></p>



<h2>Lukning af computeren</h2>
	
<h3>reboot</h3>	
	
<p><em>reboot</em> genstarter computeren. Den skal køres med root-rettigheder.</p>	

<pre><code>sudo reboot</code></pre>

<p>man-page reboot: <a href="http://manpages.ubuntu.com/manpages/focal/man8/reboot.8.html" target="_blank">
http://manpages.ubuntu.com/manpages/focal/man8/reboot.8.html</a></p>


<h3>shutdown</h3>

<p><em>shutdown</em> lukker computeren ned. Kommandoen fungerer på følgende måde</p>

<pre><code>sudo shutdown [Optioner] tid [besked]</code></pre>

<dl class="">
	<dt>shutdown -h 0</dt>
	<dd>Computeren lukkes ned nu</dd>
	<dt>shutdown -h 10 Computeren lukkes ned om 10 minutter</dt>
	<dd>Computeren lukkes ned om 10 minutter med budskabet ”Computeren lukkes ned om 10 minutter”</dd>
	<dt>shutdown -r 0</dt>
	<dd>Computeren genstartes om 0 minutter</dd>
</dl>

<p>man-page shutdown: <a href="http://manpages.ubuntu.com/manpages/focal/en/man8/shutdown.8.html" target="_blank">
http://manpages.ubuntu.com/manpages/focal/en/man8/shutdown.8.html</a></p>
	
</div><!-- end: col-md-9 -->

<footer>

	<p onclick="parentNode.remove()"><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons licens" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a>Indholdet på Vidas.dk er licenseret under <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> og er skrevet af Thomas Jensen. (<a href="../hvem_er_jeg.html" target="_blank">Læs mere</a>)</p>

</footer>
	
	
</div><!-- end: row-fluid -->

</div> <!-- end: container-fluid -->


<!-- SCRIPT SECTION -->
<script type="text/javascript" src="../js/jquery.min.js"></script>
<script type="text/javascript" src="../js/jquery-ui.min.js"></script>
<script type="text/javascript" src="../js/jquery.tocify.min.js"></script>
<script type="text/javascript" src="../js/bootstrap.min.js"></script>

<!-- PRETTYFY-->
<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>


<!-- HIGHLIGHT -->
	<script src="../js/highlight.pack.js" type="text/javascript"></script>
	<script>hljs.initHighlightingOnLoad();</script>

<!-- MATHJAX -->
<script type="text/javascript" 
	src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  displayAlign: "left",
  displayIndent: "0em"
});
</script>


<!-- TOCIFY -->
<script>
	$(function() {var toc = $("#toc").tocify({ selectors: "h2, h3, h4" }).data("toc-tocify"); });
</script>
<!-- GOOGLE ANALYTICS -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-89933285-1', 'auto');
  ga('send', 'pageview');
</script>

</body>
</html>
