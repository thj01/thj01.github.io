<!DOCTYPE html>
<html lang="da">
<head>
  <title>Vidas.dk</title>
  <link rel="icon" href="../images/favicon.png">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link href='http://fonts.googleapis.com/css?family=Ubuntu+Mono|Ubuntu|Ubuntu+Condensed' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/bootstrap.min.css">
  <link rel="stylesheet" href="../css/jquery-ui.min.css">
  <link rel="stylesheet" href="../css/jquery.tocify.css">
  <link rel="stylesheet" href="../css/style_new.css" />
<!-- Scripts in bottom to speed up pageload-->
 

</head>
<body>
	
	
<div class="container-fluid">

<div class="row-fluid">
	
<div class="col-xs-3">
	
	<div id="toc">
	
		<div id="toc_headline"></div>
	
	</div>

</div><!-- Start slut 1. kolonne - TOC -->
	
<div class="col-xs-9">
	
<div class="title">Kommandoer <br/>Terminalen - Linux' kraftværk</div>
	
<p>Dette kapitel giver en grundlæggende gennemgang af filsystemet, superbrugeren og terminalen (kommandolinien) og kommandostrukturen i Linux.</p>

<h1>Anvendt installation</h1>

<p>For at eksemplificere guiden, er der blevet oprettet en virtuel installation med VirtualBox med følgende Indstillinger:</p>

<table class="">
	<thead>
		<tr>
			<th></th>
			<th></th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>RAM</td>
			<td>8 Gb</td>
		</tr>
		<tr>
			<td>Grafik hukommelse</td>
			<td>128 MB og 3D-acceleration </td>
		</tr>
		<tr>
			<td>Harddiske</td>
			<td>2 x 100GB (SATA)</td>
		</tr>
		<tr>
			<td>Netværk</td>
			<td>NAT</td>
		</tr>
	</tbody>
</table>

<p>Harddiskpartitionering</p>

<table class="">
	<thead>
		<tr>
			<th>Harddisk</th>
			<th>Drev</th>
			<th>Betegnelse</th>
			<th>Størrelse</th>
			<th>Anvendelse</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td rowspan="2">Harddisk 1 (100 GB)</td>
			<td>/dev/sda1</td>
			<td>/</td>
			<td>50000Mb (92 Gb)</td>
			<td>System</td>
		</tr>
		<tr>
			<td>/dev/sda2</td>
			<td>Ingen</td>
			<td>4096MB (8 GB)</td>
			<td>Swap</td>
		</tr>
		<tr>
			<td>Harddisk 2 (100GB)</td>
			<td colspan="4">Ikke konfigureret under installation</td>
		</tr>
	</tbody>
</table>


<h1>Hvad er en terminal</h1>

<p>Terminalen er en tekstbaseret tilgang til Linux. Normalt ser vi en <abbr title="Graphical User Interface">GUI</abbr> (<b>G</b>raphical <b>U</b>ser <b>I</b>nterface) som styresystemet, men det er reelt blot en skal hvor vi kan arbejde med programmer grafisk. På et UNIX-system som Linux, der er GUI reelt set en brugerflade der kører på Linux, hvor systemer som  Mac og Windows ikke har den adskillese. Her er GUI'en reelt set styresystemet og kommandolinien noget der er bygget ovenpå.</p>

<p>Terminalen kan gøre systemarbejde hurtigere og mere effektivt, fordi man ved scripts og præcise kommandoer kan udføre noget som kræver mange klik i en GUI.</p>

<h1>Tilgå terminalen</h1>

<p>Terminalen kan tilgås på 2 måder. Igennem <abbr title="TeleTYpewriter">TTY</abbr> (<b>T</b>ele<b>TY</b>pewriter) eller en session.</p>

<h2>TTY</h2>

<p>Når Ubuntu er startet op kører der 7 terminalsessions, som man kan logge ind på. Som standard starer man op i den 7 terminal som kører Ubuntu GUI.</p>

<p>Der kan altså mere end en bruger logget på systemet ad gangen. Men kun en af dem har adgang til en GUI. Man kan logge af en TTY, men lukker man for den, så lukker hele computeren. Fordelen ved dette er, at selvom en TTY låser pga et dårligt program, så kan man fixe problemet i en af de andre ... eller ultimativt genstarte maskinen.</p>

<p>Disser terminaler kan tilgåes ved hjælp af tastekombinationen <kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>F1</kbd> → <kbd>F7</kbd>, hvor F'taller angiver den konkrete terminal.Så længe du befinder dig i VirtualBox skal du anvende dennes interne tastekombination angivet i nedestående skema skema.</p>

<table id="">
	<thead>
		<tr>
			<th>Terminaltype</th>
			<th>Rigtige genvej</th>
			<th>VirtualBox' genvej</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>Tekst</td>
			<td>
				<kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>F1</kbd> &rarr;<kbd>F6</kbd>
			</td>
			<td>
				<kbd>højreCtrl</kbd>+<kbd>F1</kbd> &rarr;<kbd>F6</kbd>
			</td>
		</tr>
		<tr>
			<td>GUI</td>
			<td><kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>F7</kbd></td>
			<td><kbd>højreCtrl</kbd>+<kbd>F7</kbd></td>
		</tr>
	</tbody>
</table>

<h2>Terminalsession</h2>

<p>Terminalsessions er forskellige fra <abbr title="TeleTYpewriter">TTY</abbr>, da de kører ovenpå GUI'en. En session giver altså adgang til kommandolinien uden at man forlader sin GUI.</p>


<p>Hvis man har startet Ubuntu op kan man tilgå en terminalsession ved hjælp af tastekombinationen <kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>T</kbd>. Det vil starte en termial op i et nyt vindue, og hvor din bruger er logget ind.</p>

<pre class="ubuntu_terminal">
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ 






</pre>

<p>jo længere tid man bruger Linux - jo mere vil man anvende terminalen. Simpelthen fordi det er smartere og langt mere effektivt end at klikke sig frem. </p>

<h1>Overblik</h1>

<p>Når man er logget ind får aman følgende information fra kommandolinien</p>

<ol class="">
	<li>Hvem man er,</li>
	<li>hvilken computer man sidder ved,</li>
	<li>hvor man står i filsystemet og </li>
	<li>Hvilken type bruger man er</li>
</ol>

<code class="cmd">tj@tj-VirtualBox:~$ </code>

<table class="">
	<thead>
		<tr>
			<th></th>
			<th></th>
			<th></th>
			<th></th>
			<th></th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>tj</td>
			<td>@</td>
			<td>tj-Virtualbox</td>
			<td>~</td>
			<td>$</td>
		</tr>
		<tr>
			<td>brugernavn</td>
			<td>på</td>
			<td>PC-navn</td>
			<td>Brugerens hjem</td>
			<td>Almindelig bruger</td>
		</tr>
	</tbody>
</table>

<p>$ bliver erstattet af # hvis man er superbruger (root):</p>

<pre class="ubuntu_terminal">
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ sudo su
[sudo] password for tj: 
root@tj-VirtualBox:/home/tj# 



</pre>

<p>De fleste kommandoer har tre sektioner:</p>

<code class="cmd">[kommando] [optioner] [målet for kommandoen]</code>

<p>Eksempel</p>

<code class="cmd">ping -c 4 www.dr.dk</code>

<table class="commands">
	<thead>
		<tr>
			<th>Kommando</th>
			<th>Option</th>
			<th>Mål</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>ping</td>
			<td>-c 4</td>
			<td>www.dr.dk</td>
		</tr>
		<tr>
			<td>programmet</td>
			<td>Optionen (i dette tilfælde 4 gange)</td>
			<td>Målet kommandoen skal arbejde med</td>
		</tr>
	</tbody>
</table>


<pre class="ubuntu_terminal">
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ ping -c 4 dr.dk
PING dr.dk (159.20.6.38) 56(84) bytes of data.
64 bytes from 159.20.6.38: icmp_seq=1 ttl=63 time=13.0 ms
64 bytes from 159.20.6.38: icmp_seq=2 ttl=63 time=12.9 ms
64 bytes from 159.20.6.38: icmp_seq=3 ttl=63 time=13.3 ms
64 bytes from 159.20.6.38: icmp_seq=4 ttl=63 time=14.0 ms

--- dr.dk ping statistics ---
4 packets transmitted, 4 received, 0% packet loss, time 3004ms
rtt min/avg/max/mdev = 12.966/13.342/14.017/0.423 ms
</pre>

<p>Hvis optionen -c 4 ikke tilføjes, kører kommandoen indtil den bliver afbrudt med tastekombinationen <kbd>Ctrl</kbd>+<kbd>c</kbd>  (stop kommandoen) eller <kbd>Ctrl</kbd>+<kbd>z</kbd> (afbryd programmet).</p>

<p>Nogle kommandoer kan indlejrer – f.eks. time (finder tidsforbruget af en kommando)</p>

<code class="cmd">time ping -c 4 www.dr.dk</code>

<pre class="ubuntu_terminal">
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ time ping -c 4 dr.dk
PING dr.dk (159.20.6.38) 56(84) bytes of data.
64 bytes from 159.20.6.38: icmp_seq=1 ttl=63 time=12.6 ms
64 bytes from 159.20.6.38: icmp_seq=2 ttl=63 time=13.9 ms
64 bytes from 159.20.6.38: icmp_seq=3 ttl=63 time=12.3 ms
64 bytes from 159.20.6.38: icmp_seq=4 ttl=63 time=14.6 ms

--- dr.dk ping statistics ---
4 packets transmitted, 4 received, 0% packet loss, time 3005ms
rtt min/avg/max/mdev = 12.331/13.369/14.614/0.929 ms

real	0m3.041s
user	0m0.004s
sys	0m0.000s
</pre>

<h1>Superbrugeren</h1>

<p>Alle Linux har en superbruger (<span class="inl_cmd">root</span>), som har rettigheder til at gøre alt på maskinen. Denne bruger anvender man til at lave systemarbejde med f.eks. at konfigurere programmer og installere programmer. På Ubuntu er <span class="inl_cmd">root</span>-kontoen ikke aktiveret, men man kan "opgradere" sin bruger til at have administratorrettigheder ved hjælp af kommandoen <span class="inl_cmd">sudo</span> (<span class="bold">su</span>peruser <span class="bold">do</span>). <span class="inl_cmd">sudo</span> kommandoen undersøger om man er medlem af sudo-gruppen og giver igennem denne gruppe adgang til at man kan udføre administrationsarbejde.</p>

<p>Superbrugren har følgende rettigheder/opogaver</p>

<ul class="disc">
	<li>Opdatering af systemet</li>
	<li>Ændring af rettigheder på filer, mapper og drev</li>
	<li>Ændring af systemets konfigurationsfiler</li>
	<li>Ændring af netværksindstillinger</li>
	<li>Tilføjelse og ændring af brugere</li>
</ul>


<p>Se eksemplet herunder hvor jeg vil have informationer om den første harddisk (<span class="inl_cmd">/dev/sda</span>) ved hjælp af fdisk kommandoen <span class="inl_cmd">fdisk -d /dev/sda</span>:</p>


<pre class="ubuntu_terminal">
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ fdisk -l /dev/sda
fdisk: kunne ikke åbne /dev/sda: Adgang nægtet
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ sudo fdisk -l /dev/sda
[sudo] adgangskode for tj: 
<b>Disk /dev/sda: 100 GiB, 107374182400 bytes, 209715200 sectors</b>
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0xf5fc72dc

<b>Enhed      Opstart     Start      Slut  Sektorer Size Id Type</b>
/dev/sda1  *            2048 192939547 192937500  92G 83 Linux
/dev/sda2          192942078 209713151  16771074   8G  5 Udvidet
/dev/sda5          192942080 209713151  16771072   8G 82 Linux swap / Solaris
</pre>

<p>Under første kørsel bliver det gjort med brugeren tj's rettigheder. Det medfører at <span class="inl_cmd">fdisk</span> ikke har ret til at kigge på harddiskens data. I det andet tilfælde "løfter" jeg rettighedsniveauet til <span class="inl_cmd">root</span>-niveau, som så giver mig de informationer jeg ønsker.</p>

<table class="cmd_table">
	<thead>
		<tr>
			<th></th>
			<th></th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>sudo</td>
			<td>Udfør kommandoen som superbruger</td>
		</tr>
		<tr>
			<td>gksudo</td>
			<td>Starter GUI programmer op med superbrugerrettigheder. Det kommandoen reelt set gør er, at den ikke viser et terminalvindue. Bør ikke bruges</td>
		</tr>
	</tbody>
</table>

<h2>Noget om sikkerhed</h2>

<p>Når man anvender <span class="inl_cmd">sudo</span>, så vil computeren huske kodeordet i et kort stykke tid. Derfor bør man altid afslutte en terminal når man er færdig med sit arbejde. Det gør man ved at køre kommandoen <span class="inl_cmd">exit</span> eller bruge tastekombinationen <kbd>Alt</kbd>+<kbd>F4</kbd>.</p>


<h1>root-shell</h1>

<p>Hvis der skal udføres meget administrationsarbejde vælger man ofte at bruge kommandoen <span class="inl_cmd">sudo su</span>. Denne kommando ændrer ens bruger til <span class="inl_cmd">root</span>, og man får adgang til <span class="inl_cmd">root</span>-shell:</p>

<table class="cmd_table">
	<thead>
		<tr>
			<th></th>
			<th></th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>sudo su</td>
			<td>Ændrer en til root bruger, så man ikke behøver at skrive sudo</td>
		</tr>
	</tbody>
</table>

<p>Se eksemplet herunder.</p>

<pre class="ubuntu_terminal">
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ sudo su
[sudo] password for tj: 
root@tj-VirtualBox:/home/tj# 
</pre>

<p>Hvis man skal lave systemarbejde kan det nogle gange være optimalt at anvende <span class="inl_cmd">root</span>-shell. Der er to ting man skal være opmærksom på.</p>

<ol class="">
	<li>alt man opretter vil blive oprettet med root som ejer og gruppe.</li>
	<li>root kan alt ... Det betyder man skal tænke sig om, for man kan også komme til at lave ændringer som ødelægger.</li>
</ol>



<h2>Noget om sikkerhed</h2>

<p>Man skal altid lukke en terminal-session ned når man er færdig med sit arbejde. Det gøres ligesom ovenfor ved hjælp af kommandoen: <span class="inl_cmd">exit</span></p>

<pre class="ubuntu_terminal">
root@tj-VirtualBox:/home/tj# exit
exit
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ 
</pre>

<p>Forsøger man at lukke den ned ved hjælp af <kbd>Alt</kbd>+<kbd>F4</kbd>, vil man få følgende fejlmeddelelse:</p>

<figure id="">

	<img class="p60" src="images/terminal_01_AltF4_error.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<p>Det skyldes at <span class="inl_cmd">root-shell</span> kører ovenpå en terminal-shell. Klikker vi på <span class="knap">Luk terminal</span>, så afsluttes vores terminal-session</p>


<h1>man pages</h1>

<p>Til alle terminalens kommandoer er der skrevet en manual, og den kan man tilgå ved med kommandoen <span class="inl_cmd">man [kommando]</span> . Her kan man læse hvordan 
kommandoen bruges (Synopsis) og de optioner man kan tilføje (Descriptions). Herunder er de første linier af kommandoen <span class="inl_cmd">man ls</span></p>

<pre class="ubuntu_terminal">
LS(1)                            User Commands                          LS(1)

<span class="bold">NAME</span>
       ls - list directory contents

<span class="bold">SYNOPSIS</span>
       <span class="bold">ls</span> [<span class="underline">OPTION</span>]... [<span class="underline">FILE</span>]...

<span class="bold">DESCRIPTION</span>
     List  information  about  the FILEs (the current directory by default).
     Sort entries alphabetically if none of -cftuvSUX nor --sort  is  speci‐
     fied.

     Mandatory  arguments  to  long  options are mandatory for short options
     too.

       <span class="bold">-a, --all</span>
              do not ignore entries starting with .

       <span class="bold">-A, --almost-all</span>
              do not list implied . and ..
</pre>

<p>Man scroller med piletasterne og afslutter med [q].</p>

<p>De kan også findes på Internettet. F.eks. kan man finde ls' online udgave ved at søge med ordene: <span class="inl_cmd">ubuntu man ls</span>.  Herefter vælger man sin version af Ubuntu, og får den 
relevante mannualside.</p>

<figure id="">

	<img class="p90"src="images/kommandoer_man_pages_01.png" alt="" title="" />

	<figcaption></figcaption>

</figure>



	
</div><!-- end: col-md-9 -->

<footer>

	<p><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons licens" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a>Indholdet på Vidas.dk er licenseret under <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> og er skrevet af Thomas Jensen. (<a href="../hvem_er_jeg.html" target="_blank">Læs mere</a>)</p>

</footer>
	
	
</div><!-- end: row-fluid -->

</div> <!-- end: container-fluid -->


<!-- SCRIPT SECTION -->
<script type="text/javascript" src="../js/jquery.min.js"></script>
<script type="text/javascript" src="../js/jquery-ui.min.js"></script>
<script type="text/javascript" src="../js/jquery.tocify.min.js"></script>
<script type="text/javascript" src="../js/bootstrap.min.js"></script>

<!-- PRETTYFY-->
<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>


<!-- HIGHLIGHT -->
	<script src="../js/highlight.pack.js" type="text/javascript"></script>
	<script>hljs.initHighlightingOnLoad();</script>

<!-- MATHJAX -->
<script type="text/javascript" 
	src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  displayAlign: "left",
  displayIndent: "0em"
});
</script>


<!-- TOCIFY -->
<script>
	$(function() {var toc = $("#toc").tocify({ selectors: "h1, h2, h3, h4" }).data("toc-tocify"); });
</script>
<!-- GOOGLE ANALYTICS -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-89933285-1', 'auto');
  ga('send', 'pageview');
</script>

</body>
</html>
