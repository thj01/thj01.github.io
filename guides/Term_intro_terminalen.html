<!DOCTYPE html>
<html lang="da">
<head>
  <title>Terminalen</title>
  <link rel="icon" href="../images/favicon.png">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link href='http://fonts.googleapis.com/css?family=Ubuntu+Mono|Ubuntu|Ubuntu+Condensed' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/bootstrap.min.css">
  <link rel="stylesheet" href="../css/jquery-ui.min.css">
  <link rel="stylesheet" href="../css/jquery.tocify.css">
  <link rel="stylesheet" href="../css/style_new.css" />
<!-- Scripts in bottom to speed up pageload-->
 

</head>
<body>
	
	
<div class="container-fluid">

<div class="row-fluid">
	
<div class="col-xs-3">
	
	<nav>
		
		<div id="toc">
		
			<div id="toc_headline"></div>
		
		</div>
		
	</nav>

</div><!-- Start slut 1. kolonne - TOC -->
	
<div class="col-xs-9">
	
<h1>Terminalen - Linux' kraftværk</h1>
	
<p>Dette kapitel giver en grundlæggende gennemgang af filsystemet, superbrugeren og terminalen (kommandolinien) og kommandostrukturen i Linux.</p>

<p>Terminalen er en tekstbaseret tilgang til Linux. Normalt ser vi en <abbr title="Graphical User Interface">GUI</abbr> (Graphical User I>nterface) som styresystemet, men det er reelt blot en skal hvor vi kan arbejde med programmer grafisk. På et UNIX-system som Linux, der er GUI reelt set en brugerflade der kører på Linux, hvor systemer som  Mac og Windows ikke har den adskillese. Her er GUI'en reelt set styresystemet og kommandolinien noget der er bygget ovenpå.</p>

<p>Terminalen kan gøre systemarbejde hurtigere og mere effektivt, fordi man ved scripts og præcise kommandoer kan udføre noget som kræver mange klik i en GUI.</p>

<h2>Tilgå terminalen</h2>

<p>Terminalen kan tilgås på 2 måder. Igennem <abbr title="TeleTYpewriter">TTY</abbr> (<b>T</b>ele<b>TY</b>pewriter) eller en session.</p>

<h3>TTY</h3>

<p>Når Ubuntu er startet op kører der 7 terminalsessions, som man kan logge ind på. Som standard starer man op i session 7 som er den grafiske brugerflade (GUI).</p>

<p>På den måde kan du logge på din maskine selvom f.eks. GUI'en går ned. Det kan f.eks. være hvis man tester en ny grafikdriver, og den låser systemet.</p>

<p>Du skifter TTY ved hjælp af tastekombinationen: <kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>F1</kbd> til <kbd>F7</kbd>.</p>

<p>Oversigt over TTY'er</p>

<ul class="disc">
	<li>TTY1 - Login til ekstra brugeres GUI'er</li>
	<li>TTY2 - Den primære grafiske GUI</li>
	<li>TTY3 - Den 1. terminal session</li>
	<li>TTY4 - Den 2. terminal session</li>
	<li>TTY5 - Den 3. terminal session</li>
	<li>TTY6 - Den 4. terminal session</li>
	<li>TTY7 - Den 2. GUI bruger</li>
	<li>TTY8 - Den 3. GUI bruger</li>
</ul>

<p>Jeg har ikke testet med mere end 2 ekstra brugere, og har ikke kunne finde dokumentation for dette. </p>

<p>Kører du med VirtualBox skal du anvende højre <kbd>Ctrl</kbd>.</p>


<h3>Terminalsession</h3>

<p>Terminalsessions er forskellige fra <abbr title="TeleTYpewriter">TTY</abbr>, da de kører ovenpå GUI'en. En session giver altså adgang til kommandolinien uden at man forlader sin GUI.</p>


<p>Hvis man har startet Ubuntu op kan man tilgå en terminalsession ved hjælp af tastekombinationen <kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>T</kbd>. Det vil starte en termial op i et nyt vindue, og hvor din bruger er logget ind.</p>

<pre class="ubuntu_terminal">
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ 






</pre>

<p>jo længere tid man bruger Linux - jo mere vil man anvende terminalen. Simpelthen fordi det er smartere og langt mere effektivt end at klikke sig frem. </p>

<h2>Overblik</h2>

<p>Når man er logget ind får man følgende information fra kommandolinien</p>

<ol class="">
	<li>Hvem man er,</li>
	<li>Computerens navn,</li>
	<li>hvor man er i filsystemet og </li>
	<li>Hvilken type bruger man er</li>
</ol>

<p>Linien <em>tj@tj-VirtualBox:~$</em> fortæller altså:</p>

<ol class="">
	<li>Brugeren er <em>tj</em></li>
	<li>Computerens navn er <em>tj-virtualBox</em></li>
	<li>Man er i ens personlige mappe. Angives med <em>~</em></li>
	<li>Man er en almindelig bruger. Angives med <em>$</em></li>
	
</ol>

<p><em>$</em> bliver erstattet af <em>#</em> hvis man er superbruger (root):</p>

<samp><span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~</span>$ sudo su
[sudo] password for tj: 
root@tj-VirtualBox:/home/tj# </samp>

<p>De fleste kommandoer har tre sektioner:</p>

<pre><code>[kommando] [optioner] [målet for kommandoen]</code></pre>

<p>Eksempel</p>

<pre><code>ping -c 4 www.dr.dk</code></pre>

<p><em>ping</em> er kommandoen, <em>-c 4</em> er optionen, og <em>www.dr.dk</em> er målet.</p>

<samp><span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~</span>$ ping -c 4 dr.dk
PING dr.dk (159.20.6.38) 56(84) bytes of data.
64 bytes from 159.20.6.38: icmp_seq=1 ttl=63 time=13.0 ms
64 bytes from 159.20.6.38: icmp_seq=2 ttl=63 time=12.9 ms
64 bytes from 159.20.6.38: icmp_seq=3 ttl=63 time=13.3 ms
64 bytes from 159.20.6.38: icmp_seq=4 ttl=63 time=14.0 ms

--- dr.dk ping statistics ---
4 packets transmitted, 4 received, 0% packet loss, time 3004ms
rtt min/avg/max/mdev = 12.966/13.342/14.017/0.423 ms
</samp>

<p>Hvis optionen <em>-c 4</em> ikke tilføjes, kører kommandoen indtil den bliver afbrudt med tastekombinationen <kbd>Ctrl</kbd>+<kbd>c</kbd>  (stop kommandoen) eller <kbd>Ctrl</kbd>+<kbd>z</kbd> (afbryd programmet).</p>

<p>Nogle kommandoer kan indlejrer – f.eks. time (finder tidsforbruget af en kommando)</p>

<pre><code>time ping -c 4 www.dr.dk</code></pre>

<samp>PING dr.dk (159.20.6.38) 56(84) bytes of data.
64 bytes from 159.20.6.38: icmp_seq=1 ttl=63 time=12.6 ms
64 bytes from 159.20.6.38: icmp_seq=2 ttl=63 time=13.9 ms
64 bytes from 159.20.6.38: icmp_seq=3 ttl=63 time=12.3 ms
64 bytes from 159.20.6.38: icmp_seq=4 ttl=63 time=14.6 ms

--- dr.dk ping statistics ---
4 packets transmitted, 4 received, 0% packet loss, time 3005ms
rtt min/avg/max/mdev = 12.331/13.369/14.614/0.929 ms

real	0m3.041s
user	0m0.004s
sys	0m0.000s</samp>

<h2>Superbrugeren</h2>

<p>Alle Linux har en superbruger (<em>root</em>), som har rettigheder til at gøre alt på maskinen. Denne bruger anvender man til at lave systemarbejde med f.eks. at konfigurere programmer og installere programmer. På Ubuntu er <em>root</em>-kontoen ikke aktiveret, men man kan "opgradere" sin bruger til at have administratorrettigheder ved hjælp af kommandoen <em>sudo</em>. <em>sudo</em> kommandoen undersøger om man er medlem af sudo-gruppen og giver igennem denne gruppe adgang til at man kan udføre administrationsarbejde.</p>

<p>Superbrugren har følgende rettigheder/opogaver</p>

<ul class="disc">
	<li>Opdatering af systemet</li>
	<li>Ændring af rettigheder på filer, mapper og drev</li>
	<li>Ændring af systemets konfigurationsfiler</li>
	<li>Ændring af netværksindstillinger</li>
	<li>Tilføjelse og ændring af brugere</li>
</ul>


<p>Se eksemplet herunder hvor jeg vil have informationer om den første harddisk (<code class="bash">/dev/sda</code>) ved hjælp af fdisk kommandoen <code class="bash">fdisk -d /dev/sda</code>:</p>

<samp><span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~</span>$ disk -l /dev/sda
fdisk: kunne ikke åbne /dev/sda: Adgang nægtet
<span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~</span>$ sudo fdisk -l /dev/sda
[sudo] adgangskode for tj: 
<b>Disk /dev/sda: 100 GiB, 107374182400 bytes, 209715200 sectors</b>
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0xf5fc72dc

<b>Enhed      Opstart     Start      Slut  Sektorer Size Id Type</b>
/dev/sda1  *            2048 192939547 192937500  92G 83 Linux
/dev/sda2          192942078 209713151  16771074   8G  5 Udvidet
/dev/sda5          192942080 209713151  16771072   8G 82 Linux swap / Solaris</samp>

<p>Under første kørsel bliver det gjort med brugeren tj's rettigheder. Det medfører at <code class="bash">fdisk</code> ikke har ret til at kigge på harddiskens data. I det andet tilfælde "løfter" jeg rettighedsniveauet til root-niveau, som så giver mig de informationer jeg ønsker.</p>

<h3>Noget om sikkerhed</h3>

<p>Når man anvender <em>sudo</em> så vil computeren huske kodeordet i et kort stykke tid. Derfor bør man altid afslutte en terminal når man er færdig med sit arbejde. Det gør man ved at køre kommandoen <em>exit</em> eller bruge tastekombinationen <kbd>Alt</kbd>+<kbd>F4</kbd>.</p>


<h2>root-shell</h2>

<p>Hvis der skal udføres meget administrationsarbejde vælger man ofte at bruge kommandoen <em>sudo su</em>. Denne kommando ændrer ens bruger til root, og man får adgang til root-shell:</p>

<pre><code>sudo su</code></pre>

<samp>addr sudo su
[sudo] password for tj: 
root@tj-VirtualBox:/home/tj# </samp>

<p>Hvis man skal lave systemarbejde kan det nogle gange være optimalt at anvende root-shell. Der er to ting man skal være opmærksom på.</p>

<ol class="">
	<li>alt man opretter vil blive oprettet med root som ejer og gruppe.</li>
	<li>root kan alt ... Det betyder man skal tænke sig om, for man kan også komme til at lave ændringer som ødelægger.</li>
</ol>



<h3>Noget om sikkerhed</h3>

<p>Man skal altid lukke en terminal-session ned når man er færdig med sit arbejde. Det gøres ligesom ovenfor ved hjælp af kommandoen: <em>exit</em>.</p>

<pre><code>exit</code></pre>

<samp>root@tj-VirtualBox:/home/tj# exit
exit
<span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~</span>$ _</samp>


<p>Forsøger man at lukke den ned ved hjælp af <kbd>Alt</kbd>+<kbd>F4</kbd>, vil man få følgende fejlmeddelelse:</p>

<figure id="">

	<img class="p60" src="images/terminal_01_AltF4_error.png" alt="Fejlmeddelse, når man forsøger at lukke terminalvinduet, når der kører en session" title="Fejlmeddelse, når man forsøger at lukke terminalvinduet, når der kører en session" />

	<figcaption></figcaption>

</figure>

<p>Det skyldes at root-shell kører ovenpå en terminal-shell. Klikker vi på <button>Luk terminal</button>, så afsluttes vores terminal-session</p>


<h2>man pages</h2>

<p>Til alle terminalens kommandoer er der skrevet en manual, og den kan man tilgå ved med kommandoen <em>man [kommando]</em>. Her kan man læse hvordan 
kommandoen bruges (Synopsis) og de optioner man kan tilføje (Descriptions). Herunder er de første linier af kommandoen <em>man ls</em>.</p>

<pre><code>man ls</code></pre>

<samp>LS(1)                            User Commands                          LS(1)

<b>NAME</b>
       ls - list directory contents

<b>SYNOPSIS</b>
       <span class="bold">ls</span> [<span class="underline">OPTION</span>]... [<span class="underline">FILE</span>]...

<b>DESCRIPTION</b>
     List  information  about  the FILEs (the current directory by default).
     Sort entries alphabetically if none of -cftuvSUX nor --sort  is  speci‐
     fied.

     Mandatory  arguments  to  long  options are mandatory for short options
     too.

       <b>-a, --all</b>
              do not ignore entries starting with .

       <b>-A, --almost-all</b>
              do not list implied . and ..
</samp>


<p>Man scroller med piletasterne og afslutter med [q].</p>

<p>De ligger også på internettet (<a href="https://manpages.ubuntu.com/" target="_blank">https://manpages.ubuntu.com/</a>). Du kan bruge denne sides søgefunktion, men jeg plejer at åbne en browser og så lave en direkte søgning. f.eks:</p>

<pre><code>ubuntu man ls</code></pre>

<p>Så er første link som regel til man-siderne</p>

<figure id="">

	<img class="p90"src="images/kommandoer_man_pages_01.png" alt="Hjemmesiden for Ubuntu manuals" title="Hjemmesiden for Ubuntu manuals" />

	<figcaption></figcaption>

</figure>

</div><!-- end: col-md-9 -->

<footer>

	<p onclick="parentNode.remove()"><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons licens" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a>Indholdet på Vidas.dk er licenseret under <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> og er skrevet af Thomas Jensen. (<a href="../hvem_er_jeg.html" target="_blank">Læs mere</a>)</p>

</footer>
	
	
</div><!-- end: row-fluid -->

</div> <!-- end: container-fluid -->


<!-- SCRIPT SECTION -->
<script type="text/javascript" src="../js/jquery.min.js"></script>
<script type="text/javascript" src="../js/jquery-ui.min.js"></script>
<script type="text/javascript" src="../js/jquery.tocify.min.js"></script>
<script type="text/javascript" src="../js/bootstrap.min.js"></script>

<!-- PRETTYFY-->
<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>


<!-- HIGHLIGHT -->
	<script src="../js/highlight.pack.js" type="text/javascript"></script>
	<script>hljs.initHighlightingOnLoad();</script>

<!-- MATHJAX -->
<script type="text/javascript" 
	src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  displayAlign: "left",
  displayIndent: "0em"
});
</script>


<!-- TOCIFY -->
<script>
	$(function() {var toc = $("#toc").tocify({ selectors: "h1, h2, h3, h4" }).data("toc-tocify"); });
</script>
<!-- GOOGLE ANALYTICS -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-89933285-1', 'auto');
  ga('send', 'pageview');
</script>

</body>
</html>
