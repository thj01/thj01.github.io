<!DOCTYPE html>
<html lang="da">
<head>
  <title>Terminalen</title>
  <link rel="icon" href="../images/favicon.png">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link href='http://fonts.googleapis.com/css?family=Ubuntu+Mono|Ubuntu|Ubuntu+Condensed' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.3/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery.tocify/1.9.0/stylesheets/jquery.tocify.min.css">
  <link rel="stylesheet" href="../css/style_new.css" />
<!-- Scripts in bottom to speed up pageload-->
 

</head>
<body>
	
	
<div class="container-fluid">

<div class="row">
	
<div class="col-sm-3">
	
	<nav>
		
		<div id="toc">
		
			<div id="toc_headline"></div>
		
		</div>
		
	</nav>

</div><!-- Start slut 1. kolonne - TOC -->
	
<div class="col-sm-9">
	
<h1>Terminalen - Linux' kraftværk</h1>

<p>Linux er oprindeligt designet til at køre ved hjælp af skrevne kommandoer. Her vil du lære hvordan du tilgår og anvender terminalen til at administrere computeren, og arbejde med filer.</p>

<h2>Terminalen</h2>

<p>Når du starter Ubuntu op, så kører den det vi kalder sessions. På en server starter du i TTY1, og på en desktop starter du i en grafisk brugerflade. Uanset om du logger ind på en server eller en desktop, så starter du i brugerens hjem.</p>

<p>På en server ser det sådan ud:</p>

<samp class="terminal">Ubuntu 20.04.1 server1 tty1

server1 login: _




</samp>

<h2>Sessions</h2>

<p>Alle Linux-systemer kører flere sessions som kører i hver deres TTY (Tele TYpewriters ). Hver session kan have forskellige brugere logget på.</p>

<p>Der er lidt forskel på Ubuntu desktop og Ubuntu server, som du kan se i tabellen herunder.</p>

<table class="">
	<thead>
		<tr>
			<th scope="col">Session</th>
			<th scope="col">Ubuntu desktop</th>
			<th scope="col">Ubuntu Server</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>TTY1</td>
			<td>GUI til ekstra brugere</td>
			<td>Terminal 1</td>
		</tr>
		<tr>
			<td>TTY2</td>
			<td>Opstarts GUI</td>
			<td>Terminal 2</td>			
		</tr>
		<tr>
			<td>TTY3</td>
			<td>Terminal 1</td>
			<td>Terminal 3</td>			
		</tr>
		<tr>
			<td>TTY4</td>
			<td>Terminal 2</td>
			<td>Terminal 4</td>			
		</tr>
		<tr>
			<td>TTY5</td>
			<td>Terminal 3</td>
			<td>Terminal 5</td>			
		</tr>
		<tr>
			<td>TTY6</td>
			<td>Terminal 4</td>
			<td>Terminal 6</td>			
		</tr>
		<tr>
			<td>TTY7</td>
			<td>GUI 2</td>
			<td>N/a</td>			
		</tr>
		<tr>
			<td>TTY8</td>
			<td>GUI 3</td>
			<td>N/a</td>			
		</tr>
	</tbody>
</table>

<p>Du kan skifte mellem sessions ved at bruge følgende tastekombination.</p>

<p><kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>F1</kbd> til <kbd>F8</kbd></p>

<p>Har du din server kørende i VirtualBox skal du anvende:</p>

<p><kbd>Højre Ctrl</kbd>+<kbd>F1</kbd> til <kbd>F8</kbd></p>
<!--
<ul class="disc">
	<li>TTY1 - Login til ekstra brugeres GUI'er</li>
	<li>TTY2 - Den primære grafiske GUI</li>
	<li>TTY3 - Den 1. terminal session</li>
	<li>TTY4 - Den 2. terminal session</li>
	<li>TTY5 - Den 3. terminal session</li>
	<li>TTY6 - Den 4. terminal session</li>
	<li>TTY7 - Den 2. GUI bruger</li>
	<li>TTY8 - Den 3. GUI bruger</li>
</ul>
-->



<h2>Overblik over terminalen</h2>

<samp class=""><span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~</span>$ 






</samp>




<p>Når man er logget ind får man følgende information fra kommandolinien</p>

<ol class="">
	<li>Hvem man er,</li>
	<li>Computerens navn,</li>
	<li>hvor man er i filsystemet og </li>
	<li>Hvilken type bruger man er. <em>$</em> for almindelige bruger, og <em>#</em> for root</li>
</ol>

<p>Linien <em>tj@tj-VirtualBox:~$</em> fortæller altså:</p>

<ol class="">
	<li>Brugeren er <em>tj</em></li>
	<li>Computerens navn er <em>tj-virtualBox</em></li>
	<li>Man er i ens personlige mappe. Angives med <em>~</em></li>
	<li>Man er en almindelig bruger. </li>
	
</ol>

<p><em>$</em> bliver erstattet af <em>#</em> hvis man er root (se nedenfor):</p>

<samp><span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~</span>$ sudo su
[sudo] password for tj: 
root@tj-VirtualBox:/home/tj# </samp>







<h2>Kommandoer</h2>

<p>De fleste kommandoer har tre sektioner:</p>

<pre><code>[kommando] [optioner] [målet for kommandoen]</code></pre>

<p>Eksempel</p>

<pre><code>ping -c 4 www.dr.dk</code></pre>

<p><em>ping</em> er kommandoen, <em>-c 4</em> er optionen, og <em>www.dr.dk</em> er målet.</p>

<samp><span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~</span>$ ping -c 4 dr.dk
PING dr.dk (159.20.6.38) 56(84) bytes of data.
64 bytes from 159.20.6.38: icmp_seq=1 ttl=63 time=13.0 ms
64 bytes from 159.20.6.38: icmp_seq=2 ttl=63 time=12.9 ms
64 bytes from 159.20.6.38: icmp_seq=3 ttl=63 time=13.3 ms
64 bytes from 159.20.6.38: icmp_seq=4 ttl=63 time=14.0 ms

--- dr.dk ping statistics ---
4 packets transmitted, 4 received, 0% packet loss, time 3004ms
rtt min/avg/max/mdev = 12.966/13.342/14.017/0.423 ms
</samp>

<p>Hvis optionen <em>-c 4</em> ikke tilføjes, kører kommandoen indtil den bliver afbrudt med tastekombinationen <kbd>Ctrl</kbd>+<kbd>c</kbd>  (stop kommandoen) eller <kbd>Ctrl</kbd>+<kbd>z</kbd> (afbryd programmet).</p>

<p>Nogle kommandoer kan indlejrer – f.eks. time (finder tidsforbruget af en kommando)</p>

<pre><code>time ping -c 4 www.dr.dk</code></pre>

<samp>PING dr.dk (159.20.6.38) 56(84) bytes of data.
64 bytes from 159.20.6.38: icmp_seq=1 ttl=63 time=12.6 ms
64 bytes from 159.20.6.38: icmp_seq=2 ttl=63 time=13.9 ms
64 bytes from 159.20.6.38: icmp_seq=3 ttl=63 time=12.3 ms
64 bytes from 159.20.6.38: icmp_seq=4 ttl=63 time=14.6 ms

--- dr.dk ping statistics ---
4 packets transmitted, 4 received, 0% packet loss, time 3005ms
rtt min/avg/max/mdev = 12.331/13.369/14.614/0.929 ms

real	0m3.041s
user	0m0.004s
sys	0m0.000s</samp>

<h2>root</h2>

<p><em>root</em> er Linuxsystemets superbruger, som har rettigheder til at gøre alt. Det kan f.eks. være:</p>

<ul class="disc">
	<li>Opdatering af systemet</li>
	<li>Ændring af rettigheder på filer, mapper og drev</li>
	<li>Ændring af systemets konfigurationsfiler</li>
	<li>Ændring af netværksindstillinger</li>
	<li>Tilføjelse og ændring af brugere</li>
</ul>

<p>Af sikkerhedshensyn kan det ikke lade sig gøre at logge på som root. For at klare dette problem har man lavet en gruppe, hvor man kan tilføje brugere der kan få <em>root</em>-rettigheder. Gruppen kaldes <em>sudo</em>.</p>

<p>Brugeren du oprettede da du installerede computeren er automatisk medlem af denne gruppe.</p>

<div class="alert">
	
	<p>Når du udfører kommandoer med <em>sudo</em>, så har du ret til at gøre alt.</p>
	
	<p>Det betyder også at du kan ødelægge og slette vigtige filer på computeren.</p>
	
</div>

<h3>Et eksempel</h3>

<p>Her vil en bruger have informationer om harddiskens partitioner</p>

<pre><code>parted -l</code></pre>

<samp><span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~</span>$ parted -l
/dev/mapper/control: open failed: Permission denied
Failure to communicate with kernel device-mapper driver.
Incompatible libdevmapper 1.02.167 (2019-11-30) and kernel driver (unknown version).
</samp>

<p>Første linie fortæller: <em>Permission denied</em>, fordi brugeren ikke har adgang.</p>

<p>Bruger vi <em>sudo</em> foran kommandoen bliver vi bedt om vores password.</p>

<samp><span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~</span>$ sudo parted -l
[sudo] password for tj: </samp>

<p>Når vi har indtastet det, får vi </p>

<samp>Model: ATA VBOX HARDDISK (scsi)
Disk /dev/sda: 107GB
Sector size (logical/physical): 512B/512B
Partition Table: gpt
Disk Flags: 

Number  Start   End     Size    File system  Name  Flags
 1      1049kB  2097kB  1049kB                     bios_grub
 2      2097kB  1076MB  1074MB  ext4
 3      1076MB  107GB   106GB

Model: Linux device-mapper (linear) (dm)
Disk /dev/mapper/ubuntu--vg-ubuntu--lv: 32.2GB
Sector size (logical/physical): 512B/512B
Partition Table: loop
Disk Flags: 

Number  Start  End     Size    File system  Flags
 1      0.00B  32.2GB  32.2GB  ext4</samp>


<h3>root-shell</h3>

<p>Hvis der skal udføres meget administrationsarbejde vælger man ofte at bruge kommandoen <em>sudo su</em>. Denne kommando ændrer ens bruger til root, og man får adgang til root-shell:</p>

<p>I en <em>root-shell</em> udføres alle kommandoer som root.</p>

<pre><code>sudo su</code></pre>

<samp>addr sudo su
[sudo] password for tj: 
root@tj-VirtualBox:/home/tj# </samp>

<p>Hvis man skal lave systemarbejde kan det nogle gange være optimalt at anvende root-shell. </p>

<h3>Husk at lukke ned</h3>

<p>Man skal altid lukke en terminal-session ned når man er færdig med sit arbejde. Det gøres ligesom ovenfor ved hjælp af kommandoen: <em>exit</em>.</p>

<pre><code>exit</code></pre>

<samp>root@tj-VirtualBox:/home/tj# exit
exit
<span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~</span>$ _</samp>


<p>Forsøger man at lukke den ned ved hjælp af <kbd>Alt</kbd>+<kbd>F4</kbd>, vil man få følgende fejlmeddelelse:</p>

<figure id="">

	<img class="p60" src="images/terminal_01_AltF4_error.png" alt="Fejlmeddelse, når man forsøger at lukke terminalvinduet, når der kører en session" title="Fejlmeddelse, når man forsøger at lukke terminalvinduet, når der kører en session" />

	<figcaption></figcaption>

</figure>

<p>Det skyldes at root-shell kører ovenpå en terminal-shell. Klikker vi på <button>Luk terminal</button>, så afsluttes vores terminal-session</p>


<h2>man pages</h2>

<p>Til alle terminalens kommandoer er der skrevet en manual, og den kan man tilgå ved med kommandoen <em>man [kommando]</em>. Her kan man læse hvordan 
kommandoen bruges (Synopsis) og de optioner man kan tilføje (Descriptions). Herunder er de første linier af kommandoen <em>man ls</em>.</p>

<pre><code>man ls</code></pre>

<samp>LS(1)                            User Commands                          LS(1)

<b>NAME</b>
       ls - list directory contents

<b>SYNOPSIS</b>
       <span class="bold">ls</span> [<span class="underline">OPTION</span>]... [<span class="underline">FILE</span>]...

<b>DESCRIPTION</b>
     List  information  about  the FILEs (the current directory by default).
     Sort entries alphabetically if none of -cftuvSUX nor --sort  is  speci‐
     fied.

     Mandatory  arguments  to  long  options are mandatory for short options
     too.

       <b>-a, --all</b>
              do not ignore entries starting with .

       <b>-A, --almost-all</b>
              do not list implied . and ..
</samp>


<p>Man scroller med piletasterne og afslutter med [q].</p>

<p>De ligger også på internettet (<a href="https://manpages.ubuntu.com/" target="_blank">https://manpages.ubuntu.com/</a>). Du kan bruge denne sides søgefunktion, men jeg plejer at åbne en browser og så lave en direkte søgning. f.eks:</p>

<pre><code>ubuntu man ls</code></pre>

<p>Her vil det første link som regel være direkte til Ubuntu's manpages.</p>

<figure id="">

	<img class="p90"src="images/kommandoer_man_pages_01.png" alt="Hjemmesiden for Ubuntu manuals" title="Hjemmesiden for Ubuntu manuals" />

	<figcaption></figcaption>

</figure>

</div><!-- end: col-md-9 -->

<footer class="fixed-bottom text-center bg-light">

	<p onclick="parentNode.remove()"><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons licens" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a>Indholdet på Vidas.dk er licenseret under <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> og er skrevet af Thomas Jensen. (<a href="../hvem_er_jeg.html" target="_blank">Læs mere</a>)</p>

</footer>
	
	
</div><!-- end: row -->

</div> <!-- end: container-fluid -->


<!-- SCRIPT SECTION -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tocify/1.9.0/javascripts/jquery.tocify.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.3/js/bootstrap.min.js"></script>



<!-- HIGHLIGHT -->
	<script src="../js/highlight.pack.js" type="text/javascript"></script>
	<script>hljs.initHighlightingOnLoad();</script>

<!-- MATHJAX -->
<script type="text/javascript" 
	src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  displayAlign: "left",
  displayIndent: "0em"
});
</script>


<!-- TOCIFY -->
<script>
	$(function() {var toc = $("#toc").tocify({ selectors: "h2, h3, h4" }).data("toc-tocify"); });
</script>
<!-- GOOGLE ANALYTICS -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-89933285-1', 'auto');
  ga('send', 'pageview');
</script>

</body>
</html>
