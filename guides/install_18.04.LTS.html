<!DOCTYPE html>
<html lang="da">
<head>
  <title>Ubuntu 18.04</title>
  <link rel="icon" href="../images/favicon.png">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link href='http://fonts.googleapis.com/css?family=Ubuntu+Mono|Ubuntu|Ubuntu+Condensed' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/bootstrap.min.css">
  <link rel="stylesheet" href="../css/jquery-ui.min.css">
  <link rel="stylesheet" href="../css/jquery.tocify.css">
  <link rel="stylesheet" href="../css/style_new.css"/>
<!-- Scripts in bottom to speed up pageload-->
 

</head>
<body>
	
	
<div class="container-fluid">

<div class="row-fluid">
	
<div class="col-xs-3">
	
	<nav>
		
		<div id="toc">
		
			<div id="toc_headline"></div>
		
		</div>
		
	</nav>
</div><!-- Start slut 1. kolonne - TOC -->
	
<div class="col-xs-9">
	
<div class="title">Installation af <br/>Ubuntu 18.04 LTS</div>

<h1>Guidens formål</h1>

<p>Guidens formål er at installere Ubuntu 18.04 LTS på en ny computer - herefter blot omtalt som Ubuntu. I denne guide bliver der vist på en Virtuel maskine, sat op ved hjælp af i VirtualBox med 4 GB RAM og 100 GB harddisk. Denne installation og konfiguration kan bruges som udgangspunkt for resten af guiden.</p>

<p>Installationsprocessen giver på mange områder sig selv, og der vil kun komme uddybende forklaringer hvor det er nødvendigt.</p>


<h1 id="back_from_windows_prepare">Dualboot</h1>

<p>Det er muligt at installere Ubuntu selvom du i forvejen har windows på din PC. Det gøres ved hjælp af det som kaldes <span class="inl_cmd">dualboot</span>.</p>

<blockquote>
	<p>
		Husk altid at have backup af dine vigtige filer, når du arbejder med opsætningen af harddiske.
	</p>
</blockquote>

<p>Før du går igang med installationen skal du have forberedt noget plads på din harddisk. Herunder er det gennemgået ved hjælp af en liste, men vil du gerne have en billedguide på nedestående proces så kan du find den her: <a href="install_16.04.LTS.windows_dualboot.html" target="_blank">install_16.04.LTS.windows_dualboot.html</a>.</p>

<ol class="">
	<li>Vælg start og kør kommandoen: <span class="inl_cmd">compmgmt.msc</span></li>
	<li>Gå til: Computeradministration → Lager → Diskhåndtering</li>
	<li>Højreklik på den harddisk du vil formindske og vælg "Formindsk Diskenhed"</li>
	<li>Skriv hvor meget du vil formindske den og vælg "Formindsk". Vælg mindst 20 GB, så du har plads til at installere og afprøve programmer</li>
	<li>Tjekke harddisken for fejl. Højreklik på den formindskede partition og vælg: Egenskaber → Fanen: Funktioner → "Undersøg nu..." og tryk "start".</li>
	<li>Genstart Windows, og tjek at det booter uden fejl</li>
	
</ol>

<h1>Hent Ubuntu</h1>
	
<p>Ubuntu 18.04 LTS kan hentes her: <a href="https://www.ubuntu.com/download/desktop" target="_blank">https://www.ubuntu.com/download/desktop</a>.</p>

<p>Alternativt kan det hentes direkte herfra: <a href="http://releases.ubuntu.com/18.04/ubuntu-18.04-desktop-amd64.iso" target="_blank">http://releases.ubuntu.com/18.04/ubuntu-18.04-desktop-amd64.iso</a>.

	
	
<h1>Installation af Ubuntu</h1>

<p>Når du booter op installations DVD/USB'en kommer Ubuntu's "Velkommen" vindue frem. Her er der to ting du skal tage stilling til sproget og om du vil prøve at køre Ubuntu direkte fra opstartsmediet eller om du vil gå direkte igang med installationen. Vælger du at <span class="knap">Prøv Ubuntu</span>, starter computeren op i RAM og fungerer som en almindelig installation, dog uden at der installeres noget. </p>

<p>Her vælger vi <span class="knap">Installér Ubuntu</span> for at sætte installationsprocessen i gang.</p>


<figure id="">

	<img class="p90" src="images/VB_ubuntu1804_klient_01.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<p>Herefter vælges tasteturlayout. Tryk <span class="knap">Fortsæt</span>, da du ikke skal ændre på det forudvalgte.</p>

<figure id="">

	<img class="p90" src="images/VB_ubuntu1804_klient_02.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<h2 id="fortryd_avanceret_HD_opsaetning">Harddisk opsætning</h2>

<p>Det næste der skal gøres er at forberede harddisken. I denne guide bliver der gennemgået en simpel opsætning af harddisken, hvor vi lader Ubuntu konfigurere disken. Vær opmærksom på at nedestående metode sletter al indhold på din harddisk.</p>

<figure id="">

	<img class="p90" src="images/VB_ubuntu1804_klient_03.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<p>I det første vindue skal du vælge:</p>

<ul class="none fat_li">
	<li>Installationsmetode</li>
	
		<p><b>Normal installation: (ANBEFALET)</b>Ubuntu installeres med standard programmer.</p>
		
		<p><b>Minimal installation: </b>Ubuntu installeres kun med et minimalt sæt af programmer. På den måde kan du styre hvad der skal lægges på. Kræver viden om programadministration på Ubuntu.</p>
		
	<li>Hent opdateringer mens der installeres</li>
	
		<p>Sørger for at opdateringer er hentet ned når du starter Ubuntu op første gang, så kan systemet blive opdateret med det samme.</p>
		
		<p>Vælg dette punkt.</p>
	
	<li>Installer trediepartsprogrammer ... </li>
	
		<p>En del af de drivere der skal bruges til at afspille lyd og video med er belagt med licenser der forhindrer Canonical i at lægge dem på som standard. Men man kan godt installere det gratis som privatperson. Vælg dette punkt.</p>
		
		<p>Vælg dette punkt.</p>
	
</ul>

<p>Kontroller at du har valgt de 3 punkter korrekt og klik på <span class="knap">Fortsæt</span></p>

<figure id="">

	<img class="p90" src="images/VB_ubuntu1804_klient_04.png" alt="_" title="_" />

	<figcaption></figcaption>

</figure>

<p>Nu skal opsætningen af harddisken vælges. I denne guide er der anvendt en ny harddisk, så der er ikke andre muligheder end at slette hele disken før installation. Installerer du oven på en Windows partition, så vælg den mulighed der passer til din situation.</p>

<p>Klik på <span class="knap">Installer nu</span></p>

<figure id="">

	<img class="p90" src="images/VB_ubuntu1804_klient_05.png" alt="_" title="_" />

	<figcaption></figcaption>

</figure>



<p>Ubuntu kommer med en ekstra advarsel hvor du kan gennemse de ændringer du har lavet. Har du lavet fejl er det nu du skal klikke på <span class="knap">Gå tilbage</span>, ellers vælger du <span class="knap">Fortsæt</span>.</p>


<h2>Placering og bruger</h2>

<figure id="">

	<img class="p90" src="images/VB_ubuntu1804_klient_06.png" alt="_" title="_" />

	<figcaption></figcaption>

</figure>

<p>Vælg din placering og tryk <span class="knap">Fortsæt</span></p>

<figure id="">

	<img class="p90" src="images/VB_ubuntu1804_klient_07.png" alt="_" title="_" />

	<figcaption></figcaption>

</figure>

<p>Her skal du lave din første bruger. Denne bruger er ud over din egen brugerprofil også med i <span class="inl_cmd">sudo</span>-gruppen og kan udføre systemarbejde. Derfor er det vigtigt at du opretter brugeren på en måde så du kan huske brugernavn og password. Her er koden <span class="inl_cmd">123wqe</span> anvendt, da det er den jeg bruger som standard på testinstallationer ... og ELLERS ALDRIG ;).</p>

<p>Som standard laves brugernavne med små bogstaver</p>

<h2>Overførsel og genstart</h2>

<p>Herefter kører installationen</p>

<figure id="">

	<img class="p90" src="images/VB_ubuntu1804_klient_08.png" alt="_" title="_" />

	<figcaption></figcaption>

</figure>


<p>Når installationen er færdig, beder Ubuntu du om at Genstarte computeren. Tryk <span class="knap">Genstart nu</span>.</p>

<figure id="">

	<img class="p90" src="images/VB_ubuntu1804_klient_09.png" alt="_" title="_" />

	<figcaption></figcaption>

</figure>

<p>Har du ikke fjernet dit bootmedie (USB eller DVD), skal du fjerne det og trykke på <kbd>Enter</kbd>.S</p>

<figure id="">

	<img class="p70" src="images/VB_ubuntu1804_klient_09a.png" alt="_" title="_" />

	<figcaption></figcaption>

</figure>


<h1>Første start</h1>

<p>Når Ubuntu starter op bliver du mødt af en login-skærm. Klik på din bruger og skriv dit password</p>

<figure id="">

	<img class="p90" src="images/VB_ubuntu1804_klient_10.png" alt="_" title="_" />

	<figcaption></figcaption>

</figure>


<figure id="">

	<img class="p50" src="images/VB_ubuntu1804_klient_11.png" alt="_" title="_" />

	<figcaption></figcaption>

</figure>

<p>Første gang du starter logger ind bliver du mødt af en introskærm. Jeg vil anbefale dig at du lader den første skærm stå lidt og og prøver at anvende de steder som er markeret på første billede.</p>

<figure id="">

	<img class="p90" src="images/VB_ubuntu1804_klient_12.png" alt="_" title="_" />

	<figcaption></figcaption>

</figure>

<p>Her kan du klikke dig igennem nyhederne i Ubuntu ved at klikke på <span class="knap">Næste</span>. Jeg vil på det kraftigste anbefale dig, at du hjælper med til at forbedre Ubuntu, ved at indsende dit systems oplysninger. Der er intet privat i det ud over hvad det er for en hardware du har på computeren</p>

<h2>Opdatering</h2>

<p>Efter et kort stykke tid kommer der et vindue op med opdateringer. Du vil opleve at Ubuntu bliver opdateret ofte, og det er en fordel da det også sikrer din computer. Opdateringer gælder alle programmer du har installeret på computeren ved hjælp af programmet <span class="inl_cmd">apt</span>. Klik <span class="knap">Installer nu</span></p>

<figure id="">

	<img class="p60" src="images/VB_ubuntu1804_klient_13.png" alt="_" title="_" />

	<figcaption></figcaption>

</figure>

<p>Når installationen er færdig kommer følgende vindue frem. Klik <span class="knap">OK</span></p>

<figure id="">

	<img class="p60" src="images/VB_ubuntu1804_klient_14.png" alt="_" title="_" />

	<figcaption></figcaption>

</figure>

<h2>VirtualBox</h2>

<p>Hvis du har installeret Ubuntu på VirtualBox er det vigtigt at du får installeret gæstetilføjelserne, da det giver adgang til delt udklipsholder osv.</p>

<p>Vælg menuen <span class="inl_cmd">Enheder &rarr; Indsæt Gæstetilføjelser CD-aftryk ...</span></p>

<figure id="">

	<img class="p60" src="images/VB_ubuntu1804_klient_15.png" alt="_" title="_" />

	<figcaption></figcaption>

</figure>

<p>Når du har valgt punktet downloader VirtualBox CD-aftrykket, monterer og kører det:</p>

<figure id="">

	<img class="p60" src="images/VB_ubuntu1804_klient_16.png" alt="_" title="_" />

	<figcaption></figcaption>

</figure>

<p>Da det er systemfiler der installeres i skal du indtaste din adgangskode, hvorefter gæstetilføjelserne bliver installeret.</p>

<figure id="">

	<img class="p40" src="images/VB_ubuntu1804_klient_17.png" alt="_" title="_" />

	<figcaption></figcaption>

</figure>

<figure id="">

	<img class="p60" src="images/VB_ubuntu1804_klient_18.png" alt="_" title="_" />

	<figcaption></figcaption>

</figure>

<h2>Nedlukning</h2>

<p>Ubuntu lukkes ned ved at klikke på nedpilen i øverste højre hjørne og vælge sluk-symbolet.</p>

<figure id="">

	<img class="p30" src="images/VB_ubuntu1804_klient_19.png" alt="_" title="_" />

	<figcaption></figcaption>

</figure>

<p>Klik på <span class="knap">Sluk</span></p>

<figure id="">

	<img class="p40" src="images/VB_ubuntu1804_klient_20.png" alt="_" title="_" />

	<figcaption></figcaption>

</figure>


<h1>Opdatering af Ubuntu</h1>

<p>Før vi går videre med at konfigurere Ubuntu skal vi opdatere. Der er 3 ting vi skal have gjort:</p>

<ol class="">
	<li>Ændre repositories fra danske til internationale og tilføjer partner repository</li>
	<li>Opdatere repositories</li>
	<li>Opgradere Ubuntu</li>
</ol>

<p>Ubuntu søger som standard i danske repositories efter filer, men de er efter min erfaring langsommere end de internationale. Derfor er det min anbefaling at det ændres. Åbn terminalen (kommandoprompten) med tastekombinationen <kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>t</kbd> og kører 2 kommandoer for at fjerne alle <span class="inl_cmd">dk</span> henvisninger:</p>

<pre class="ubuntu_terminal">
To run a command as administrator (user "root"), use "sudo <command>".
See "man sudo_root" for details.

<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$
</pre>

<blockquote>
	<p>
		Læg mærke til at langt de fleste kommandoer herunder starter med <span class="inl_cmd">sudo</span>. Det skyldes at vi arbejder med systemfiler, som kræver at man er superbruger (<span class="inl_cmd">sudo</span> - <span class="bold">SU</span>peruser <span class="bold">DO</span>).
	</p>
</blockquote>

<p>Først tager vi en kopi af den fil vi arbejder med, så vi altid kan gå tilbage til den oprindelige tilstand.</p>

<code class="cmd">sudo cp /etc/apt/sources.list /etc/apt/sources.list.backup</code>

<p>Herefter anvender vi kommandoen <span class="inl_cmd">sed</span> til at fjerne alle <span class="inl_cmd">dk</span> referencerne i <span class="inl_cmd">/etc/apt/sources.list</span>. Kommandoen bytter teksstrengen <span class="inl_cmd">dk.archive</span> ud med <span class="inl_cmd">archive</span>.</p>

<code class="cmd">sudo sed -i s/dk.archive/archive/ /etc/apt/sources.list</code>

<p>For at tilføje partner repositoriet skal du redigere i filen <span class="inl_cmd">/etc/apt/sources.list</span> og fjerne et hash-tag</p>

<code class="cmd">sudo nano /etc/apt/sources.list</code>

<pre class="black">
<span class="blue1">## Uncomment the following two lines to add software from Canonical's
## 'partner' repository.
## This software is not part of Ubuntu, but is offered by Canonical and the
## respective vendors as a service to Ubuntu users.
# deb http://archive.canonical.com/ubuntu bionic partner <span class="red">&lt;-- Denne linie skal ændres</span>
# deb-src http://archive.canonical.com/ubuntu bionic partner</span>
</pre>

<p>Fjern <span class="inl_cmd">#</span> og mellemrummet foran deb linien så der står:</p>

<pre class="black">
<span class="blue1">## Uncomment the following two lines to add software from Canonical's
## 'partner' repository.
## This software is not part of Ubuntu, but is offered by Canonical and the
## respective vendors as a service to Ubuntu users.
<span class="brown">deb</span> <span class="green1">http://archive.canonical.com/ubuntu</span> <span class="red">bionic</span> <span class="violet">partner</span>
# deb-src http://archive.canonical.com/ubuntu bionic partner</span>
</pre>

<p></p>

<p>For at gemme ændringer skal du gøre følgende, tast <kbd>Ctrl</kbd>+<kbd>x</kbd>. Nederst på skærmen kommer følgende frem</p>

<pre class="black">
<span class="white_bg">Gem ændret buffer (AT SVARE "Nej" VIL ØDELÆGGE ÆNDRINGER)?                                          </span>                    
<span class="white_bg"> J</span> Ja
<span class="white_bg"> N</span> Nej          <span class="white_bg">^C</span> Annullér
</pre>

<p>Tast <kbd>j</kbd></p>

<pre class="black">
<span class="white_bg">Filnavn at skrive: /etc/apt/sources.list                                                            </span>                                       
<span class="white_bg">^G</span> Få hjælp     <span class="white_bg">M-D</span> DOS-format  <span class="white_bg">M-A</span> Tilføj ved e<span class="white_bg">M-b</span> SikrKopiér f
<span class="white_bg">^C</span> Annullér     <span class="white_bg">M-M</span> Mac-format  <span class="white_bg">M-P</span> Tilføj ved s<span class="white_bg">^T</span> Til filer
</pre>

<p>Tast <kbd>Enter</kbd>, og du er tilbage i selve terminalen.</p>

<p>Det eneste du mangler at gøre nu er, at opdatere og opgradere Ubuntu. Det gøres med to kommandoer:</p>

<code class="cmd">sudo apt update</code>

<code class="more_cmd">sudo apt dist-upgrade -y</code>

<p>Herefter køres opgraderingen igennem. Alle programmer som er installerer gennem <span class="inl_cmd">apt</span> eller ved hjælp af en PPA (mere herom senere) vil automatisk blive opdateret. Vær opmærksom på at den første opdatering kan være omfattende. Og alt efter Internethastigheden og CPU, så vil det tage et stykke tid.</p>


<h2>Fjern overflødige pakker</h2>

<p>Efterhånden som der installeres flere opdateringer, så risikerer man, at der er programmer der ikke bliver anvendt mere. Dem kan vi fjerne med nedestående kommando:</p>

<code class="cmd">sudo apt autoremove -y</code>

<pre class="ubuntu_terminal">
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ sudo apt autoremove
Indlæser pakkelisterne... Færdig
Opbygger afhængighedstræ        
Læser tilstandsoplysninger... Færdig
0 opgraderes, 0 nyinstalleres, 0 afinstalleres og 0 opgraderes ikke.
</pre>

<h2>PPA - Personal Package Archive</h2>

<p>Denne guide tager udgangspunkt i at du anvender Ubuntu's LTS version, som sikrer at der kommer sikkerhedsopdateringer i 5 år.Det har så til gengæld den konsekvens, at nogle af de programmer der bliver installeret efter et stykke tid kan være en ældre version.</p>

<p>Det er her hvor PPA'erne kommer ind. Ligesom vi ovenfor konfigurerede de repositories Ubuntu skal hente opdateringer fra, så kan vi tilføje nogle private repositories, som også bliver undersøgt når man kører <span class="inl_cmd">apt update</span>. Et eksempel kan være kontorpakken <span class="inl_cmd">Libreoffice</span>. For at man hele tiden får den nyeste stabile version af Libreoffice skal man tilføje PPA'en <span class="inl_cmd">ppa:libreoffice/ppa</span>. Herefter vil <span class="inl_cmd">apt update</span> ikke blot kigge i de medfølgende repositories for at finde opdateringer, men også i <span class="inl_cmd">ppa:libreoffice/ppa</span>.</p>

<p>En PPA tilføjes på følgende måde:</p>

<code class="cmd">sudo add-apt-repository -y ppa:libreoffice/ppa</code>

<pre class="ubuntu_terminal">
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ sudo add-apt-repository -y ppa:libreoffice/ppa
Havde:1 http://archive.ubuntu.com/ubuntu bionic InRelease
Henter:2 http://ppa.launchpad.net/libreoffice/ppa/ubuntu bionic InRelease [20,7 kB]
Havde:3 http://archive.ubuntu.com/ubuntu bionic-updates InRelease              
Havde:4 http://archive.ubuntu.com/ubuntu bionic-backports InRelease            
Havde:5 http://security.ubuntu.com/ubuntu bionic-security InRelease            
Havde:6 http://archive.canonical.com/ubuntu bionic InRelease       
Henter:7 http://ppa.launchpad.net/libreoffice/ppa/ubuntu bionic/main i386 Packages [27,8 kB]
Henter:8 http://ppa.launchpad.net/libreoffice/ppa/ubuntu bionic/main amd64 Packages [27,8 kB]
Henter:9 http://ppa.launchpad.net/libreoffice/ppa/ubuntu bionic/main Translation-en [11,4 kB]
Hentede 87,8 kB på 0s (177 kB/s)          
Indlæser pakkelisterne... Færdig
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$
</pre>

<p>Herefter vil der blive oprettet en fil i mappen <span class="inl_cmd">/etc/apt/sources.list.d</span> (i dette tilfælde <span class="inl_cmd">libreoffice-ubuntu-ppa-xenial.list</span>). For at <span class="inl_cmd">apt</span> kan kende til dette nye repository skal <span class="inl_cmd">apt</span> opdateres.</p>

<code class="cmd">sudo apt update</code>

<pre class="ubuntu_terminal">
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ sudo apt update 
Havde:1 http://ppa.launchpad.net/libreoffice/ppa/ubuntu bionic InRelease

<span class="red">*** en del er udeladt ***</span>
        
Indlæser pakkelisterne... Færdig               
Opbygger afhængighedstræ       
Læser tilstandsoplysninger... Færdig
13 pakker kan opgraderes. Kør »apt list --upgradable« for at se dem.
</pre>

<p>Her kan vi se at der er 22 pakker der kan opgraderes. Vi kan undersøge dem med kommandoen <span class="inl_cmd">apt list --upgradable</span></p>

<pre class="ubuntu_terminal">
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ apt list --upgradable
<span class="green1">fonts-opensymbol</span>/bionic,bionic 2:102.10+LibO6.0.4~rc2-0ubuntu0.18.04.1 all [kan opgraderes fra: 2:102.10+LibO6.0.3-0ubuntu1]
<span class="green1">libreoffice-base-core</span>/bionic 1:6.0.4~rc2-0ubuntu0.18.04.1 amd64 [kan opgraderes fra: 1:6.0.3-0ubuntu1]
<span class="green1">libreoffice-common</span>/bionic,bionic 1:6.0.4~rc2-0ubuntu0.18.04.1 all [kan opgraderes fra: 1:6.0.3-0ubuntu1]
...
...
</pre>

<p>Som du kan se er der nu kommet opgraderinger til libreoffice, efter vi har tilføjet PPA'en. Det er op til dig at afgøre hvor meget "med" du vil være på nye opdateringer, men det er min anbefaling at du anvender PPA'er til de programmer du anvender meget.</p>

<p>Vi opgraderer med kommandoen:</p>

<code class="cmd">sudo apt upgrade -y</code>


<h1>Graffikkort</h1>

<p>Da jeg har kun erfaring med NVIDIA graffikkort, er det kun dem der bliver gennemgået her.</p>

<blockquote>
	<span class="afsnit">Generelt om grafikkort</span>
	<p>Graffikkort drivere er meget anvanceret, og der er meget der kan gå galt under installation og opdatering - og det uanset om vi taler om Windows, Mac eller Linux. Derfor er det også et af de steder hvor der kan komme mest bøvl - især hvis kernen er blevet opdateret.</p>
</blockquote>

<h2>Forberedelse</h2>

<p>På Linux er den letteste og mest effektive måde at installere og opdatere programmer og drivere ved hjælp af kommandolinien. Fremgangsmåden er:</p>

<ul class="none">
	
	<li>Installer PPA til drivere</li>
		<code class="cmd">sudo add-apt-repository ppa:graphics-drivers/ppa -y</code>
		
	<li>Opdater repositories</li>
		<code class="more_cmd">sudo apt update</code>
	
	<li>Opdater nuværende hardwaredrivere</li>
		<code class="cmd">sudo ubuntu-drivers autoinstall</code>
		
	<li>Genstart maskinen</li>
		<code class="cmd">sudo reboot</code>
	
</ul>

<p>Grunden til at vi genstarter maskinen er, at hardwaredrivers arbejder tæt sammen med kernen. Og der er det vigtigt at fungerer rigtigt. Det sikrer man ved at genstarte computeren.</p>

<h2>Find hardware</h2>

<p>For at finde vores graffikhardware anvender vi <span class="inl_cmd">inxi</span> med <span class="inl_cmd">-G</span>, som vi installerede før.</p>

<pre class="ubuntu_terminal"><span class="green1">tj@tj-desktop</span>:<span class="blue1">~</span>$ inxi -G
Graphics:  Card: NVIDIA GM206 [GeForce GTX 960]
           Display Server: X.Org 1.18.4 drivers: nvidia (unloaded: fbdev,vesa,nouveau)
           Resolution: 1920x1080@60.00hz, 1920x1200@59.95hz
           GLX Renderer: GeForce GTX 960/PCIe/SSE2
           GLX Version: 4.5.0 NVIDIA 381.22
</pre>

<p>Her kan vi altså læse at vi har et NVIDIA GeForce GTC 960.</p>

<h2>Find driver</h2>

<p>Der er to måder hvorpå du kan se hvilken driver der er installeret. Du kan undersøge hvilke pakker du har installeret og "fange" (<span class="inl_cmd">grep</span>) alle dem med nvidia:</p>

<code class="cmd">apt list --installed | grep nvidia</code>

<pre class="ubuntu_terminal"><span class="green1">tj@tj-desktop</span>:<span class="blue1">~</span>$ apt list --installed | grep nvidia

WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

<span class="red">nvidia</span>-381/xenial,now 381.22-0ubuntu0~gpu16.04.2 amd64 [Installeret]
<span class="red">nvidia</span>-opencl-icd-381/xenial,now 381.22-0ubuntu0~gpu16.04.2 amd64 [Installeret,automatisk]
<span class="red">nvidia</span>-prime/xenial,now 0.8.2 amd64 [Installeret,automatisk]
<span class="red">nvidia</span>-settings/xenial,now 381.22-0ubuntu0~gpu16.04.1 amd64 [Installeret,automatisk]
</pre>

<p>Eller du kan anvende kommandoen: <span class="inl_cmd">nvidia-smi</span></p>

<pre class="ubuntu_terminal"><span class="green1">tj@tj-desktop</span>:<span class="blue1">~</span>$ nvidia-smi
Mon May 29 21:35:02 2017       
+-----------------------------------------------------------------------------+
| NVIDIA-SMI 381.22                 Driver Version: 381.22                    |
|-------------------------------+----------------------+----------------------+
| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |
| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |
|===============================+======================+======================|
|   0  GeForce GTX 960     Off  | 0000:01:00.0      On |                  N/A |
|  0%   37C    P5    11W / 130W |    466MiB /  1993MiB |      0%      Default |
+-------------------------------+----------------------+----------------------+
                                                                               
+-----------------------------------------------------------------------------+
| Processes:                                                       GPU Memory |
|  GPU       PID  Type  Process name                               Usage      |
|=============================================================================|
|    0      1568    G   /usr/lib/xorg/Xorg                              26MiB |
|    0      1758    G   /usr/lib/xorg/Xorg                             230MiB |
|    0      2062    G   /usr/bin/gnome-shell                            90MiB |
|    0      2576    G   ...el-token=15E05121AE3B3125D9F6D3A09C4D6888    86MiB |
+-----------------------------------------------------------------------------+
</pre>

<p>Giver ingen af de to et resultat, så skyldes det at du ikke har nvidia-drivere kørende.</p>

<h2>Installer drivere</h2>

<p>Ovenfor tilføjede vi en PPA med nvidiadrivere, og nu kan vi undersøge hvilke drivere vi kan anvende. Det gør vi ved hjælp af <span class="inl_cmd">apt-cache search</span></p>

<pre class="ubuntu_terminal"><span class="green1">tj@tj-desktop</span>:<span class="blue1">~</span>$ apt-cache search nvidia-3 | grep driver
nvidia-340-dev - Udviklingsfilerne til NVIDIAs binære Xorg-<span class="red">driver</span>
nvidia-340 - NVIDIA binary <span class="red">driver</span> - version 340.106
nvidia-384 - Transitional package for nvidia-<span class="red">driver</span>-390
nvidia-384-dev - Transitional package for nvidia-<span class="red">driver</span>-390
xserver-xorg-video-nvidia-390 - NVIDIA binary Xorg <span class="red">driver</span>
nvidia-304 - NVIDIA legacy binary <span class="red">driver</span> - version 304.137
nvidia-304-dev - NVIDIA binary Xorg <span class="red">driver</span> development files
nvidia-387-dev - Transitional package for nvidia-<span class="red">driver</span>-390
nvidia-387 - Transitional package for nvidia-<span class="red">driver</span>-390
nvidia-390-dev - Transitional package for nvidia-<span class="red">driver</span>-390
nvidia-390 - Transitional package for nvidia-<span class="red">driver</span>-390
xserver-xorg-video-nvidia-396 - NVIDIA binary Xorg <span class="red">driver</span>
</pre>




<p>Her kan vi altså se at vi har drivere fra version 304 &rarr; 390. Og du kan se ovenfor at jeg har version 381 installeret. Har du et nyere grafikkort bør du installere den nyeste driver. Men nogle gange får man bedre ydelse ved at anvende en ældre, da det ikke er alle programmer der kan udnytte de nye features som driverne har.</p>

<p>Du installerer en ny driver som du normalt vil installere et program:</p>

<ul class="none fat_li">
	<li>Opdater repositories</li>
		<code class="cmd">sudo apt update</code>
	
	<li>Opdater systemet</li>
		<code class="more_cmd">sudo apt upgrade -y</code>
		
	<li>Installer (nyeste) driver</li>
		<code class="more_cmd">sudo apt install nvidia-390 -y</code>
		
		<p>Læg mærke til at du skal installere <span class="inl_cmd">*nvidia-XXX</span>, hvor tallene er versionsnummeret.</p>
	
	<li>DONE</li>	
	
</ul>

<h2>Fjern/geninstaller driver</h2>

<p>Hvis du kommer ud for at din computer begynder at lave fejlmeddelelser efter en opdatering af kerne eller graffikkort, så kan du ofte fjerne problemet ved at geninstallere graffikdriveren. Det skyldes nogle tekniske ting, og er et problem der opleves på alle platforme (Windows, Mac og Linux).</p>

<p>Processen er, at man logger på systemet bagom GUI'en, fjerner driveren og installerer den igen. Det gøres ved hjælp af det der kaldes TTY (<span class="inl_cmd">TeleTYpewriter</span>). På et Linux-system kører der reelt 7 sessions. 6 TTY og 1 GUI. Dem kan man få adgang til ved at bruge tastekombinationerne</p>

<table class="">
	<thead>
		<tr>
			<th>TTY</th>
			<th>Type</th>
			<th>Genvejstast</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>1</td>
			<td>tekst</td>
			<td><kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>1</kbd></td>
		</tr>
		<tr>
			<td>2</td>
			<td>tekst</td>
			<td><kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>2</kbd></td>
		</tr>
		<tr>
			<td>3</td>
			<td>tekst</td>
			<td><kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>3</kbd></td>
		</tr>
		<tr>
			<td>4</td>
			<td>tekst</td>
			<td><kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>4</kbd></td>
		</tr>
		<tr>
			<td>5</td>
			<td>tekst</td>
			<td><kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>5</kbd></td>
		</tr>
		<tr>
			<td>6</td>
			<td>tekst</td>
			<td><kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>6</kbd></td>
		</tr>
		<tr>
			<td>7</td>
			<td>GUI</td>
			<td><kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>1</kbd></td>
		</tr>
	</tbody>
</table>

<p></p>

<ol class="">
	<li>Opdater PC'en</li>
		<code class="cmd">sudo apt update && sudo apt upgrade -y</code>
	
	<li>Log på TTY</li>
	
		<p>F.eks TTY2: <kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>2</kbd></p>
	
	<li>Fjern nvidiadrivere</li>
	
		<code class="cmd">sudo apt purge nvidia-*</code>
	
	<li>Installer den ønskede driver</li>
	
		<code class="cmd">sudo apt-get install nvidia-390</code>
		
	<li>Genstart</li>
	
		<code class="cmd">sudo reboot</code>
	
</ol>

<p>Som et lille bonusinfo. Mens jeg har siddet og skrevet dette har mit system været plaget af fejlmeddelelser når jeg startede systemet op. Efter at have kørt ovenstående igennem og geninstalleret driveren er fejlmeddelelserne væk. Hardwaredrivere er langt mere komplekse og griber dybere ind i et operativsystem end "normale" programmer, så det er noget vi må lære at leve med og omgå ... uanset om vi anvender Windows, Mac eller Linux.</p>

<h1>Indstil driver</h1>

<p>For at indstille NVIDIA kortet skal du anvende NVIDIA's eget program. Søg efter <span class="inl_cmd">nvidia x server settings</span>. Læg mærke til at det allerede kommer frem efter jeg har har indtastet <span class="inl_cmd">nvi</span>.</p>

<figure id="">

	<img class="p35" src="images/nvidia_setup_01.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<p>Nu kan du indstille dit NVIDIA-graffikkort som du vil have det. (Læg mærke til den fine pingvin)</p>


<figure id="">

	<img class="p70" src="images/nvidia_setup_02.png" alt="" title="" />

	<figcaption></figcaption>

</figure>




<h2>Dual Graffikkort</h2>

<p>Har du en computer med dual-grafkort (NVIDIA og Intel)  i din computer bør du installere programmet <span class="inl_cmd">Prime Indicator</span>. Det laver et ikon i menulinien, hvor du hurtigt kan skifte mellem de to graffikkort.</p>

<code class="cmd">sudo add-apt-repository -y ppa:nilarimogard/webupd8</code>
<code class="more_cmd">sudo apt update</code>
<code class="more_cmd">sudo apt install -y prime-indicator</code>



<h1>Afsluttende arbejde</h1>

<p>Til allersidst gør vi følgende:</p>

<ol class="">
	<li>Fjerner overflødige programmer</li>
	<li>Genstarter for at se om alt virker</li>
	<li>Fjerner overflødige kerner når computeren har genstartet uden problemer</li>
</ol>

<p>Fjern overflødige programmer og genstart</p>

<code class="cmd">sudo apt autoremove -y</code>

<code class="more_cmd">sudo reboot</code>

<p>Efter Computeren er genstartet og du er sikker på at alt virker kan du køre nedestående kommandolinie. Den fjerne alle overflødige kerner, som svarer til ca 2-300 Mb plads der bliver frigjort for hver kerne der fjernes.</p>

<code class="cmd">sudo apt purge $(dpkg -l linux-{image,headers}-"[0-9]*" | awk '/ii/{print $2}' | grep -ve $(uname -r | sed -r 's/-[a-z]+//') | sed ':a;N;$!ba;s/\n/ /g')
</code>



	
</div><!-- end: col-md-9 -->

<footer>

	<p onclick="parentNode.remove()"><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons licens" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a>Indholdet på Vidas.dk er  er licenseret under <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> og er skrevet af Thomas Jensen. (<a href="../hvem_er_jeg.html" target="_blank">Læs mere</a>)</p>

</footer>
	
	
</div><!-- end: row-fluid -->

</div> <!-- end: container-fluid -->


<!-- SCRIPT SECTION -->
<script type="text/javascript" src="../js/jquery.min.js"></script>
<script type="text/javascript" src="../js/jquery-ui.min.js"></script>
<script type="text/javascript" src="../js/jquery.tocify.min.js"></script>
<script type="text/javascript" src="../js/bootstrap.min.js"></script>

<!-- PRETTYFY-->
<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>


<!-- HIGHLIGHT -->
	<script src="../js/highlight.pack.js" type="text/javascript"></script>
	<script>hljs.initHighlightingOnLoad();</script>

<!-- MATHJAX -->
<script type="text/javascript" 
	src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  displayAlign: "left",
  displayIndent: "0em"
});
</script>


<!-- TOCIFY -->
<script>
	$(function() {var toc = $("#toc").tocify({ selectors: "h1, h2, h3, h4" }).data("toc-tocify"); });
</script>
<!-- GOOGLE ANALYTICS -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-89933285-1', 'auto');
  ga('send', 'pageview');
</script>

</body>
</html>
