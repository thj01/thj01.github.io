<!DOCTYPE html>
<html lang="da">
<head>
  <title>Fil-deling</title>
  <link rel="icon" href="../images/favicon.png">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link href='http://fonts.googleapis.com/css?family=Ubuntu+Mono|Ubuntu|Ubuntu+Condensed' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/bootstrap.min.css">
  <link rel="stylesheet" href="../css/jquery-ui.min.css">
  <link rel="stylesheet" href="../css/jquery.tocify.css">
  <link rel="stylesheet" href="../css/style_new.css" />
<!-- Scripts in bottom to speed up pageload-->
 

</head>
<body>
	
	
<div class="container-fluid">

<div class="row-fluid">
	
<div class="col-xs-3">
	
	<nav>
		
		<div id="toc">
		
			<div id="toc_headline"></div>
		
		</div>
		
	</nav>

</div><!-- Start slut 1. kolonne - TOC -->
	
<div class="col-xs-9">
	
<h1>Fildeling med Linux</h1>
	

<h2>Introduktion</h2>

<p>En filserver er en computer der giver netværkets computere mulighed for at gemme eller hente filer. Det kan den gøre ved give alle adgang eller styre det ved hjælp af rettigheder. Det kan både være på bruger og/eller maskinniveau.</p>

<p>Denne guide sigter mod et simpelt hjemmenetværk med få brugere, og hvor brugeropsætning skal foregå på de enkelte maskiner</p>

<p>Ubuntuserveren er sat op på følgende netværk:</p>

<table class="">
	<thead>
		<tr>
			<th></th>
			<th></th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>Netværk</td>
			<td>192.168.0.0/24</td>
		</tr>
		<tr>
			<td>server IP</td>
			<td>192.168.0.10</td>
		</tr>
		<tr>
			<td>Klient IP</td>
			<td>DHCP</td>
		</tr>
		<tr>
			<td>Windows - workgroup (kun SAMBA/CIFS)</td>
			<td>HOMENETWORK</td>
		</tr>
	</tbody>
</table>

<h3>Protokoller</h3>

<p>I denne guide vil det blive gennemgået hvordan man deler filer på et Linux system ved hjælp af NFS og SAMBA/CIFS.</p>

<span class="afsnit">NFS</span>

<p>NFS står for <span class="inl_cmd"><span class="bold">N</span>etwork <span class="bold">F</span>ile <span class="bold">System</span></span>. Fordelen ved at anvende NFS er, at det er en integreret del af Linux. Det betyder at man administrerer brugere og rettigheder til filer/mapper direkte.</p>

<span class="afsnit">SMB/CIFS</span>

<p>SMB og CIFS står for henholdsvis <span class="inl_cmd"><span class="bold">S</span>erver <span class="bold">M</span>essage <span class="bold">B</span>lock</span> og <span class="inl_cmd"><span class="bold">C</span>ommon <span class="bold">I</span>nternet <span class="bold">F</span>ile <span class="bold">S</span>ystem</span>. SMB protokollen er oprindeligt udviklet af IBM, men blev senere videreudviklet af Microsoft som kaldte deres omplementering for CIFS. I Linuxverdenen har man valgt at kalde implementeringen for SAMBA.</p>

<p>For at få SMB til at virke skal man administrere brugere og rettigheder igennem SAMBA, så det giver et ekstra lag af administration.</p>

<h3>Hvad skal du vælge?</h3>

<p>Først skal du forholde dig til, om du skal anvende fildelingen i et blandet computermiljø. Hvis netværksdrevene skal tilgås fra både Linux og Windowsmaskiner er der kun et svar, og det er SMB. Det er kun meget få versioner af Windows der understøtter NFS, hvilket må skyldes at Microsoft bevidst har fravalgt det.</p>

<p>Anvender du kun Linux er min anbefaling at du anvender NFS.</p>


<h3>Praktisk</h3>

<p>For at gøre dette praktisk opretter vi tre forskellige typer af shares (fildelinger) der er afgrænset af henholdsvis brugeren, gruppen og alle.</p>

<table class="">
	<thead>
		<tr>
			<th>Sti</th>
			<th>Beskrivelse</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td><span class="inl_cmd">/srv/filer/brugere/*bruger*</span></td>
			<td>Brugerens private filer</td>
		</tr>
		<tr>
			<td><span class="inl_cmd">/srv/filer/grupper/*gruppe*</span></td>
			<td>Gruppens filer</td>
		</tr>
		<tr>
			<td><span class="inl_cmd">/srv/filer/alle</span></td>
			<td>Åben for alle - også gæster</td>
		</tr>
	</tbody>
</table>

<p>Jeg vælger at lægge brugernes private filer i samme mappe som alle de andre. Det er for at gøre det nemmere at have overblik og lave backup. Har man derudover valgt at installere med LVM, så vil man løbende kunne udvide <span class="inl_cmd">/srv</span> partitionen når der er behov for det.</p>

<p>For at eksemplificere opretter vi en familie med forældrene <span class="inl_cmd">hans</span> og <span class="inl_cmd">grethe</span> samt barnet <span class="inl_cmd">klaus</span>. Vi opretter alle som brugere på filserveren og laver to grupper: en til forældrene (<span class="inl_cmd">parents</span>) og en til hele familien (<span class="inl_cmd">familie</span>). Derudover opretter vi også en mappe (<span class="inl_cmd">alle</span>) hvor gæster også har adgang. Se nedestående skema:</p>

<table class="">
	<thead>
		<tr>
			<th>Mappe</th>
			<th>Hans</th>
			<th>Grethe</th>
			<th>klaus</th>
			<th>Besøgende</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td><span class="inl_cmd">/srv/filer/brugere/hans</span></td>
			<td>x</td>
			<td></td>
			<td></td>
			<td></td>
		</tr>
		<tr>
			<td><span class="inl_cmd">/srv/filer/brugere/grethe</span></td>
			<td></td>
			<td>x</td>
			<td></td>
			<td></td>
		</tr>
		<tr>
			<td><span class="inl_cmd">/srv/filer/brugere/klaus</span></td>
			<td></td>
			<td></td>
			<td>x</td>
			<td></td>
		</tr>
		<tr>
			<td><span class="inl_cmd">/srv/filer/grupper/parents</span></td>
			<td>x</td>
			<td>x</td>
			<td></td>
			<td></td>
		</tr>
		<tr>
			<td><span class="inl_cmd">/srv/filer/grupper/familie</span></td>
			<td>x</td>
			<td>x</td>
			<td>x</td>
			<td></td>
		</tr>
		<tr>
			<td><span class="inl_cmd">/srv/filer/alle</span></td>
			<td>x</td>
			<td>x</td>
			<td>x</td>
			<td>x</td>
		</tr>
	</tbody>
</table>

<h3>Noget om UID og GID</h3>

<p>UID og GID er henholdsvis <span class="bold">U</span>ser og <span class="bold">G</span>roup <span class="bold">ID</span>entification. Det er nogle unikke talværdier der tilhører hver enkelt tjeneste, bruger og gruppe på en Linux computer. Den første bruger du har oprettet på din computer har f.eks. UID/GID 1000 på en Ubuntu computer.</p>

<p>Det er også UID og GID som NFS bruger til at identificere brugere og grupper med. Derfor skal vi sikre os at brugere og grupper har samme ID på hele netværket. I vores tilfælde med få maskiner er det relativt let at styre brugerrettighederne, men til større systemer kan det lade sig gøre at styre det centralt ved hjælp af LDAP (se <a href="https://help.ubuntu.com/community/SettingUpNFSHowTo" target="_blank">Setting Up NFS Howto</a> og <a href="https://help.ubuntu.com/lts/serverguide/openldap-server.html" target="_blank">OpenLDAP Server</a>.</p>

<p>Jeg har i denne guide sat brugerne til at starte fra <span class="inl_cmd">2000</span> og grupperne fra <span class="inl_cmd">3000</span>, men du kan vælge helt din egen måde at gøre det på.</p>

<h2>Forberedelse af server</h2>

<p>Det der skal gøres er følgende:</p>

<ol class="">
	<li>Oprettelse af brugere</li>
	<li>Oprettelse af grupper</li>
	<li>Oprettelse af mapper</li>
	<li>Sætte bruger og skrive rettigheder på mapper</li>
</ol>

<p>Da der skal laves en del systemarbejde vælger jeg at skifte til root-shell. Det er for at undgå at skulle skrive <span class="inl_cmd">sudo</span> foran alle kommandoerne.</p>

<code class="cmd">sudo su</code>

<pre class="ubuntu_terminal">
thoj@mainsrv:~$ sudo su
[sudo] adgangskode for thoj: 
root@mainsrv:/home/thoj#
</pre>

<h3>Opret brugere</h3>

<p>Herunder opretter vi brugerne på systemet. Ved at anvende <span class="inl_cmd">useradd</span> kan vi konfigurere brugeren med det samme. Bl.a. opretter vi ikke nogen hjemmemappe til brugerne, da de ikke har brug for den, og de får heller ikke adgang til selve system, da de ikke kan åbne en shell.</p>
	
<code class="cmd">useradd -M -u 2000 -s /usr/sbin/nologin hans</code>
<code class="more_cmd">useradd -M -u 2001 -s /usr/sbin/nologin grethe</code>
<code class="more_cmd">useradd -M -u 2002 -s /usr/sbin/nologin klaus</code>

<p>Kontroller at de er oprettet korrekt. De nye brugere er blevet oprettet i bunden af filen <span class="inl_cmd">/etc/passwd</span></p>

<code class="cmd">tail -3 /etc/passwd</code>

<pre class="ubuntu_terminal">
root@mainsrv:/home/thoj# tail -3 /etc/passwd
hans:x:2000:2000::/home/hans:/usr/sbin/nologin
grethe:x:2001:2001::/home/grethe:/sbin/nologin
klaus:x:2002:2002::/home/klaus:/sbin/nologin
</pre>

<p>Opret herefter et password til hver af brugerne ved hjælp af kommandoen <span class="inl_cmd">passwd</span>. Herunder er det vist med brugeren <span class="inl_cmd">hans</span>.</p>

<code class="cmd">passwd hans</code>

<pre class="ubuntu_terminal">
root@mainsrv:/home/thoj# passwd hans
Indtast ny UNIX-adgangskode: <span class="red">&lt;-- Indtast password (f.eks: 123qwe)</span>
Genindtast ny UNIX-adgangskode: <span class="red">&lt;-- Indtast password (f.eks: 123qwe)</span>
passwd: password updated successfully
</pre>

<h3>Opret grupper</h3>

<p>Opret grupperne <span class="inl_cmd">parents</span> og <span class="inl_cmd">familie</span>. Læg mærke til at disse grupper også får et unikt <span class="inl_cmd">UID</span>.</p>

<code class="cmd">groupadd -g 3000 parents</code>

<code class="more_cmd">groupadd -g 3001 familie</code>

<p>Kontroller at gruppen er oprettet korrekt. De nye grupper er blevet oprettet i bunden af filen <span class="inl_cmd">/etc/group</span></p>

<code class="cmd">tail -5 /etc/group</code>

<pre class="ubuntu_terminal">
root@mainsrv:/home/thoj# groupadd -g 3000 parents
root@mainsrv:/home/thoj# groupadd -g 3001 familie
root@mainsrv:/home/thoj# tail -5 /etc/group
hans:x:2000:
grethe:x:2001:
klaus:x:2002:
parents:x:3000:
familie:x:3001:
</pre>

<p>Tilføj forældrene til gruppen <span class="inl_cmd">parents</span>.</p>

<code class="cmd">usermod -a -G parents,familie hans</code>
<code class="more_cmd">usermod -a -G parents,familie grethe</code>
<code class="more_cmd">usermod -a -G familie klaus</code>

<p>Kontroller at brugerne (her markeret med rødt) er kommet i gruppen <span class="inl_cmd">parents</span>:</p>

<code class="cmd">tail -5 /etc/group</code>

<pre class="ubuntu_terminal">
root@mainsrv:/home/thoj# tail -5 /etc/group
hans:x:2000:
grethe:x:2001:
klaus:x:2002:
parents:x:3000:hans,grethe <span class="red">&lt;-- medlemmer af gruppen parents</span>
familie:x:3001:hans,grethe,klaus <span class="red">&lt;-- medlemmer af gruppen familie</span>
</pre>

<h3>Opret mapper</h3>

<p>Opret mapper til de delte filer</p>

<span class="afsnit">Opret mapper til brugernes private filer</span>

<code class="cmd">mkdir -p /srv/filer/brugere/{hans,grethe,klaus}</code>

<span class="afsnit">Opret gruppernes mapper i mappen <span class="inl_cmd">grupper</span></span>

<code class="cmd">mkdir -p /srv/filer/grupper/{parents,familie}</code>

<span class="afsnit">Opret delt mappe til alle brugere på systemet</span>

<code class="cmd">mkdir -p /srv/filer/alle</code>

<p>For at få et overblik over hele filstrukturen anvender vi kommandoen <span class="inl_cmd">tree</span>. Hvis den ikke er installerer skal den installeres først:</p>

<code class="cmd">apt install tree -y</code>

<code class="more_cmd">tree /srv/filer</code>

<pre class="ubuntu_terminal">
root@mainsrv:/srv/filer/grupper# tree /srv/filer
<span class="blue1">/srv/filer</span>
├── <span class="blue1">alle</span>
├── <span class="blue1">brugere</span>
│   ├── <span class="blue1">grethe</span>
│   ├── <span class="blue1">hans</span>
│   └── <span class="blue1">klaus</span>
└── <span class="blue1">grupper</span>
    ├── <span class="blue1">familie</span>
    └── <span class="blue1">parents</span>

8 directories, 0 files
</pre>

<h3>Sæt rettigheder</h3>

<p>Efter vi har oprettet mapperne skal der sættes rettigheder på dem, så det kun er ejerne af mapperne der har adgang.</p>

<span class="afsnit">Rettigheder på private mapper</span>

<code class="cmd">chown -R hans:hans /srv/filer/brugere/hans/</code>
<code class="more_cmd">chown -R grethe:grethe /srv/filer/brugere/grethe</code>
<code class="more_cmd">chown -R klaus:klaus /srv/filer/brugere/klaus</code>

<p>Sæt skrive rettigheder</p>

<code class="cmd">chmod -R 770 /srv/filer/brugere/*</code>

<p>Kontroller at det er gjort korrekt.</p>

<code class="cmd">ls -l /srv/filer/brugere/</code>

<pre class="ubuntu_terminal">
root@mainsrv:/srv/filer# ls -l /srv/filer/brugere/
totalt 12
drwxrwx--- 2 grethe grethe 4096 jul 26 01:09 <span class="blue1">grethe</span>
drwxrwx--- 2 hans   hans   4096 jul 26 01:09 <span class="blue1">hans</span>
drwxrwx--- 2 klaus  klaus  4096 jul 26 01:09 <span class="blue1">klaus</span>
</pre>

<span class="afsnit">Brugerrettigheder på grupper</span>

<code class="cmd">chown -R root:parents /srv/filer/grupper/parents/</code>
<code class="more_cmd">chown -R root:familie /srv/filer/grupper/familie/</code>

<p>Sæt skrive rettigheder</p>

<code class="cmd">chmod -R 2770 /srv/filer/grupper/*</code>

<p>2 tallet ændrer på måden filer bliver oprettet i mapperne. Normalt vil filer blive oprettet sådan at filen ejes af brugerens egen gruppe. Ved at sætte 2 tallet foran vil alt der skrives i mappen tilhøre den gruppen der ejer mappen.</p>

<p>Kontroller at det er gjort korrekt.</p>

<code class="cmd">ls -l /srv/filer/grupper</code>

<pre class="ubuntu_terminal">
root@mainsrv:/srv/filer# ls -l /srv/filer/grupper/
totalt 8
drwxrwx--- 2 root familie 4096 jul 26 01:09 <span class="blue1">familie</span>
drwxrwx--- 2 root parents 4096 jul 26 01:09 <span class="blue1">parents</span>
</pre>

<span class="afsnit">Brugerrettigheder på mappen alle</span>

<code class="cmd">chown -R nobody:nogroup /srv/filer/alle/</code>

<p>Brugeren <span class="inl_cmd">nobody</span> og gruppen <span class="inl_cmd">nogroup</span> har ingen privilegier på et Linuxsystem. Det er en "dummy" bruger/gruppe, man anvender for at højne sikkerheden.</p>

<p>Sæt skrive rettigheder</p>

<code class="cmd">chmod -R 2777 /srv/filer/alle</code>

<p>Kontroller at det er gjort korrekt.</p>

<code class="cmd">ls -l /srv/filer</code>

<pre class="ubuntu_terminal">
root@mainsrv:/srv/filer# ls -l /srv/filer/
totalt 12
d------r-x 2 nobody nogroup 4096 jul 26 01:09 <span class="blue1">alle</span>
drwxr-xr-x 5 root   root    4096 jul 26 01:09 <span class="blue1">brugere</span>
drwxr-xr-x 4 root   root    4096 jul 26 01:09 <span class="blue1">grupper</span>
</pre>

<p>For at få en oversigt over alle bruger og skrive rettigheder anvender vi kommandoen <span class="inl_cmd">tree</span> igen:</p>

<code class="cmd">tree -pua --dirsfirst /srv/filer/</code>

<pre class="ubuntu_terminal">
root@mainsrv:/srv/filer# tree -puga --dirsfirst /srv/filer/
<span class="blue1">/srv/filer/</span>
├── [d------rwx nobody   nogroup ]  <span class="blue1">alle</span>
├── [drwxr-xr-x root     root    ]  <span class="blue1">brugere</span>
│   ├── [drwxrwx--- grethe   grethe  ]  <span class="blue1">grethe</span>
│   ├── [drwxrwx--- hans     hans    ]  <span class="blue1">hans</span>
│   └── [drwxrwx--- klaus    klaus   ]  <span class="blue1">klaus</span>
└── [drwxr-xr-x root     root    ]  <span class="blue1">grupper</span>
    ├── [d---rwx--- root     familie ]  <span class="blue1">familie</span>
    └── [d---rwx--- root     parents ]  <span class="blue1">parents</span>

8 directories, 0 files
</pre>

<h2>Forberedelse af klient</h2>

<p>Det der skal gøres er følgende:</p>

<ol class="">
	<li>Oprettelse af brugere</li>
	<li>Oprettelse af grupper</li>
	<li>Oprettelse af mapper</li>
</ol>

<p>Da der skal laves en del systemarbejde vælger jeg at skifte til root-shell. Det er for at undgå at skulle skrive <span class="inl_cmd">sudo</span> foran alle kommandoerne.</p>

<code class="cmd">sudo su</code>

<pre class="ubuntu_terminal">
thoj@mainsrv:~$ sudo su
[sudo] adgangskode for thoj: 
root@mainsrv:/home/thoj#
</pre>


<h3>Opret brugere</h3>

<p>Her vælger vi at oprette alle brugerne så vi kan afprøve vores NFS-server.</p>

<p><span class="red">*** VIGTIGT ***</span> Læg mærke til at jeg giver dem samme UID som de har på NFS serveren og opretter dem med en hjemmemappe.</p>

<code class="cmd">useradd -d /home/hans -m hans -u 2000 -s /bin/bash</code>
<code class="more_cmd">useradd -d /home/grethe -m grethe -u 2001 -s /bin/bash</code>
<code class="more_cmd">useradd -d /home/klaus -m klaus -u 2002 -s /bin/bash</code>

<p>Sæt passwords</p>

<code class="cmd">passwd hans</code>
<code class="more_cmd">passwd grethe</code>
<code class="more_cmd">passwd klaus</code>

<p>Kontroller</p>

<code class="cmd">tail -3 /etc/passwd</code>

<pre class="ubuntu_terminal">
root@thoj-VirtualBox:/home/thoj# tail -3 /etc/passwd
hans:x:2000:2000::/home/hans:/bin/bash
grethe:x:2001:2001::/home/grethe:/bin/bash
klaus:x:2002:2002::/home/klaus:/bin/bash
</pre>

<h3>Opret grupper</h3>

<code class="cmd">groupadd -g 3000 parents</code>
<code class="more_cmd">groupadd -g 3001 familie</code>

<p>Tilføj brugerne til deres nye gruppet samt sudo-gruppen. Grunden til at vi tilføjer dem til sudo-gruppen på klienten er for at selv kan montere drev fra serveren.</p>

<code class="cmd">usermod -a -G parents,familie,sudo hans</code>
<code class="more_cmd">usermod -a -G parents,familie,sudo grethe</code>
<code class="more_cmd">usermod -a -G familie,sudo klaus </code>

<p>Kontroller</p>

<code class="cmd">tail -5 /etc/group && cat /etc/group | grep sudo</code>

<pre class="ubuntu_terminal">
root@thoj-VirtualBox:/home/thoj# tail -5 /etc/group && cat /etc/group | grep sudo
hans:x:2000:
grethe:x:2001:
klaus:x:2002:
parents:x:3000:hans,grethe
familie:x:3001:hans,grethe,klaus
<span class="red">sudo</span>:x:27:thoj,hans,klaus,grethe
</pre>

<p>Læg mærke til, at hvis brugerne ikke er oprettet i de lokale grupper, så har de ikke adgang til gruppedelingerne på NFS serveren. Derfor er det vigtigt at brugerne er oprettet både som brugere, men også i deres respektive grupper på den enkelte maskine.</p>

<h3>Opret mapper</h3>

<p>Her vælger vi at lægge alle delte filer i mappen <span class="inl_cmd">/mnt/netværk</span></p>

<code class="cmd">mkdir /mnt/netværk</code>

<p>Forlad root-shell med kommandoen <span class="inl_cmd">exit</span>:</p>

<pre class="ubuntu_terminal">
root@thoj-VirtualBox:/home/thoj# exit
exit
<span class="green1">thoj@thoj-VirtualBox</span>:<span class="blue1">~</span>$
</pre>

<h2>NFS</h2>

<h3>Installation NFS: server</h3>

<span class="afsnit">Opsætning af NFS server</span>

<p>Installer NFS-serveren.</p>

<code class="cmd">sudo apt install nfs-kernel-server -y</code>

<p>NFS shares oprettes i filen <span class="inl_cmd">/etc/exports</span>.</p>

<code class="cmd">sudo nano /etc/exports</code>

<pre class="black">
# /etc/exports: the access control list for filesystems which may be exported
#               to NFS clients.  See exports(5).
#
# Example for NFSv2 and NFSv3:
# /srv/homes       hostname1(rw,sync,no_subtree_check) hostname2(ro,sync,no_sub$
#
# Example for NFSv4:
# /srv/nfs4        gss/krb5i(rw,sync,fsid=0,crossmnt,no_subtree_check)
# /srv/nfs4/homes  gss/krb5i(rw,sync,no_subtree_check)
#

/srv/filer/brugere/hans 192.168.0.0/24(rw,no_subtree_check)
/srv/filer/brugere/grethe 192.168.0.0/24(rw,no_subtree_check)
/srv/filer/brugere/klaus 192.168.0.0/24(rw,no_subtree_check)
/srv/filer/grupper/parents 192.168.0.0/24(rw,no_subtree_check)
/srv/filer/grupper/familie 192.168.0.0/24(rw,no_subtree_check)
/srv/filer/alle 192.168.0.0/24(rw,no_subtree_check)
</pre>

<p>Nederst i filen står de mapper som er delt. Linierne indeholder 3 dele</p>

<table class="">
	<thead>
		<tr>
			<th>Sti til mappen</th>
			<th>Netværket det er delt på</th>
			<th>Optioner</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>/srv/filer/brugere/hans</td>
			<td>192.168.0.0/24</td>
			<td>(rw,async,no_subtree_check)</td>
		</tr>
	</tbody>
</table>

<p>Læg mærke til netværksadressen <span class="inl_cmd">192.168.0.0/24</span>. Det er denne adresse der fortæller hvilke netværk der har adgang til - i dette tilfælde vores eget netværk. Hvis vi ville have dem delt med alle netværk, anvendes en asterisk (*) i stedet for.</p>

<p>Gør dem tilgængelige for systemet og genstart NFS-serveren:</p>

<code class="cmd">sudo exportfs -a</code>

<code class="more_cmd">sudo systemctl restart nfs-kernel-server</code>

<p>Tjek om de er eksporteret korrekt med <span class="inl_cmd">showmount -e</span></p>

<pre class="ubuntu_terminal">
root@mainsrv:/home/thoj# showmount -e
Export list for mainsrv:
/srv/filer/alle            192.168.0.0/24
/srv/filer/grupper/familie 192.168.0.0/24
/srv/filer/grupper/parents 192.168.0.0/24
/srv/filer/brugere/klaus   192.168.0.0/24
/srv/filer/brugere/grethe  192.168.0.0/24
/srv/filer/brugere/hans    192.168.0.0/24
</pre>

<h3>Installation NFS: klient</h3>

<code class="cmd">apt install nfs-common -y</code>

<h3>Montering af NFS drev</h3>

<p>Før vi går igang med dette kapitel skal du logge ind med en af de nye brugere der har adgang til NFS serveren. Her vælger jeg <span class="inl_cmd">hans</span>.</p>

<p>Først finder vi ud af hvilke delinger der ligger på vores NFS-server ved at anvende <span class="inl_cmd">showmount</span></p>

<code class="cmd">showmount -e 192.168.0.10</code>

<pre class="ubuntu_terminal">
<span class="green1">hans@thoj-VirtualBox</span>:<span class="blue1">~</span>$ showmount -e 192.168.0.10
Export list for 192.168.0.10:
/srv/filer/alle            192.168.0.0/24
/srv/filer/grupper/familie 192.168.0.0/24
/srv/filer/grupper/parents 192.168.0.0/24
/srv/filer/brugere/klaus   192.168.0.0/24
/srv/filer/brugere/grethe  192.168.0.0/24
/srv/filer/brugere/hans    192.168.0.0/24
</pre>

<p>For at monere NFS-shares anvedes følgende kommando:</p>

<code class="cmd">sudo mount *IP_ADRESSE*:*STI_PÅ_NFS_SERVEREN* *LOKALT_MONTERINGSPUNKT*</code>

<p>I vores tilfælde bliver det til følgende kommando hvis vi bare vil have monteret alt som det er på serveren:</p>

<code class="cmd">sudo mount 192.168.0.10:/srv/filer /mnt/netværk</code>

<pre class="ubuntu_terminal">
<span class="green1">hans@thoj-VirtualBox</span>:<span class="blue1">~</span>$  sudo mount 192.168.0.10:/srv/filer /mnt/netværk
[sudo] adgangskode for hans: 

</pre>

<p>Grunden til at vi ikke vælger at montere fra roden <span class="inl_cmd">/</span>, er fordi det vil forhindre os i at komme ind i mapperne. Det er først efter <span class="inl_cmd">/srv/filer</span> at vi har givet brugerne tilladelse til at se og browse imellem mapperne.</p>

<p>Lad os se hvad der er monteret med <span class="inl_cmd">tree</span>:</p>

<code class="cmd">tree -puga --dirsfirst /mnt/netværk</code>

<pre class="ubuntu_terminal">
<span class="green1">hans@thoj-VirtualBox</span>:<span class="blue1">~</span>$ tree -puga --dirsfirst /mnt/netværk
<span class="blue1">/mnt/netværk</span>
├── [drwxrwxrwx nobody   nogroup ]  <span class="blue1">alle</span>
├── [drwxr-xr-x root     root    ]  <span class="blue1">brugere</span>
│   ├── [drwxrwx--- grethe   grethe  ]  <span class="blue1">grethe</span> [error opening dir]
│   ├── [drwxrwx--- hans     hans    ]  <span class="blue1">hans</span> 
│   └── [drwxrwx--- klaus    klaus   ]  <span class="blue1">klaus</span> [error opening dir]
└── [drwxr-xr-x root     root    ]  <span class="blue1">grupper</span>
    ├── [drwxrwx--- root     familie ]  <span class="blue1">familie</span>
    └── [drwxrwx--- root     parents ]  <span class="blue1">parents</span>

8 directories, 0 files
</pre>

<p>Læg mærke til fejlmeddelelsen <span class="inl_cmd">[error opening dir]</span>. Den kommer de steder hvor bruger <span class="inl_cmd">hans</span> ikke har adgang. Hvis jeg f.eks. vil se hvad der ligger i mappen <span class="inl_cmd">/mnt/netværk/bruger/grethe</span> så får jeg følgende fejl:</p>

<pre class="ubuntu_terminal">
<span class="green1">hans@thoj-VirtualBox</span>:<span class="blue1">~</span>$ ls -l /mnt/netværk/brugere/grethe/
ls: kan ikke åbne katalog '/mnt/netværk/brugere/grethe/': Adgang nægtet
</pre>

<p>I GUI ser det ud som herunder når jeg er logget ind som <span class="inl_cmd">hans</span>. Et <span class="inl_cmd">x</span> markerer at jeg ikke har adgang, og der er vist at jeg har skriverettigheder i <span class="inl_cmd">/mnt/netværk/alle</span>:</p>

<figure id="">

	<img class="p90" src="images/fildeling_NFS_shares_hans01.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<h3>Afmontering af NFS drev</h3>

<p>Man kan afmontere NFS drev på to måder. Enten ved at afmontere det man har monteret eller ved at afmontere den mappe man har monteret det i. Dvs. begge nedestående metoder kan anvendes</p>

<code class="cmd">sudo umount *IP_ADRESSE:*STI_PÅ_NFS_SERVEREN*</code>
<code class="more_cmd">sudo umount *LOKALT_MONTERINGSPUNKT*</code>

<p>Kan man ikke huske monteringspunktet kan det findes i filen <span class="inl_cmd">/etc/mtab</span> med følgende kommando</p>

<code class="cmd">cat /etc/mtab | grep nfs</code>

<p>Det som <span class="inl_cmd">grep</span> finder er tekstrengen <span class="inl_cmd">nfs</span>. Jeg har markeret de informationer som skal anvendes til afmontering med gult</p>

<pre class="ubuntu_terminal">
<span class="green1">hans@thoj-VirtualBox</span>:<span class="blue1">~</span>$ cat /etc/mtab | grep nfs
<span class="yellow">192.168.0.10:/srv/filer /mnt/netværk</span><span class="red">nfs</span>4 rw,relatime,vers=4.0,rsize=131072,wsize=131072,namlen=255,hard,proto=tcp,port=0,timeo=600,retrans=2,sec=sys,clientaddr=192.168.0.64,local_lock=none,addr=192.168.0.10 0 0
</pre>

<p>Afmonteringskommandoen bliver altså:</p>

<code class="cmd">sudo umount 192.168.0.10:/srv/filer</code>

<p>eller</p>

<code class="cmd">sudo umount /mnt/netværk</code>

<p>Vi kontrollerer det med tree:</p>

<pre class="ubuntu_terminal">
<span class="green1">hans@thoj-VirtualBox</span>:<span class="blue1">~</span>$ tree -puga --dirsfirst /mnt/netværk
<span class="blue1">/mnt/netværk</span>

0 directories, 0 files
</pre>



<h3>Monter enkelte drev</h3>

<p>Man kan også nøjes med at montere enkelte drev. Herunder monterer jeg alle de shares som <span class="inl_cmd">hans</span> har adgang til. Det gør jeg i hans egen hjemmemappe <span class="inl_cmd">~/NFS</span> efter følgende tabel. Det bølgede tegn <span class="inl_cmd">~</span> (tilde) er en notationsmåde for ens hjemmemappe.</p>

<table class="">
	<thead>
		<tr>
			<th>Lokal mappe</th>
			<th>NFS share</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td><span class="inl_cmd">~/NFS/alle</span></td>
			<td><span class="inl_cmd">192.168.0.10:/srv/filer/alle</span></td>
		</tr>
		<tr>
			<td><span class="inl_cmd">~/NFS/familie</span></td>
			<td><span class="inl_cmd">192.168.0.10:/srv/filer/grupper/familie</span></td>
		</tr>
		<tr>
			<td><span class="inl_cmd">~/NFS/parents</span></td>
			<td><span class="inl_cmd">192.168.0.10:/srv/filer/grupper/parents</span></td>
		</tr>
		<tr>
			<td><span class="inl_cmd">~/NFS/privat</span></td>
			<td><span class="inl_cmd">192.168.0.10:/srv/filer/brugere/hans</span></td>
		</tr>
	</tbody>
</table>

<ol class="">
	<li>Opret mappestruktur</li>
	
	<code class="cmd">mkdir ~/NFS</code>
	
	<code class="more_cmd">cd ~/NFS</code>
	
	<code class="more_cmd">mkdir alle familie parents privat</code>
	
	<li>tilføj NFS drev</li>
	
	<code class="cmd">sudo mount 192.168.0.10:/srv/filer/alle ~/NFS/alle</code>
	<code class="more_cmd">sudo mount 192.168.0.10:/srv/filer/grupper/familie ~/NFS/familie/</code>
	<code class="more_cmd">sudo mount 192.168.0.10:/srv/filer/grupper/parents ~/NFS/parents/</code>
	<code class="more_cmd">sudo mount 192.168.0.10:/srv/filer/brugere/hans ~/NFS/privat/</code>
</ol>

<figure id="">

	<img class="p60" src="images/fildeling_NFS_shares_hans02.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<h3>Montering ved opstart</h3>

<p>Hvis man ønsker at ens drev skal være tilgængelige fra opstart af kan man montere sine NFS drev underopstarten af computeren ved at anvende filen <span class="inl_cmd">/etc/fstab</span>. Herunder er <span class="inl_cmd">/etc/fstab</span> vist ud fra en standardinstalltion med et systemdrev og et swap-drev.</p>

<pre class="black">
# /etc/fstab: static file system information.
#
# Use 'blkid' to print the universally unique identifier for a
# device; this may be used with UUID= as a more robust way to name devices
# that works even if disks are added and removed. See fstab(5).
#
# &lt;file system&gt; &lt;mount point&gt;   &lt;type&gt;  &lt;options&gt;       &lt;dump&gt;  &lt;pass&gt;
# / was on /dev/sda1 during installation
UUID=ab212677-8172-4316-8258-3b23f3d04604 /               ext4    errors=remount-ro 0       1
# swap was on /dev/sda5 during installation
UUID=c31153ca-5efe-4880-b4cd-bfbd56e1bc3f none            swap    sw              0       0
</pre>

<p>For at få monteret alle vores drev i mappen <span class="inl_cmd">/mnt/netværk</span> skal følgende linie indsættes i bunden af <span class="inl_cmd">/etc/fstab</span>:</p>

<code class="cmd">192.168.0.10:/srv/filer /mnt/netværk nfs rsize=8192,wsize=8192,timeo=14,intr</code>

<p>Monteringsmappen skal være oprettet, så for at sikre os at den er der opretter vi den:</p>

<code class="cmd">mkdir -p /mnt/netværk</code>

<p>Indsæt linien ved hjælp af <span class="inl_cmd">nano</span>. Indsæt også en beskrivelse i en linie der starter med <span class="inl_cmd">#</span>:</p>

<code class="cmd">sudo nano /etc/fstab</code>

<pre class="black">
# /etc/fstab: static file system information.
#
# Use 'blkid' to print the universally unique identifier for a
# device; this may be used with UUID= as a more robust way to name devices
# that works even if disks are added and removed. See fstab(5).
#
# &lt;file system&gt; &lt;mount point&gt;   &lt;type&gt;  &lt;options&gt;       &lt;dump&gt;  &lt;pass&gt;
# / was on /dev/sda1 during installation
UUID=ab212677-8172-4316-8258-3b23f3d04604 /               ext4    errors=remount-ro 0       1
# swap was on /dev/sda5 during installation
UUID=c31153ca-5efe-4880-b4cd-bfbd56e1bc3f none            swap    sw              0       0


# NFS shares fra 192.168.0.10
192.168.0.10:/srv/filer /mnt/netværk nfs rsize=8192,wsize=8192,timeo=14,intr
</pre>

<p>Genstart computeren og sikr dig at NFS-drevene er monteret</p>

<code class="cmd">sudo reboot</code>

<figure id="">

	<img class="p60" src="images/fildeling_NFS_shares_hans03.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<h2>SMB</h2>

<p>Al konfiguration af SAMBA foregår i filen <span class="inl_cmd">/etc/samba/smb.conf</span>. Det er en stor fil, med mange opsætningsmuligheder. En ting man skal være opmærksoom på så snart man begynder at arbejde med Windowsnetværk er, at Windows ikke kan kende forskel på store og små bogstaver når vi snakker netværk. Der vil altså ikke være forskel på et share der hedder <span class="inl_cmd">MITshare</span> og <span class="inl_cmd">miTShAre</span>. Derudover anvender Windowsnetværk en meget begrænset tegntabel. Man kan altså heller ikke anvende <span class="inl_cmd">æ</span>, <span class="inl_cmd">ø</span> eller <span class="inl_cmd">å</span>. Det er vigtigt at man er opmærksom på dette. En god måde at skabe læsbarhed er ved at anvende en kombination af store og små bogstaver samt underscore f.eks. <span class="inl_cmd">MitShare</span> eller <span class="inl_cmd">mit_share</span>.</p>


<h3>Opsætning af SMB</h3>

<span class="afsnit">Opsætning SMB server</span>

<p></p>

<p>Installer SAMBA serveren</p>

<code class="cmd">sudo apt install samba -y</code>

<p>Hvis du i løbet af guiden kommer til at lave fejl og har brug for at lave en helt ny installation skal du anvende følgende kommando. På den måde får du igen de oprindelige konfigurationsfiler.</p>

<code class="cmd">sudo apt purge samba samba-common</code>

<span class="afsnit">Opsætning af SMB klient</span>

<p></p>

<code class="cmd">sudo apt install smbclient cifs-utils -y</code>

<h3>Konfiguration SAMBA</h3>

<ol class="">
	<li>Konfigurer <span class="inl_cmd">/etc/samba/smb.conf</span></li>
	<li>Tilføj dit share til <span class="inl_cmd">/etc/samba/smb.conf</span></li>
	<li>Opret mapperne hvor filerne skal ligge</li>
	<li>Tilføj brugere der skal kunne anvende Samba</li>
	<li>Genstart samba</li>
</ol>

<p>For at konfigurere SAMBA skal vi have åbnet filen <span class="inl_cmd">/etc/samba/smb.conf</span> på serveren:</p>

<code class="cmd">sudo nano /etc/samba/smb.conf</code>

<p>Vi skal have sat navnet på vores workgroup til <span class="inl_cmd">HOMENETWORK</span> og sat sikkerheden til <span class="inl_cmd">user</span>.</p>

<pre class="black">
[global]

## Browsing/Identification ###

# Change this to the workgroup/NT-domain name your Samba server will part of
   workgroup = HOMENETWORK <span class="red">&lt;-- Ændr denne linie</span> 

   security = user <span class="red">&lt;-- Tilføj hele denne linie</span>

</pre>

<h3>Opret brugerne</h3>

<p>Til forskel fra NFS skal brugerne oprettes i SAMBA. Brugerne behøver ikke have det samme password i SAMBA, som de har på selve computeren, men det kan gøre det noget nemmere at administrere for alle.</p>

<code class="cmd">smbpasswd -a *brugernavn*</code>

<p>I vores tilfælde bliver det altså (i root-shell):</p>

<code class="cmd">smbpasswd -a hans</code>
<code class="more_cmd">smbpasswd -a grethe</code>
<code class="more_cmd">smbpasswd -a klaus</code>

<pre class="ubuntu_terminal">
root@mainsrv:/home/thoj# smbpasswd -a hans
New SMB password:
Retype new SMB password:
Added user hans.
root@mainsrv:/home/thoj# smbpasswd -a grethe
New SMB password:
Retype new SMB password:
Added user grethe.
root@mainsrv:/home/thoj# smbpasswd -a klaus
New SMB password:
Retype new SMB password:
Added user klaus.
root@mainsrv:/home/thoj#
</pre>

<h3>Opret shares</h3>

<p>For at få adgang til filer ved hjælp af SAMBA skal man have defineret nogle shares. Det skal gøres for hver enkelt mappe vi har delt. Shares indsættes nederst i <span class="inl_cmd">/etc/samba/smb.conf</span>. Et share er opbygget efter følgende skabelon:</p>

<pre class="black">
[alle]                                    <span class="red">&lt;-- Navn på share</span>
    comment = Ubuntu File Server Share    <span class="red">&lt;-- Beskrivelse af share </span> 
    path = /srv/samba/alle                <span class="red">&lt;-- Stien til filerne </span> 
    browsable = yes                       <span class="red">&lt;-- Om man kan browse ind i den</span> 
    guest ok = yes                        <span class="red">&lt;-- Om ikke godkendte brugere kan skrive i den</span>
    read only = no                        <span class="red">&lt;-- Om man kun kan læse i den (ikke skrive)</span>
    create mask = 0755                    <span class="red">&lt;-- Hvordan filer oprettes</span>
</pre>


<span class="afsnit">Opret shares til private mapper</span>

<p>Vi skal altså have oprettet et share for hver af de private mapper.</p>

<pre class="black">
[hans_privat]
   comment = hans privat
   path = /srv/filer/brugere/hans
   browsable = yes
   guest ok = no
   read only = no
   create mask = 0700

[grethe_privat]
   comment = grethe privat
   path = /srv/filer/brugere/grethe
   browsable = yes
   guest ok = no
   read only = no
   create mask = 0700

[klaus_privat]
   comment = klaus privat
   path = /srv/filer/brugere/klaus
   browsable = yes
   guest ok = no
   read only = no
   create mask = 0700
</pre>

<span class="afsnit">Opret shares til grupperne</span>

<pre class="black">
[familie]
   comment = familie gruppen
   path = /srv/filer/grupper/familie
   browsable = yes
   guest ok = no
   read only = no
   create mask = 0770

[parents]
   comment = forældre gruppen
   path = /srv/filer/grupper/parents
   browsable = yes
   guest ok = no
   read only = no
   create mask = 0770
</pre>

<span class="afsnit">Opret share til alle</span>

<pre class="black">
[alle]
   comment = Åben for alle
   path = /srv/filer/alle
   browsable = yes
   guest ok = yes
   read only = no
   create mask = 0777
</pre>

<p>Genstart herefter SAMBA:</p>

<code class="cmd">sudo systemctl restart smbd nmbd</code>

<h3>Montering af SMB GUI</h3>

<p>En af de ting man skal vænne sig til når man arbejder med SAMBA er, at det ikke er en integreret del af systemet. Derfor er monteringsprocessen også mere omstændig. Herunder vil vi få adgang til SAMBA shares ved hjælp af Ubuntu's grafiske brugerflade.</p>

<p>Log ind med en af vores brugere (jeg har valgt <span class="inl_cmd">hans</span>) og åbn <span class="inl_cmd">Filer</span> og vælg <span class="inl_cmd">Forbind til server</span>. Her skriver du protokolnavnet efterfulgt af SAMBA-serverens IP (<span class="inl_cmd">smb://192.168.0.10</span>). Herefter vælges <span class="knap">Tilslut</span>.</p>

<figure id="">

	<img class="p70" src="images/fildeling_SMB_shares_hans01.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<p>Her får du alle delingerne fra SAMBA-serveren. </p>

<figure id="">

	<img class="p70" src="images/fildeling_SMB_shares_hans02.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<p>Vælg <span class="inl_cmd">hans_privat</span> og udfyld næste vindue med de rigtige data og vælg <span class="knap">Tilslut</span>.</p>

<figure id="">

	<img class="p70" src="images/fildeling_SMB_shares_hans03.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<p>Herefter er du inde i mappen.</p>

<figure id="">

	<img class="p70" src="images/fildeling_SMB_shares_hans04.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<p>Vælger du mappen alle bliver du ikke spurgt om password eller brugernavn, da den er åben for alle.</p>

<p>Vælger du senere en mappe der kræver dine loginoplysninger vil de blive "genbrugt" så du ikke skal indtaste dem hver gang.</p>

<h3>Montering fra kommandolinien</h3>

<p>Hvis du lagde mærke til det har vi sat alle vores shares til at være <span class="inl_cmd">browsable</span>. Det er nødvendigt hvis vi vil kunne tilgå dem ved hjælp af GUI. Vi kunne også have valgt at montere drevene direkte ved hjælp af en kommando. Herunder vil vi tilgå et sambashare direkte ved hjælp af en <span class="inl_cmd">cifs</span> kommando. Vi vil oprette mappen <span class="inl_cmd">samba</span> i hjemmemappen og deri montere vores private drev:</p>

<code class="cmd">mkdir -p ~/samba/privat</code>

<p>Herefter kan vi montere drevet direkte ved at køre nedenstående</p>

<code class="cmd">sudo mount -t cifs -o user=hans //192.168.0.10/hans_privat ~/samba/privat/</code>

<pre class="ubuntu_terminal">
<span class="green1">hans@thoj-VirtualBox</span>:<span class="blue1">~</span>$ sudo mount -t cifs -o user=hans //192.168.0.10/hans_privat ~/samba/privat/
[sudo] adgangskode for hans: 
<span class="bold">Password for hans@//192.168.0.10/hans_privat:  ******</span>
</pre>

<p>Læg mærke til at den første adgangskode er fra Ubuntusystemet der vil have dit sudo password. Anden gang er det SMB serveren der vil have dit password. Læg mærke til at der kommer en stjerne for hvert tegn du taster.</p>

<p>Det er vigtigt at huske at angive den bruger som vil bruge dette SAMBA-share. Hvis man ikke gør det vil SAMBA sætter brugeren til <span class="inl_cmd">root</span> - og den kender SAMBA ikke.</p>

<h3>Montering ved opstart</h3>

<p>For at montere et drev under opstart skal vi igennem en mere omstændig proces end ved NFS. Det skyldes at vores eget system ikke kender de passwords der hører til. Det kan absolut kun anbefales at gøre på en computer der kun anvendes af en selv.</p>

<p>Før vi starter skal vi have oprettet ens credentials fil. Læg mærke til at filen gøres skjult ved at sætte et <span class="inl_cmd">.</span> (punktum) foran den.</p>

<code class="cmd">nano ~/.smbcredentials</code>

<p>Indsæt følgende i filen</p>

<pre class="black">
username=hans
password=123qwe
</pre>

<p>Ændr herefter rettighederne på den så det kun er dig der kan se og redigere i den:</p>

<code class="cmd">chmod 600 .smbcredentials</code>

<p>Kontroller at det er gjort korrekt:</p>

<code class="cmd">ls -al | grep smb</code>

<pre class="ubuntu_terminal">
hans@thoj-VirtualBox:~$ ls -al | grep smb
-rw-------  1 hans hans   30 jul 27 21:02 .<span class="red">smb</span>credentials
</pre>

<p>Herefter indsættes følgende i <span class="inl_cmd">/etc/fstab</span></p>

<code class="cmd">//192.168.0.10/hans_privat /home/hans/samba/privat/ cifs credentials=/home/hans/.smbcredentials 0 0</code>




	
</div><!-- end: col-md-9 -->

<footer>

	<p onclick="parentNode.remove()"><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons licens" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a>Indholdet på Vidas.dk er  er licenseret under <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> og er skrevet af Thomas Jensen. (<a href="../hvem_er_jeg.html" target="_blank">Læs mere</a>)</p>

</footer>
	
	
</div><!-- end: row-fluid -->

</div> <!-- end: container-fluid -->


<!-- SCRIPT SECTION -->
<script type="text/javascript" src="../js/jquery.min.js"></script>
<script type="text/javascript" src="../js/jquery-ui.min.js"></script>
<script type="text/javascript" src="../js/jquery.tocify.min.js"></script>
<script type="text/javascript" src="../js/bootstrap.min.js"></script>

<!-- PRETTYFY-->
<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>


<!-- HIGHLIGHT -->
	<script src="../js/highlight.pack.js" type="text/javascript"></script>
	<script>hljs.initHighlightingOnLoad();</script>

<!-- MATHJAX -->
<script type="text/javascript" 
	src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  displayAlign: "left",
  displayIndent: "0em"
});
</script>


<!-- TOCIFY -->
<script>
	$(function() {var toc = $("#toc").tocify({ selectors: "h2, h3, h4" }).data("toc-tocify"); });
</script>
<!-- GOOGLE ANALYTICS -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-89933285-1', 'auto');
  ga('send', 'pageview');
</script>

</body>
</html>
