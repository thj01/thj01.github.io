<!DOCTYPE html>
<html lang="en">
<head>
  <title>Vidas.dk</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link href='http://fonts.googleapis.com/css?family=Ubuntu+Mono|Ubuntu|Ubuntu+Condensed' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/bootstrap.min.css">
  <link rel="stylesheet" href="../css/jquery-ui.min.css">
  <link rel="stylesheet" href="../css/jquery.tocify.css">
  <link rel="stylesheet" href="../css/style_new.css" />
<!-- Scripts in bottom to speed up pageload-->
 

</head>
<body>
	
	
<div class="container-fluid">

<div class="row-fluid">
	
<div class="col-sm-3">
	
	<div id="toc">
	
		<div id="toc_headline"></div>
	
	</div>

</div><!-- Start slut 1. kolonne - TOC -->
	
<div class="col-sm-9">
	
<div class="title">Kommandoer <br/>Filsystemet</div>
	
<p>Herunder får du præsenteret en række kommandoer, som giver dig mulighed for at administrere systemet, manipulere med filer, få informationer om hardware og netværk.</p>

<p>Til forskel fra Windows der bliver konfigureret ved hjælp af registreringsdatabases styres Linux af ”flade” filer, forstået på den måde at programmer bliver konfigureret ved hjælp af en eller flere tekstbaserede konfigurationsfiler. Har man lavet ændringer i en konfigurationsfil genstarter man tjenesten, som herefter indlæser og anvender den nye konfigurationsfil. Mange af kommandoerne er vist med eksempler, der er er praktisk anvendelige. </p>

<p>En af de ting der også er nyt for mange der bruger Linux er de rettigheder filerne har. Alle filer og mapper får sat læse/skrive/køre rettigheder for henholdsvis ejeren, gruppen og alle andre. <span class="inl_cmd">root</span>-brugeren (bliver også kaldt supueruser)  er dog undtaget for denne regel. <span class="inl_cmd">root</span> kan alt på en Linux computer, så derfor skal kommandoer der har med selve operativsystemet og konfigurationsfiler køres med rootbrugerens rettigheder. Man skifter til roorbrugerens rettigheder ved at køre kommandoen <span class="inl_cmd">sudo</span>. Skal man køre mange kommandoer kan man køre kommandoen <span class="inl_cmd">sudo su</span>, og ændres brugeren til <span class="inl_cmd">root</span>. I disse dokumenter har jeg valgt at vise kommandoerne uden sudo foran.</p>

<h1>Alt er filer</h1>

<p>I Linux er alt filer. En mappe er egentlig bare en fil, der henviser til en samling af filer, og hardware er præsenteret ved hjælp af en fil. F.eks. har den første partition på den første SATA disk i systemet filadressen <span class="inl_cmd">/dev/sda1</span>, den næste <span class="inl_cmd">/dev/sda2</span> osv. Selve harddisken hedder i filsystemet <span class="inl_cmd">/dev/sda</span>.</p>

<h1>Filsystemets opbygning</h1>

<p>I Linuxsystemer er alt filer og filsystemet tager udgangspunkt i roden (/) hvorfå alle mapper er monteret. Mapperne i roden af filsystemet følger <a href="https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard" target="_blank">FHS</a> (<span class="bold">F</span>ilesystem <span class="bold">H</span>ierarchy <span class="bold">S</span>tandarden) som bliver vedligeholdt af <a href="https://en.wikipedia.org/wiki/Linux_Foundation" target="_blank">Linux Foundattion</a>. Herunder er de mapper der ligger i roden i Ubuntu, med en kort forklaring om hvad de indeholder. De mapper der er markeret med fed er dem som man ofte vil støde i systemarbejde på Ubuntu.
</p>

<p>En anden stor fordel ved at anvende denne standard er, at man ikke skal bekymre sig om hvor f.eks. konfigurationsfilerne ligger. De vil altid ligge i <span class="inl_cmd">/etc</span>.</p>

<p>Herunder er et overblik over mapperne på roden og hvad de indeholder. Mapperne der er markeret med fed, er dem man oftest skal anvende når man laver systemarbejde.</p>

<table class="cmd_table">
	<tbody>
		<tr>
			<td>/</td>
			<td>Roden – det nederste niveau</td>
		</tr>
		<tr>
			<td>/bin</td>
			<td>Binære filer - Her ligger mange af systemkommandoerne f,eks. ls og cd</td>
		</tr>
		<tr>
			<td>/boot</td>
			<td>Opstartsfiler f.eks. Linux kernen</td>
		</tr>
		<tr>
			<td>/dev</td>
			<td>Devices - f.eks. harddiske (sda1) og netkort (eth0)</td>
		</tr>
		<tr>
			<td><span class="bold">/etc</span></td>
			<td><span class="bold">Konfigurationsfiler til systemet.</span></td>
		</tr>
		<tr>
			<td><span class="bold">/home</span></td>
			<td><span class="bold">Brugernes hjemmemapper</span></td>
		</tr>
		<tr>
			<td>/lib</td>
			<td>32bits programbiblioteker (libraries) der bliver delt af computerens programmer</td>
		</tr>
		<tr>
			<td>/lib64</td>
			<td>64 bits programbiblioteker</td>
		</tr>
		<tr>
			<td>/lost+found</td>
			<td>Fundne datafragmenter der ikke hører til nogle steder</td>
		</tr>
		<tr>
			<td>/media</td>
			<td>Mappen hvor transportable enheder monteres. F.eks. USB-og CD/DVD-drev.</td>
		</tr>
		<tr>
			<td>/mnt</td>
			<td>En mappe hvor man montere midlertidige drev. F.eks. netværksdrev </td>
		</tr>
		<tr>
			<td>/opt</td>
			<td>Installerede programmer der ikke administreres af apt</td>
		</tr>
		<tr>
			<td>/proc</td>
			<td>Processer - det er et real-time filsystem, der er placeret i RAM.</td>
		</tr>
		<tr>
			<td>/root</td>
			<td>Superbrugerens hjemmemappe</td>
		</tr>
		<tr>
			<td>/run</td>
			<td>En mappe der er placeret i RAM - her lægges tmp filer</td>
		</tr>
		<tr>
			<td>/sbin</td>
			<td>root's binære filer -</td>
		</tr>
		<tr>
			<td><span class="bold">/srv</span></td>
			<td><span class="bold">Servermappen. Heri lægges alle filer der deles med andre</span></td>
		</tr>
		<tr>
			<td>/sys</td>
			<td>En mappe placeret i RAM, der viser informationer om hardware</td>
		</tr>		
		<tr>
			<td>/tmp</td>
			<td>En mappe til midlertidige filer</td>
		</tr>
		<tr>
			<td>/usr</td>
			<td>Brugernes værktøjs- og programmappe. Indeholder indstillinger til de installerede programmer</td>
		</tr>
		<tr>
			<td><span class="bold">/var</span></td>
			<td><span class="bold">Variable filer - filer der ændrer sig ofte f.eks. logfiler. Det er også i denne mappe at man finder Apaches www mappe.</span></td>
		</tr>		
	</tbody>
</table>

<h1>Mappestruktur</h1>

<p>Herunder er mappestrukturen for <span class="inl_cmd">/home</span> vist.</p>

<pre class="black">
/
└── home
	└── tj
		├── Billeder
		├── bin
		├── Dokumenter
		├── Hentet
		├── Musik
		├── Offentligt
		├── public_html
		│   ├── css
		│   ├── images
		│   └── js
		├── Skabeloner
		├── Skrivebord
		├── Videoklip
</pre>

<p>Stien til mappen <span class="inl_cmd">Hentet</span> er: <span class="inl_cmd">/home/tj/Hentet</span>.</p>

<ol start="0" class="">
	<li>niveau - / (roden)</li>
	<li>niveau - home</li>
	<li>niveau - tj</li>
	<li>niveau - Hentet</li>
</ol>

<h1>Filer</h1>

<p>Linux anvender modsat windows både de store og små bogstaver i alfabetet. Derfor vil der under Linux være forskel på filerne <span class="inl_cmd">data</span> og <span class="inl_cmd">Data</span> og brugerne <span class="inl_cmd">tj</span> og <span class="inl_cmd">Tj</span>.</p>

<p>I Linux er der 3 grundlæggende rettigheder vi kan give filer og mapper: read, write og execute (læse, skrive og udføre).</p>

<table class="">
	<thead>
		<tr>
			<th>Rettighed</th>
			<th>Forklaring</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>r - <b>R</b>ead (læse)</td>
			<td>Man kan se indholdet af filen.</td>
		</tr>
		<tr>
			<td>w - <b>W</b>rite (skrive)</td>
			<td>Man kan ændre på indholdet i filen. Hvis der ikke er læse-rettigheder kan man ikke se indholdet, men man kan stadig ændre i den. Det kan f.eks. være logfiler som der skal skrives i, men som kun <span class="inl_cmd">root</span> skal læse i</td>
		</tr>
		<tr>
			<td>x - e<b>X</b>ecute (udførelse)</td>
			<td>Filen kan tolkes som et program og derfor køres af operativsystemet.</td>
		</tr>
	</tbody>
</table>

<p>Det er ved hjælp af disse rettigheder at filens egenskaber er styret. I windows kan programmer genkendes ved deres efternavn f.eks. <span class="inl_cmd">.exe</span> eller <span class="inl_cmd">.msi</span>. I Linux bliver en tekstfil til et program, ved at man tilføjer execute rettighedet. </p>

<p>Man anvender også efternavne på filer i Linux, for at de bliver læsbare for brugeren. Det gælder f.eks for tekstfiler som: <span class="inl_cmd">*.pdf</span> og <span class="inl_cmd">*.odt</span>, grafikformater som <span class="inl_cmd">*.jpg</span> og <span class="inl_cmd">*.png</span> og til at kende forskellige filtyper fra hinanden f.eks: <span class="inl_cmd">.sh</span> til shellscript og <span class="inl_cmd">.py</span> til Python-filer.</p>

<h1>Navigation</h1>

<p>For at navigere rundt i og orientere sig i filsystemet anvender man følgende kommandoer:</p>

<ul class="disc">
	<li><span class="inl_cmd">cd</span> - change directory</li>
	<li><span class="inl_cmd">ls</span> - list</li>
	<li><span class="inl_cmd">pwd</span> - print working directory</li>
	<li><span class="inl_cmd">tree</span> – viser filerne i træstruktur </li>
</ul>

<p>Herunder angives eksempler med kommandoerne:</p>

<h1><span class="inl_cmd">cd</span></h1>

<table class="cmd_table">
	<thead>
		<tr>
			<th></th>
			<th></th>
		</tr>
	</thead>
		<tbody>
		<tr>
			<td>cd /etc/apt</td>
			<td>Skift til mappen <span class="inl_cmd">/etc/apt</span></td>
		</tr>
		<tr>
			<td>cd /</td>
			<td>Skift til roden af filstrukturen</td>
		</tr>
		<tr>
			<td>cd ..</td>
			<td>Gå et mappeniveau ned</td>
		</tr>
		<tr>
			<td>cd ~</td>
			<td>Skift til din hjemmemappe</td>
		</tr>
	</tbody>
</table>

<h1><span class="inl_cmd">ls</span></h1>

<table class="cmd_table">
	<thead>
		<tr>
			<th></th>
			<th></th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>ls</td>
			<td>Viser fil- og mappenavne</td>
		</tr>
		<tr>
			<td>ls -l</td>
			<td>udvidet visning (rettigheder,ejerskab, størrelse, dato)</td>
		</tr>
		<tr>
			<td>ls -al</td>
			<td>Udvidet visning med de skjulte filer/mapper</td>
		</tr>
		<tr>
			<td>ls -al /etc/log</td>
			<td>Udvidet visning af <span class="inl_cmd">/etc/log</span></td>
		</tr>
		<tr>
			<td>ls -d</td>
			<td>Vis kun filer</td>
		</tr>
		<tr>
			<td>ls -d .*</td>
			<td>Vis kun skjulte filer</td>
		</tr>
		<tr>
			<td>ls -d */</td>
			<td>Viser kun mapper</td>
		</tr>
	</tbody>
</table>

<h1><span class="inl_cmd">pwd</span></h1>

<table class="cmd_table">
	<thead>
		<tr>
			<th></th>
			<th></th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>pwd</td>
			<td>Viser hvor man er i filsystemet</td>
		</tr>
	</tbody>
</table>

<h1><span class="inl_cmd">tree</span></h1>

<p><span class="inl_cmd">tree</span> viser indholdet af en mappe i en træstruktur. Det følger ikke med som standard og skal derfor installeres først</p>

<code class="cmd">sudo apt install tree -y</code>

<p>Det kan f.eks. bruges til vise filstrukturen som herunder <span class="inl_cmd">tree /usr -d -L 1</span></p>

<pre class="ubuntu_terminal">
<span class="green1">thoj@thoj-VirtualBox</span>:<span class="blue1">~</span>$ tree /usr -d -L 1	
<span class="blue1">/usr</span>
├── <span class="blue1">bin</span>
├── <span class="blue1">games</span>
├── <span class="blue1">include</span>
├── <span class="blue1">lib</span>
├── <span class="blue1">local</span>
├── <span class="blue1">sbin</span>
├── <span class="blue1">share</span>
└── <span class="blue1">src</span>

9 directories
</pre>

<p>Kommandoen udvider ls ved at man kan vise det i flere niveauer. Prøv f.eks. at køre kommandoen:</p>

<code class="cmd">tree /usr -d -L 2</code>

<table class="cmd_table">
	<thead>
		<tr>
			<th></th>
			<th></th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>tree</td>
			<td>Viser filerne i træ struktur i den lokale mappe</td>
		</tr>
		<tr>
			<td>tree /usr</td>
			<td>Viser træstrukturen i mappen <span class="inl_cmd">/usr</span></td>
		</tr>
		<tr>
			<td>tree /usr -d</td>
			<td>Viser kun mapper i <span class="inl_cmd">/usr</span></td>
		</tr>
		<tr>
			<td>tree /usr -d -L 1</td>
			<td>Viser mapperne i <span class="inl_cmd">/usr</span> i et niveauer</td>
		</tr>
		<tr>
			<td>tree /usr -du -L 1</td>
			<td>Viser mapperne i <span class="inl_cmd">/usr</span> i et niveauer med ejerskab</td>
		</tr>
		<tr>
			<td>tree /usr --du -L 1</td>
			<td>Viser mapperne i <span class="inl_cmd">/usr</span> i et niveauer med filstørrelser</td>
		</tr>
		<tr>
			<td>tree /usr --dirsfirst -L 1</td>
			<td>Viser alle filerne i <span class="inl_cmd">/usr</span> og sætter mapperne først.</td>
		</tr>
		<tr>
			<td>tree /usr -pua --dirsfirst</td>
			<td>Viser filerne med rettigheder og ejer og sætter mapperne først</td>
		</tr>
	</tbody>
</table>

<h1>Størrelse af filer</h1>

<h2><span class="inl_cmd">du</span> - Disk usage</h2>

<p>For at se hvor meget filerne i en folder fylder anvendes <span class="inl_cmd">du</span>.</p>

<code class="cmd">du -hs ~</code>

<p>Herunder kan du se output fra mit eget system.</p>

<pre class="ubuntu_terminal">
<span class="green1">thoj@thoj-VirtualBox</span>:<span class="blue1">~</span>$ du -hs ~
2,6M	/home/thoj
</pre>

<h2><span class="inl_cmd">df</span></h2>

<p>For at se den brugte plads på en partition anvendes kommandoen <span class="inl_cmd">df</span></p>

<code class="cmd">df -h *partition*</code>

<p><span class="inl_cmd">-h</span> gør at, størrelsen vises i MB og GB i stedet for Kb.</p>

<table class="cmd_table">
	<thead>
		<tr>
			<th></th>
			<th></th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>df -h</td>
			<td>Viser brugt plads på alle mountede partitioner i GB</td>
		</tr>
		<tr>
			<td>df -h /</td>
			<td>Viser brugt plads på <span class="inl_cmd">/</span></td>
		</tr>
		<tr>
			<td>df -h -t ext4 </td>
			<td>Viser informationer om partitioner der er formateret med ext4</td>
		</tr>
		<tr>
			<td>df -h -x tmpfs </td>
			<td>Viser informationer om partitioner der <span class="inl_cmd">IKKE</span> er formateret med tmpfs</td>
		</tr>
		<tr>
			<td>df -hT /</td>
			<td>Viser også hvilket filsystem der anvendes</td>
		</tr>
	</tbody>
</table>

<p>Læg mærke til at <span class="inl_cmd">df</span> viser pladsforbrug på den valgte partition, hvis du vælger en mappe derpå.</p>

<pre class="ubuntu_terminal">
<span class="green1">thoj@thoj-VirtualBox</span>:<span class="blue1">~</span>$ df -h -t ext4
Filsystem      Størr Brugt  Tilb Brug% Monteret på
/dev/sda1        91G  5,3G   81G    7% /
/dev/sdb1        99G   60M   94G    1% /data
</pre>



	
</div><!-- end: col-md-9 -->

<footer>

	<p><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons licens" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a>Indholdet på Vidas.dk er licenseret under <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> og er skrevet af Thomas Jensen. (<a href="../hvem_er_jeg.html" target="_blank">Læs mere</a>)</p>

</footer>
	
	
</div><!-- end: row-fluid -->

</div> <!-- end: container-fluid -->


<!-- SCRIPT SECTION -->
<script type="text/javascript" src="../js/jquery.min.js"></script>
<script type="text/javascript" src="../js/jquery-ui.min.js"></script>
<script type="text/javascript" src="../js/jquery.tocify.min.js"></script>
<script type="text/javascript" src="../js/bootstrap.min.js"></script>

<!-- PRETTYFY-->
<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>


<!-- HIGHLIGHT -->
	<script src="../js/highlight.pack.js" type="text/javascript"></script>
	<script>hljs.initHighlightingOnLoad();</script>

<!-- MATHJAX -->
<script type="text/javascript" 
	src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  displayAlign: "left",
  displayIndent: "0em"
});
</script>


<!-- TOCIFY -->
<script>
	$(function() {var toc = $("#toc").tocify({ selectors: "h1, h2, h3, h4" }).data("toc-tocify"); });
</script>
<!-- GOOGLE ANALYTICS -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-89933285-1', 'auto');
  ga('send', 'pageview');
</script>

</body>
</html>
