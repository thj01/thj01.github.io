<!DOCTYPE html>
<html lang="da">
<head>
  <title>Filsystemet</title>
  <link rel="icon" href="../images/favicon.png">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link href='http://fonts.googleapis.com/css?family=Ubuntu+Mono|Ubuntu|Ubuntu+Condensed' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/bootstrap.min.css">
  <link rel="stylesheet" href="../css/jquery-ui.min.css">
  <link rel="stylesheet" href="../css/jquery.tocify.css">
  <link rel="stylesheet" href="../css/style_new.css" />
<!-- Scripts in bottom to speed up pageload-->
 

</head>
<body>
	
	
<div class="container-fluid">

<div class="row-fluid">
	
<div class="col-xs-3">
	
	<nav>
		
		<div id="toc">
		
			<div id="toc_headline"></div>
		
		</div>
		
	</nav>

</div><!-- Start slut 1. kolonne - TOC -->
	
<div class="col-xs-9">
	
<h1>Terminalen: Filsystemet</h1>
	
<p>Herunder får du præsenteret en række kommandoer, som giver dig mulighed for at administrere systemet, manipulere med filer, få informationer om hardware og netværk.</p>

<p>Til forskel fra Windows der bliver konfigureret ved hjælp af registreringsdatabases styres Linux af ”flade” filer, forstået på den måde at programmer bliver konfigureret ved hjælp af en eller flere tekstbaserede konfigurationsfiler. Har man lavet ændringer i en konfigurationsfil genstarter man tjenesten, som herefter indlæser og anvender den nye konfigurationsfil. Mange af kommandoerne er vist med eksempler, der er er praktisk anvendelige. </p>

<p>En af de ting der også er nyt for mange der bruger Linux er de rettigheder filerne har. Alle filer og mapper får sat læse/skrive/køre rettigheder for henholdsvis ejeren, gruppen og alle andre. <span class="inl_cmd">root</span>-brugeren (bliver også kaldt supueruser)  er dog undtaget for denne regel. <span class="inl_cmd">root</span> kan alt på en Linux computer, så derfor skal kommandoer der har med selve operativsystemet og konfigurationsfiler køres med rootbrugerens rettigheder. Man skifter til roorbrugerens rettigheder ved at køre kommandoen <span class="inl_cmd">sudo</span>. Skal man køre mange kommandoer kan man køre kommandoen <span class="inl_cmd">sudo su</span>, og ændres brugeren til <span class="inl_cmd">root</span>. I disse dokumenter har jeg valgt at vise kommandoerne uden sudo foran.</p>

<h2>Alt er filer</h2>

<p>I Linux er alt filer. En mappe er egentlig bare en fil, der henviser til en samling af filer, og hardware er præsenteret ved hjælp af en fil. F.eks. har den første partition på den første SATA disk i systemet filadressen <span class="inl_cmd">/dev/sda1</span>, den næste <span class="inl_cmd">/dev/sda2</span> osv. Selve harddisken hedder i filsystemet <span class="inl_cmd">/dev/sda</span>.</p>

<h2>Filsystemets opbygning</h2>

<p>I Linuxsystemer er alt filer og filsystemet tager udgangspunkt i roden (/) hvorfå alle mapper er monteret. Mapperne i roden af filsystemet følger <a href="https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard" target="_blank">FHS</a> (<span class="bold">F</span>ilesystem <span class="bold">H</span>ierarchy <span class="bold">S</span>tandarden) som bliver vedligeholdt af <a href="https://en.wikipedia.org/wiki/Linux_Foundation" target="_blank">Linux Foundattion</a>. Herunder er de mapper der ligger i roden i Ubuntu, med en kort forklaring om hvad de indeholder. De mapper der er markeret med fed er dem som man ofte vil støde i systemarbejde på Ubuntu.
</p>

<p>En anden stor fordel ved at anvende denne standard er, at man ikke skal bekymre sig om hvor f.eks. konfigurationsfilerne ligger. De vil altid ligge i <span class="inl_cmd">/etc</span>.</p>

<p>Herunder er et overblik over mapperne på roden og hvad de indeholder. Mapperne der er markeret med fed, er dem man oftest skal anvende når man laver systemarbejde.</p>

<table class="cmd_table">
	<thead>
		<tr>
			<th scope="col">Placering</th>
			<th scope="col">Indhold</th>
		</tr>
	</thead>	
	<tbody>
		<tr>
			<td>/</td>
			<td>Roden – det nederste niveau</td>
		</tr>
		<tr>
			<td>/bin</td>
			<td>Binære filer - Her ligger mange af systemkommandoerne f,eks. ls og cd</td>
		</tr>
		<tr>
			<td>/boot</td>
			<td>Opstartsfiler f.eks. Linux kernen</td>
		</tr>
		<tr>
			<td>/dev</td>
			<td>Devices - f.eks. harddiske (sda1) og netkort (eth0)</td>
		</tr>
		<tr>
			<td><span class="bold">/etc</span></td>
			<td><span class="bold">Konfigurationsfiler til systemet.</span></td>
		</tr>
		<tr>
			<td><span class="bold">/home</span></td>
			<td><span class="bold">Brugernes hjemmemapper</span></td>
		</tr>
		<tr>
			<td>/lib</td>
			<td>32bits programbiblioteker (libraries) der bliver delt af computerens programmer</td>
		</tr>
		<tr>
			<td>/lib64</td>
			<td>64 bits programbiblioteker</td>
		</tr>
		<tr>
			<td>/lost+found</td>
			<td>Fundne datafragmenter der ikke hører til nogle steder</td>
		</tr>
		<tr>
			<td>/media</td>
			<td>Mappen hvor transportable enheder monteres. F.eks. USB-og CD/DVD-drev.</td>
		</tr>
		<tr>
			<td>/mnt</td>
			<td>En mappe hvor man montere midlertidige drev. F.eks. netværksdrev </td>
		</tr>
		<tr>
			<td>/opt</td>
			<td>Installerede programmer der ikke administreres af apt</td>
		</tr>
		<tr>
			<td>/proc</td>
			<td>Processer - det er et real-time filsystem, der er placeret i RAM.</td>
		</tr>
		<tr>
			<td>/root</td>
			<td>Superbrugerens hjemmemappe</td>
		</tr>
		<tr>
			<td>/run</td>
			<td>En mappe der er placeret i RAM - her lægges tmp filer</td>
		</tr>
		<tr>
			<td>/sbin</td>
			<td>root's binære filer -</td>
		</tr>
		<tr>
			<td><span class="bold">/srv</span></td>
			<td><span class="bold">Servermappen. Heri lægges alle filer der deles med andre</span></td>
		</tr>
		<tr>
			<td>/sys</td>
			<td>En mappe placeret i RAM, der viser informationer om hardware</td>
		</tr>		
		<tr>
			<td>/tmp</td>
			<td>En mappe til midlertidige filer</td>
		</tr>
		<tr>
			<td>/usr</td>
			<td>Brugernes værktøjs- og programmappe. Indeholder indstillinger til de installerede programmer</td>
		</tr>
		<tr>
			<td><span class="bold">/var</span></td>
			<td><span class="bold">Variable filer - filer der ændrer sig ofte f.eks. logfiler. Det er også i denne mappe at man finder Apaches www mappe.</span></td>
		</tr>		
	</tbody>
</table>

<h2>Mappestruktur</h2>

<p>Herunder er mappestrukturen for <span class="inl_cmd">/home</span>.</p>

<pre class="black">
/
└── home
	└── tj
		├── Billeder
		├── Dokumenter
		├── Hentet
		├── Musik
		├── Offentligt
		├── Skabeloner
		├── Skrivebord
		├── Videoklip
</pre>

<p>Stien til mappen Hentet er: <em>/home/tj/Hentet</em>.</p>

<ol start="0" class="">
	<li>niveau - / (roden)</li>
	<li>niveau - home</li>
	<li>niveau - tj</li>
	<li>niveau - Hentet</li>
</ol>

<h2>Filer</h2>

<p>Linux anvender modsat windows både de store og små bogstaver i alfabetet. Derfor vil der under Linux være forskel på filerne <em>data</em> og <em>Data</em> og brugerne <em>tj</em> og <em>Tj</em>.</p>

<p>I Linux er der 3 grundlæggende rettigheder vi kan give filer og mapper: read, write og execute (læse, skrive og udføre).</p>

<ul class="disc">
	<li>Læse - man kan se indholdet.</li>
	<li>Skrive - man kan ændre indholdet</li>
	<li>Eksekvere - kan kan køre filen som et progam</li>
</ul>


<p>Det er ved hjælp af disse rettigheder at filens egenskaber er styret. I windows kan programmer genkendes ved deres efternavn f.eks. <em>.exe</em> eller <em>.msi</em>. I Linux bliver en tekstfil til et program, ved at man tilføjer execute rettighedet. </p>

<p>Man anvender også efternavne på filer i Linux, for at de bliver læsbare for brugeren. Det gælder f.eks for tekstfiler som: <em>*.pdf</em> og <em>*.odt</em>, grafikformater som <em>*.jpg</em> og <em>*.png</em> og til at kende forskellige filtyper fra hinanden f.eks: <em>.sh</em> til shellscript og <em>.py</em> til Python-filer.</p>

<h2>Navigation</h2>

<p>For at navigere rundt i og orientere sig i filsystemet anvender man følgende kommandoer:</p>

<ul class="disc">
	<li><em>cd</em> - change directory</li>
	<li><em>ls</em> - list</li>
	<li><em>pwd</em> - print working directory</li>
	<li><em>tree</em> - viser filerne i træstruktur </li>
</ul>

<p>Herunder angives eksempler med kommandoerne:</p>

<h2>cd - change directory</h2>


<ul class="disc">
	<li><code class="bash">cd /etc/apt</code> - Skift til mappen <em>/etc/apt</em></li>
	<li><code class="bash">cd /</code> - Skift til roden af filstrukturen</li>
	<li><code class="bash">cd ..</code> - Gå et mappeniveau ned</li>
	<li><code class="bash">cd ~</code> - Skift til din hjemmemappe</li>
</ul>


<h2>ls - list</h2>

<ul class="disc">
	<li><code class="bash">li</code> - Viser filer og mappenavne</li>
	<li><code class="bash">ls -l</code> - Udvidet visning (rettigheder, ejerskab, størrelse og dato)</li>
	<li><code class="bash">ls -al</code> - Udvidet visning med skulte filer/mapper</li>
	<li><code class="bash">ls -al /etc/log</code> - Udvidet visning af <em>/etc/log</em></li>
	<li><code class="bash">ls -d</code> - viser kun filer</li>
	<li><code class="bash">ls -d .*</code> - viser kun skjulte</li>
	<li><code class="bash">ls -d */</code> - viser kun skjulte mapper</li>
</ul>



<h2>pwd - print working directory</h2>

<ul class="disc">
<li><code class="bash">pwd</code> - viser hvor man er i filsystemet</li></ul>

<h2>tree</h2>

<p><code class="bash">tree</code> viser indholdet af en mappe i en træstruktur. Det følger ikke med som standard og skal derfor installeres.</p>

<code class="bash">sudo apt install tree -y</code>

<p>Det kan f.eks. bruges til vise filstrukturen, f.eks: <code class="bash">tree /usr -d -L 1</code></p>

<pre class="ubuntu_terminal">
<span class="green1">thoj@thoj-VirtualBox</span>:<span class="blue1">~</span>$ tree /usr -d -L 1	
<span class="blue1">/usr</span>
├── <span class="blue1">bin</span>
├── <span class="blue1">games</span>
├── <span class="blue1">include</span>
├── <span class="blue1">lib</span>
├── <span class="blue1">local</span>
├── <span class="blue1">sbin</span>
├── <span class="blue1">share</span>
└── <span class="blue1">src</span>

9 directories
</pre>

<p>Kommandoen udvider ls ved at man kan vise det i flere niveauer. Prøv f.eks. at køre kommandoen: <code class="bash">tree /usr -d -L 2</code></p>

<ul class="disc">
	<li><code class="bash">tree</code> - Viser filerne i træstruktur</li>
	<li><code class="bash">tree /usr</code> - Viser filerne i mappen <em>/usr</em></li>
	<li><code class="bash">tree /usr -d</code> - Viser kun mapper i <em>/usr</em></li>
	<li><code class="bash">tree /usr -d -L 1</code> - Viser kun mapper i <em>/usr</em> i et niveau</li>
	<li><code class="bash">tree /usr -du -L 1</code> - Viser kun mapper i <em>/usr</em> i et niveau med ejerskab</li>
	<li><code class="bash">tree /usr -du -L 1</code> - Viser kun mapper i <em>/usr</em> i et niveau med filstørrelse</li>
	<li><code class="bash">tree /usr -dirsfirst -L 1</code> - Viser alle filer i <em>/usr</em> med mapperne først</li>
	<li><code class="bash">tree /usr -pua -dirsfirst</code> - viser filerne med rettigheder og ejer ... og sætter mapperne først</li>

</ul>

<h2>Størrelse af filer</h2>

<h3>du - Disk usage</h3>

<p>For at se hvor meget filerne i en folder fylder anvendes <code class="bash">du</code>.</p>

<code class="cmd">du -hs ~</code>

<p>Herunder kan du se output fra mit eget system.</p>

<pre class="ubuntu_terminal">
<span class="green1">thoj@thoj-VirtualBox</span>:<span class="blue1">~</span>$ du -hs ~
2,6M	/home/thoj
</pre>

<h3>df - disk free</h3>

<p>For at se den brugte plads på en partition anvendes kommandoen <code class="bash">df</code></p>

<code class="cmd">df -h *partition*</code>

<p><span class="inl_cmd">-h</span> gør at, størrelsen vises i MB og GB i stedet for Kb.</p>

<ul class="disc">
	<li><code class="bash">df -h</code> - Viser brugt plads på alle monterede partitioner</li>
	<li><code class="bash">df -h /</code> - Viser brugt plads på <em>/</em></li>
	<li><code class="bash">df -h -t ext4</code> - Viser informationer om partitioner der er formateret med ext4</li>
	<li><code class="bash">df -h -x tmpfs</code> - Viser informationer om partitioner der <em>IKKE</em> er formateret med tmpfs</li>
	<li><code class="bash">df -hT</code> - Viser anvendt filsystem</li>
	
	
</ul>


<p>Læg mærke til at <code class="bash">df</code> viser pladsforbrug på den valgte partition, hvis du vælger en mappe derpå.</p>

<pre class="ubuntu_terminal">
<span class="green1">thoj@thoj-VirtualBox</span>:<span class="blue1">~</span>$ df -h -t ext4
Filsystem      Størr Brugt  Tilb Brug% Monteret på
/dev/sda1        91G  5,3G   81G    7% /
/dev/sdb1        99G   60M   94G    1% /data
</pre>



	
</div><!-- end: col-md-9 -->

<footer>

	<p onclick="parentNode.remove()"><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons licens" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a>Indholdet på Vidas.dk er licenseret under <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> og er skrevet af Thomas Jensen. (<a href="../hvem_er_jeg.html" target="_blank">Læs mere</a>)</p>

</footer>
	
	
</div><!-- end: row-fluid -->

</div> <!-- end: container-fluid -->


<!-- SCRIPT SECTION -->
<script type="text/javascript" src="../js/jquery.min.js"></script>
<script type="text/javascript" src="../js/jquery-ui.min.js"></script>
<script type="text/javascript" src="../js/jquery.tocify.min.js"></script>
<script type="text/javascript" src="../js/bootstrap.min.js"></script>

<!-- PRETTYFY-->
<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>


<!-- HIGHLIGHT -->
	<script src="../js/highlight.pack.js" type="text/javascript"></script>
	<script>hljs.initHighlightingOnLoad();</script>

<!-- MATHJAX -->
<script type="text/javascript" 
	src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  displayAlign: "left",
  displayIndent: "0em"
});
</script>


<!-- TOCIFY -->
<script>
	$(function() {var toc = $("#toc").tocify({ selectors: "h2, h3, h4" }).data("toc-tocify"); });
</script>
<!-- GOOGLE ANALYTICS -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-89933285-1', 'auto');
  ga('send', 'pageview');
</script>

</body>
</html>
