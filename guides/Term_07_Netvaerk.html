<!DOCTYPE html>

<head>
	
	<meta charset="UTF-8" lang="da"/>

	<title>Linux Kommandoer - Thomas Jensen</title>

	<link rel="stylesheet" href="../css/styles/docco.css" />

	<link rel="stylesheet" href="../css/style.css" />

	<link href='http://fonts.googleapis.com/css?family=Ubuntu+Mono|Ubuntu|Ubuntu+Condensed' rel='stylesheet' type='text/css'>
	
	<script src="../js/toc2.js" type="text/javascript"></script>
	<script src="https://code.jquery.com/jquery-2.2.2.js"></script>
	<script src="../js/highlight.pack.js" type="text/javascript"></script>
	<script>hljs.initHighlightingOnLoad();</script>

</head>

<!-- 

code converter : http://www.freebits.co.uk/convert-html-code-to-text.html 

-->



<html>

<body onload="generateTOC(document.getElementById('toc'));">

<footer id="license"></footer>

	<script> $( "#license" ).load( "./license.html" ); </script>
	
<div id="toggle" ><span id="indholds_ikon"></span>

	<div id="toc">
		<div id="toc_title"></div>
	</div>
</div>
	

<div class="title">Kommandoer</div>
	

<h1>Netværks værktøjer</h1>

<p>I dette kapitel vil det blive vist hvordan man kan analysere sit netværk.</p>

<h2><span class="inl_cmd">ifconfig</span></h2>

<p><span class="inl_cmd">ifconfig</span> anvendes til at vise netværkskonfigurationen, men kan også anvendes til at konfigurere netværkskort. Herunder er kommandoen blevet kørt "ren".</p>

<code class="cmd">ifconfig</code>

<pre class="ubuntu_terminal">
<span class="green1">thoj@thoj-VirtualBox</span>:<span class="blue1">~</span>$ifconfig
enp1s0    Link encap:Ethernet  HWaddr a0:8c:fd:XX:XX:XX  
          UP BROADCAST MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:524 errors:0 dropped:0 overruns:0 frame:0
          TX packets:524 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1 
          RX bytes:64917 (64.9 KB)  TX bytes:64917 (64.9 KB)

wlp2s0    Link encap:Ethernet  HWaddr ac:2b:6e:XX:XX:XX  
<span class="red">          inet addr:192.168.0.77  Bcast:192.168.0.255  Mask:255.255.255.0</span>
          inet6 addr: fe80::c5cb:44c8:aeac:2770/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:11419 errors:0 dropped:0 overruns:0 frame:0
          TX packets:7378 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:11252135 (11.2 MB)  TX bytes:1464678 (1.4 MB)
</pre>

<table class="">
	<thead>
		<tr>
			<th>Netkort</th>
			<th>Forklaring</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>enp1s0</td>
			<td>Det kablede netværkskort. På denne computer er det ikke forbundet.</td>
		</tr>
		<tr>
			<td>Io</td>
			<td>Dette netkort kaldes <span class="inl_cmd">local loopback</span>. Det er et virtuelt netværkskort som Ubuntu bruger som sit interne netværk. Hvis du f.eks. har installeret en webserver på din egen maskine kan du tilgå det med adressen: <span class="inl_cmd">127.0.0.1</span></td>
		</tr>
		<tr>
			<td>wlp2s0</td>
			<td>Computerens WiFi netkort. I det tilfælde har det fået adressen 192.168.0.77 (markeret med rødt</td>
		</tr>
	</tbody>
</table>

<span class="afsnit">HWadr - MAC-adresser</span>

<p>Læg mærke til at netværkskortene har en <span class="inl_cmd">HWaddr</span>. Det kaldes en MAC adresse. Denne adresse er netværkskortets fysiske adresse og er unik. Mac-adressen bruges til at indentificere netværkskortet på nettet og denne information bliver altid medsendt..MAC-adressen fortæller hvem der har produceret kortet og hvilket kort det er (P = Producenten / S = serienummer):</p>

<code class="cmd">PP:PP:PP:SS:SS:SS</code>

<p>Jeg har sat X'er ind på de 3 sidste pladser. Det skyldes at jeg ikke ønsker at andre skal kende mine netværkskorts fysiske denne adresser. Men af mine data kan man læse at <span class="inl_cmd">enp1s0</span> (<span class="inl_cmd">A0:8C:FD</span>) er produceceret af Hewlett Packard  og <span class="inl_cmd">wlp2s0</span> (<span class="inl_cmd">ac:2b:6e</span>) af Intel</p>

<h2>Konfigurer netværkskortet</h2>

<p>Ved hjælp af <span class="inl_cmd">ifconfig</span> kan man også konfigurere netværkskortet f.eks:</p>

<code class="cmd">sudo ifconfig eth0 10.0.2.30/24</code>

<p>Med denne kommando angives <span class="inl_cmd"> 10.0.2.30/24</span> som netværkskortets nye IP-adresse. Reelt fylder Linux resten af informationerne ud med standard mulighederne. Således vil følgende give følgende opstilling:</p>

<table class="">
	<thead>
		<tr>
			<th></th>
			<th></th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>IP</td>
			<td>10.0.2.30</td>
		</tr>
		<tr>
			<td>Netmaske</td>
			<td>255.255.255.0 (CIDR 24)</td>
		</tr>
		<tr>
			<td>Broadcast</td>
			<td>10.0.2.255</td>
		</tr>
	</tbody>
</table>

<p>Man kan også udspecificere kommandoen med følgende:</p>

<code class="cmd">ifconfig eth0 10.0.2.30 netmask 255.255.255.0 broadcast 10.0.2.255</code>

<h2><span class="inl_cmd">ping</span></h2>

<p><span class="inl_cmd">ping</span> bruges til at undersøge om der er forbindelse mellem din og en anden computer, og hvor lang svartiden er. Kommandoen kører lige til der trykkes <kbd>Ctrl</kbd>+<kbd>c</kbd>.</p>

<code class="cmd">ping dr.dk</code>

<pre class="ubuntu_terminal">
<span class="green1">thoj@thoj-VirtualBox</span>:<span class="blue1">~</span>$ ping dr.dk
PING dr.dk (159.20.6.38) 56(84) bytes of data.
64 bytes from 159.20.6.38: icmp_seq=1 ttl=63 time=12.8 ms
64 bytes from 159.20.6.38: icmp_seq=2 ttl=63 time=111 ms
64 bytes from 159.20.6.38: icmp_seq=3 ttl=63 time=13.1 ms
64 bytes from 159.20.6.38: icmp_seq=4 ttl=63 time=13.6 ms
64 bytes from 159.20.6.38: icmp_seq=5 ttl=63 time=14.1 ms
^C
--- dr.dk ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4006ms
rtt min/avg/max/mdev = 12.842/33.051/111.476/39.215 ms
</pre>

<p>Efter kommandoen er kørt vises en opsumering</p>

<p>Andre eksempler med ping kommandoen:</p>

<table class="cmd_table">
	<thead>
		<tr>
			<th></th>
			<th></th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>ping -c 4 dr.dk</td>
			<td>Kører ping i alt 4 gange</td>
		</tr>
		<tr>
			<td>ping -i 2 dr.dk</td>
			<td>der pinges med 2 sekunders mellemrum</td>
		</tr>
		<tr>
			<td>ping -s 504 dr.dk</td>
			<td>Der pinges med 512 (504+8) bytes i stedet for 64. Der skal angives 8 mindre end man ønsker, da 8 bytes bliver tilføjet (header data) </td>
		</tr>
	</tbody>
</table>


<p>man-page: <span class="inl_cmd">ping</span>
<a href="http://manpages.ubuntu.com/manpages/trusty/en/man8/ping.8.html" target="_blank">
http://manpages.ubuntu.com/manpages/trusty/en/man8/ping.8.html</a></p>

<h2>Find din DNS-server</h2>

<p>DNS serveren sørger for at man kan anvende navne på nettet i stedeet for IP-adresser. For at finde den DNS computeren er tilstluttet anvendes følgende kommando: </p>

<code class="cmd">nmcli dev show | grep DNS</code>

<pre class="ubuntu_terminal">
<span class="green1">thoj@thoj-VirtualBox</span>:<span class="blue1">~</span>$ nmcli dev show | grep DNS
IP4.<span class="red">DNS</span>[1]:                             193.162.153.164
IP4.<span class="red">DNS</span>[2]:                             194.239.134.83
</pre>

<p>Nu kan vi undersøge de to DNS adresser ved hjælp af <span class="inl_cmd">nslookup</span></p>

<code class="cmd">nslookup 193.162.153.164</code>

<p>De interessante oplysninger er markeret med rødt.</p>

<pre class="ubuntu_terminal">
<span class="green1">thoj@thoj-VirtualBox</span>:<span class="blue1">~</span>$ nslookup 193.162.153.164
Server:		127.0.1.1
Address:	127.0.1.1#53

Non-authoritative answer:
164.153.162.193.in-addr.arpa	name = ns3.inet.tele.dk.

Authoritative answers can be found from:
153.162.193.in-addr.arpa	nameserver = ns01.tdchosting.dk.
153.162.193.in-addr.arpa	nameserver = ns02.tdchosting.dk.
<span class="red">ns01.tdchosting.dk	internet address = 62.243.74.198
ns02.tdchosting.dk	internet address = 92.43.121.6</span>
</pre>

<p>man-page: <span class="inl_cmd">nslookup</span>
<a href="http://manpages.ubuntu.com/manpages/trusty/en/man1/nslookup.1.html" target="_blank">http://manpages.ubuntu.com/manpages/trusty/en/man1/nslookup.1.html</a></p>


<h2><span class="inl_cmd">mtr</span></h2>

<p><span class="inl_cmd">mtr</span> er et program der kombinerer traceroute og ping, dvs. at det både viser hoppene mellem din computer og målcomputeren samtidig med at den viser tidsintervallerne. Installer det med følgende kommando:</p>

<p>Kommandoen er:</p>

<code class="cmd">mtr -rw www.dr.dk</code>

<p>Ved at indsætte <span class="inl_cmd">-rw</span> i kommandoen venter <span class="inl_cmd">mtr</span> med at lave et output til det har kørt 10 omgange. </p>

<pre class="ubuntu_terminal">
<span class="green1">thoj@thoj-VirtualBox</span>:<span class="blue1">~</span>$ mtr -rw dr.dk
Start: Sun Jul 10 16:58:20 2016
HOST: tj-HP-ProBook-450-G3            Loss%   Snt   Last   Avg  Best  Wrst StDev
  1.|-- 192.168.0.1                      0.0%    10    1.5   1.9   1.2   4.1   0.7
  2.|-- 10.29.0.1                        0.0%    10    9.4  18.5   8.3 101.7  29.2
  3.|-- ae11-100.odnqe10.dk.ip.tdc.net   0.0%    10    8.5   9.3   8.0  12.1   1.0
  4.|-- ae1-0.alb2nqp7.dk.ip.tdc.net     0.0%    10   11.9  11.7  10.7  12.9   0.5
  5.|-- 194.19.204.22                    0.0%    10   13.2  14.7  12.9  17.4   1.3
  6.|-- 0xc213cf12.linknet.dk.telia.net  0.0%    10   44.5  20.2  12.1  44.5  10.7
  7.|-- 159.20.6.38                      0.0%    10   28.6  20.9  12.4  67.4  17.0

</pre>

<p>Kører man kommandoen uden <span class="inl_cmd">-rw</span>, så vil kommandoen fortsætte med at køre indtil den bliver afbrudt med <kbd>Ctrl</kbd>+<kbd>c</kbd>. </p>

<p>Køres kommandoen med <span class="inl_cmd">n</span> som en ekstra option, så vises IP-adresserne fremfor de DNS-opløste navne:</p>

<pre class="ubuntu_terminal">
<span class="green1">thoj@thoj-VirtualBox</span>:<span class="blue1">~</span>$ mtr -rwn dr.dk
Start: Sun Jul 10 17:02:55 2016
HOST: tj-HP-ProBook-450-G3 Loss%   Snt   Last   Avg  Best  Wrst StDev
  1.|-- 192.168.0.1           0.0%    10    1.7   1.9   1.0   5.1   1.1
  2.|-- 10.29.0.1             0.0%    10    8.6   9.1   7.5  12.5   1.3
  3.|-- 94.189.51.70          0.0%    10   12.4  10.6   8.4  16.6   2.3
  4.|-- 83.88.21.83           0.0%    10   13.6  16.9  10.5  58.7  14.9
  5.|-- 194.19.204.22         0.0%    10   14.8  14.5  12.6  17.6   1.3
  6.|-- 194.19.207.18         0.0%    10   14.5  14.3  12.8  16.0   0.7
  7.|-- 159.20.6.38           0.0%    10   13.1  14.3  12.6  20.3   2.1
</pre>

<p>man-page : <span class="inl_cmd">mtr</span>
<a href="http://manpages.ubuntu.com/manpages/trusty/en/man8/mtr.8.html" target="_blank">
http://manpages.ubuntu.com/manpages/trusty/en/man8/mtr.8.html</a></p>

<h1><span class="inl_cmd">nmap</span> skanning af netværk</h1>

<p><span class="inl_cmd">nmap</span> installeres med følgende kommandoen.</p>

<code class="cmd">apt install nmap -y</code>

<p><span class="inl_cmd">nmap</span> anvendes til at scanne netværk for åbne porte f.eks:</p>

<code class="cmd">nmap dr.dk</code>

<pre class="ubuntu_terminal">
<span class="green1">thoj@thoj-VirtualBox</span>:<span class="blue1">~</span>$ nmap dr.dk

Starting Nmap 7.01 ( https://nmap.org ) at 2016-07-10 17:08 CEST
Nmap scan report for dr.dk (159.20.6.38)
Host is up (0.018s latency).
Not shown: 998 filtered ports
PORT    STATE SERVICE
80/tcp  open  http
443/tcp open  https

Nmap done: 1 IP address (1 host up) scanned in 7.48 seconds
</pre>

<p>Her kan vi se at <span class="inl_cmd">dr.dk</span> har 2 porte åbne: <span class="inl_cmd">80</span> g <span class="inl_cmd">443</span>. Det er de to porte som anvendes til hjemmesider, så de har sikkerheden i top.</p>

<p>En skanning på min lokale computer giver nedestående og viser at min computer ikke har nogle porte åbne.</p>

<pre class="ubuntu_terminal">
<span class="green1">thoj@thoj-VirtualBox</span>:<span class="blue1">~</span>$ nmap localhost

Starting Nmap 7.01 ( https://nmap.org ) at 2016-07-10 17:10 CEST
Nmap scan report for localhost (127.0.0.1)
Host is up (0.000039s latency).
All 1000 scanned ports on localhost (127.0.0.1) are closed

Nmap done: 1 IP address (1 host up) scanned in 0.04 seconds
</pre>

<span class="afsnit">Skanning af hele eller dele af subnet</span>

<p>For at skanne en del af ens subnet angiver man de adresser man ønsker der skal skannes. Her adresserne fra <span class="inl_cmd">192.168.0.1</span> - <span class="inl_cmd">192.168.0.49</span></p>

<pre class="ubuntu_terminal">
<span class="green1">thoj@thoj-VirtualBox</span>:<span class="blue1">~</span>$  nmap 192.168.0.1-49

Starting Nmap 7.01 ( https://nmap.org ) at 2016-07-10 17:16 CEST
Nmap scan report for 192.168.0.1
Host is up (0.016s latency).
Not shown: 996 filtered ports
PORT     STATE  SERVICE
23/tcp   closed telnet
80/tcp   open   http
1900/tcp closed upnp
8080/tcp closed http-proxy

Nmap scan report for 192.168.0.10
Host is up (0.0026s latency).
Not shown: 996 closed ports
PORT    STATE SERVICE
21/tcp  open  ftp
22/tcp  open  ssh
80/tcp  open  http
443/tcp open  https

Nmap done: 49 IP addresses (2 hosts up) scanned in 5.59 seconds
</pre>

<p>Det man ser herover er routeren (<span class="inl_cmd">192.168.0.1</span>) og en lokal server</p>

<p>På samme måde kan man skanne et helt netværk</p>

<code class="cmd">nmap 192.168.0.0/24</code>

<span class="afsnit">Finde aktive computere</span>

<code class="cmd">nmap 192.168.0.0/24 | grep "Nmap scan report"</code>

<p>Nmap kan også anvendes til at finde alle aktive computere på et subnet med kommandoen:</p>

<code class="cmd">nmap 10.0.2.0/24 | grep "Nmap scan report"</code>

<pre class="ubuntu_terminal">
<span class="green1">thoj@thoj-VirtualBox</span>:<span class="blue1">~</span>$ nmap 192.168.0.0/24 | grep "Nmap scan report"
<span class="red">Nmap scan report</span> for 192.168.0.1
<span class="red">Nmap scan report</span> for 192.168.0.10
<span class="red">Nmap scan report</span> for 192.168.0.77
</pre>

<p>man-page: <span class="inl_cmd">nmap</span>
<a href="http://manpages.ubuntu.com/manpages/trusty/en/man1/nmap.1.html" target="_blank">
http://manpages.ubuntu.com/manpages/trusty/en/man1/nmap.1.html</a></p>

<h1>Iproute 2 suite</h1>

<p>Under udarbejdelse</p>

<table class="cmd_table">
	<thead>
		<tr>
			<th></th>
			<th></th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>ip addr</td>
			<td></td>
		</tr>
		<tr>
			<td>ip alias</td>
			<td></td>
		</tr>
		<tr>
			<td>ip link</td>
			<td></td>
		</tr>
		<tr>
			<td>ip route</td>
			<td></td>
		</tr>
		<tr>
			<td>ip neigh</td>
			<td></td>
		</tr>
		<tr>
			<td>ip tunnel</td>
			<td></td>
		</tr>
		<tr>
			<td>ip maddr</td>
			<td></td>
		</tr>
		<tr>
			<td>ss</td>
			<td></td>
		</tr>
	</tbody>
</table>

<h2>ip addr</h2>

<code class="cmd">ip addr show eth0</code>




<p></p>
<p></p>
<p></p>
<p></p>

	</body>

</html>
