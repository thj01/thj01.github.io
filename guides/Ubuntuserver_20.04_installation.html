<!DOCTYPE html>
<html lang="da">
<head>
  <title>Ubuntu server</title>
  <link rel="icon" href="../images/favicon.png">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link href='http://fonts.googleapis.com/css?family=Ubuntu+Mono|Ubuntu|Ubuntu+Condensed' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.3/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery.tocify/1.9.0/stylesheets/jquery.tocify.min.css">
  <link rel="stylesheet" href="../css/style_new.css" /><!DOCTYPE html>
<html lang="da">
<head>
  <title>Ubuntu server</title>
  <link rel="icon" href="../images/favicon.png">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link href='http://fonts.googleapis.com/css?family=Ubuntu+Mono|Ubuntu|Ubuntu+Condensed' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.3/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery.tocify/1.9.0/stylesheets/jquery.tocify.min.css">
  <link rel="stylesheet" href="../css/style_new.css" />
<!-- Scripts in bottom to speed up pageload-->
 

</head>
<body>
	
	
<div class="container-fluid">

<div class="row">
	
<div class="col-sm-3">
	
	<nav>
		
		<div id="toc">
		
			<div id="toc_headline"></div>
		
		</div>
		
	</nav>

</div><!-- Start slut 1. kolonne - TOC -->
	
<div class="col-sm-9">
	
<h1>Ubuntuserver 20.04</h1>

<p>Her vil vi installere Ubuntuserver 20.04.</p>

<div class="alert">
	
	<p>Vil du teste på en virtuel maskine kan du finde en guide til at gøre det i VirtualBox her: <a href="Virtualbox_til_ubuntuserverguide.html" target="_blank">Virtualbox_til_ubuntuserverguide.html</a></p>
	
</div>

<h2>Om installationsprogrammet</h2>

<p>Du har kun adgang til tasteturet når du installerer en Ubuntuserver.</p>

<p>Piletasterne bruges til at bevæge sig frem og tilbage i menuerne </p>

<p><kbd><b>&larr;</b></kbd>, <kbd>&rarr;</kbd>, <kbd>&uarr;</kbd>, <kbd>&darr;</kbd></p>

<p>For at hoppe imellem menuerne på en side anvender du <kbd>Tab</kbd>.</p>

<p>Hvis du vil gå en menu tilbage trykker du <kbd>Shift</kbd>+<kbd>Tab</kbd>.</p>

<p>For at vælge bruger du enten <kbd>Enter</kbd> eller <kbd>Mellemrum</kbd>.</p>

<h3>Vælg sprog</h3>

<p>Vælg <em>English</em></p>

<figure id="">

	<img class="p90" src="images/VirtualBox_Ubuntuserver20.04_install_sprog.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<h3>Opdater installationsprogrammet</h3>

<p>Da vi bruger en LTS udgave kører vi videre med den vi har.</p>

<p>Vælg <em>Continue without updating</em>.</p>

<figure id="">

	<img class="p90" src="images/VirtualBox_Ubuntuserver20.04_install_opdater_installer.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<h3>Tastur og sprog</h3>

<p>Ændr Layout til: <em>Danish</em></p>

<p>Vælg <em>Done</em></p>		

<figure id="">

	<img class="p90" src="images/VirtualBox_Ubuntuserver20.04_install_tastetur_sprog.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<h3>Netværks opsætning</h3>

<p>Som standard bliver serveren installeret med DHCP, men her vil vi give serveren en statisk IP-adresse, så vi senere kan tilgå den ved hjælp af <em>SSH</em> og browser.</p>

<figure id="">

	<img class="p90" src="images/VirtualBox_Ubuntuserver20.04_install_netværk_01.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<p>Installationen vil give min computer IP-adressen: <em>192.168.87.141/24</em>, men jeg vil have den på en fast IP, nemlig <em>192.168.87.10/24</em></p>

<p>Af den tildelte netværksadresse ved jeg følgende om mit netværk:</p>

<ul class="disc">
	<li>Subnet:  <em>192.168.87.0/24</em></li>
	<li>Adress:  <em>192.168.87.10</em></li>
	<li>Gateway: <em>192.168.87.1</em></li>
</ul>

<p>I det nedestående skal du ændre IP-adresserne til dine indstillinger.</p>

<p>Fremgangsmåden til at ændre adressen er:</p>

<ol class="">
	<li>Vælg netværkskortet. Det starter med <em>enpxxx</em>
	
		<br/><br/>
		
		<img class="" src="images/VirtualBox_Ubuntuserver20.04_install_netværk_02.png" alt="_" title="_" />

	</li>
	
	<li>Vælg <em>Edit IPv4</em>
	
		<br/><br/>
		
		<img class="" src="images/VirtualBox_Ubuntuserver20.04_install_netværk_03.png" alt="_" title="_" />

	</li>
	
		<li>Ændr <em>Automatic (DHCP)</em> til <em>Manual</em>
	
		<br/><br/>
		
		<img class="" src="images/VirtualBox_Ubuntuserver20.04_install_netværk_04.png" alt="_" title="_" />

	</li>
	
		</li>
	
		<li>Indtast følgende. <strong>Husk at ændre til dit netværks ip-adresser</strong>.
		
		<ol class="">
			<li>Subnet:  <em>192.168.87.0/24</em></li>
			<li>Adress:  <em>192.168.87.10</em></li>
			<li>Gateway: <em>192.168.87.1</em></li>
			<li>Name servers: <em>8.8.8.8, 8.8.4.4</em></li>
			<li>Search domains efterlades tom	</li>
		</ol>
		
		<img class="" src="images/VirtualBox_Ubuntuserver20.04_install_netværk_05.png" alt="_" title="_" />

	</li>

</ol>

<p>Når du har lavet ændringer vælger du <em>Done</em>.</p>

<figure id="">

	<img class="p90" src="images/VirtualBox_Ubuntuserver20.04_install_netværk_06.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<div class="alert">
	
	<p>Du kan læse mere om netværk her:  <a href="network.html" target="_blank">network.html</a></p>
	
</div>

<h3>Proxy opsætning</h3>

<p>Her skal du ikke gøre noget. Vælg <em>Done</em>.</p>

<figure id="">

	<img class="p90" src="images/VirtualBox_Ubuntuserver20.04_install_proxy.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<h3>Arkivopsætning</h3>

<p>Her skal du også beholde standardopsætningen. Vælg <em>Done</em>.</p>

<figure id="">

	<img class="p90" src="images/VirtualBox_Ubuntuserver20.04_install_arkivopsætning.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<h3>Opsætning af harddiske</h3>

<p>Det er min anbefaling at du bruger standardopsætningen. Vælg <em>Done</em>.</p>

<figure id="">

	<img class="p90" src="images/VirtualBox_Ubuntuserver20.04_install_harddisk_01.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<p>Gå ned til <em>USED DEVICES</em> og vælg <em>ubuntu-lv</em></p>

<figure id="">

	<img class="p90" src="images/VirtualBox_Ubuntuserver20.04_install_harddisk_02.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<p>Vælg <em>Edit</em></p>

<figure id="">

	<img class="p90" src="images/VirtualBox_Ubuntuserver20.04_install_harddisk_03.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<p>Sæt <em>Size</em> til værdien <em>30G</em> (30 Gigabyte). Grunden til at vi ændrer det er, at 30 Gigabyte er mere end rigeligt til systemdrevet. Resten af harddiskpladsen i systemet konfigurerer vi senere.</p>

<figure id="">

	<img class="p90" src="images/VirtualBox_Ubuntuserver20.04_install_harddisk_04.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<p>Vælg <em>Done</em>.</p>

<figure id="">

	<img class="p90" src="images/VirtualBox_Ubuntuserver20.04_install_harddisk_05.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<p>Svar <em>Continue</em> til <em>Confirm destructive action</em>. Det er en advarsel om, at du overskriver din harddisken og at indholdet forsvinder.</p>

<figure id="">

	<img class="p90" src="images/VirtualBox_Ubuntuserver20.04_install_harddisk_06.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<h3>Profilopsætning</h3>

<p>Her skal du angive dit navn, serverens navn og dine logindata. Herunder kan du se mine</p>

<ul class="disc">
	<li>Your name: skriv dit navn</li>
	<li>Your server's name: server1</li>	
	<li>Pick a username: tj</li>
	<li>Chose a password: Lav et password</li>
	<li>Confirmyou passeword: : Gentag password</li>
</ul>

<figure id="">

	<img class="p90" src="images/VirtualBox_Ubuntuserver20.04_install_profilopsætning.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<p>Vælg <em>Done</em>.</p>

<h3>SSH setup</h3>

<p>Du installere SSH. Vælg <em>Done</em>.</p>

<figure id="">

	<img class="p90" src="images/VirtualBox_Ubuntuserver20.04_install_SSH.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<h3>Server Snaps</h3>

<p>Vi vælger 2 pakker:</p>

<ul class="disc">
	<li><em>docker - Docker container runtime</em></li>
	<li><em>wormhole - get things from one computer to another, safely</em></li>
</ul>

<p>Vælg <em>Done</em>.</p>

<figure id="">

	<img class="p90" src="images/VirtualBox_Ubuntuserver20.04_install_snaps.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<h3>Installering</h3>

<p>Nu går installationen igang </p>

<figure id="">

	<img class="p90" src="images/VirtualBox_Ubuntuserver20.04_install_installation_igang.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<p>Lad installationen køre indtil <em>Cancel update and reboot</em> er blevet erstattet af <em>Reboot</em>. På den måde har serveren fået alle sikkerhedsopdateringer når installationen er færdig.</p>	

<figure id="">

	<img class="p90" src="images/VirtualBox_Ubuntuserver20.04_install_reboot.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<div class="alert">
	
	<p>Fra nu af bruger vi kun SSH adgang til serveren.</p>
	
	<p>Første opstarte tager lidt tid fordi serveren konfigurerer sig selv. Så vær lidt tålmodig</p>
	
</div>

<h2>Første opstart</h2>

<p>Login med ssh fra din desktop. Du finder terminalen på din computer på følgende måde:</p>

<details>

	<summary>Hvor finder jeg terminalen/kommandolinien)</summary>

	<p>Du finder terminalen på din computer på følgende måde:</p>

	<ul class="disc">
		<li>På Ubuntu: brug genvejstasterne <kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>t</kbd></li>
		<li>På Windows: søg efter <em>cmd</em></li>
		<li>På Mac: søg efter <em>Terminal</em></li>
	</ul>

</details>

<pre><code>ssh tj@192.168.87.10</code></pre>

<p>Du kan udelade <em>tj@</em> hvis du har samme brugernavn på din egen computer.</p>

<p>Ved første login skal du bekræfte serverens "fingerprint". På den måde kan du senere se, hvis det ikke er den rigtige computer du får adgang til.</p>

<samp class="term"><span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~</span>$ ssh tj@192.168.87.10
The authenticity of host '192.168.87.10 (192.168.87.10)' can't be established.
ECDSA key fingerprint is SHA256:/A0xosRn19z7Q56g3mJ3QHKD/s2e2OcBge14z0LoR7A.
Are you sure you want to continue connecting (yes/no/[fingerprint])?</samp>

<p>Skriv <em>yes</em></p>

<samp class="term">Warning: Permanently added '192.168.87.10' (ECDSA) to the list of known hosts.
tj@192.168.87.10's password: </samp>

<p>Skriv dit password (der bliver ikke vist stjerner eller andre tegn når du taster).</p>

<samp class="term">Welcome to Ubuntu 20.04.1 LTS (GNU/Linux 5.4.0-58-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  System information as of Mon 14 Dec 2020 09:56:07 AM UTC

  System load:  0.0                Processes:                115
  Usage of /:   15.1% of 29.40GB   Users logged in:          0
  Memory usage: 14%                IPv4 address for docker0: 172.17.0.1
  Swap usage:   0%                 IPv4 address for enp0s3:  192.168.87.10


83 updates can be installed immediately.
0 of these updates are security updates.
To see these additional updates run: apt list --upgradable


Last login: Mon Dec 14 09:45:09 2020 from 192.168.87.133
To run a command as administrator (user "root"), use "sudo &lt;command>".
See "man sudo_root" for details.
<span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~</span>$ </samp>	


<div class="alert">
	
	<p>Hvis dder ikke har været nogle problemer med at logge ind kan du nu pille tastetur og skærm af din server.</p>

</div>

<h3>Almindelige opdateringer</h3>

<p>Vi starter med at opdatere serveren - da det kun var sikkerhedsopdateringer installationen lavede.</p>

<p>Kør følgende kommando:</p>

<pre><code>sudo apt update -y && sudo apt upgrade -y</code></pre>

<h3>Fjern gamle kerner</h3>

<p>Du kan fjerne gamle linuxkerner (Ældre versioner af Linux) ved at køre følgende kommando:</p>

<pre><code>sudo apt purge $(dpkg -l linux-{image,headers}-"[0-9]*" | awk '/ii/{print $2}' | grep -ve $(uname -r | sed -r 's/-[a-z]+//') | sed ':a;N;$!ba;s/\n/ /g')</code></pre>

<h3>Opstart af Firewall</h3>

<p>Da vi gerne vil styre adgangen til serveren skal vi starte <em>ufw</em>, som er Ubuntus standard firewall.</p>

<p>I første omgang åbner vi for OpenSSH, så vi ikke mister forbindelsen når vi starter firewall'en.</p>

<pre><code class="">sudo ufw allow OpenSSH</code></pre>

<p>Nu starter vi <em>ufw</em></p>

<pre><code>sudo ufw enable</code></pre>

<samp>Command may disrupt existing ssh connections. Proceed with operation (y|n)?</samp>

<p>Svar <kbd>y</kbd>.</p>

<samp>Firewall is active and enabled on system startup</samp>

<p>Tjek hvad din firewall tillader</p>


	
<!--
<pre><code>sudo ufw status</code></pre>
-->

<pre><code>sudo ufw status</code></pre>


<samp>Status: active

To                         Action      From
--                         ------      ----
OpenSSH                    ALLOW       Anywhere                  
OpenSSH (v6)               ALLOW       Anywhere (v6)</samp>

<h2>Tjek at alt virker</h2>

<p>Log af serveren</p>

<pre><code>exit</code></pre>

<samp>logout
Connection to 192.168.87.10 closed.</samp>

<p>Og login igen</p>

<pre><code>ssh tj@192.168.87.10</code></pre>

<samp>tj@192.168.87.10's password: 
Welcome to Ubuntu 20.04.1 LTS (GNU/Linux 5.4.0-65-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  System information as of Wed 27 Jan 2021 09:41:25 AM UTC

  System load:  0.01             Processes:                153
  Usage of /:   0.2% of 2.95TB   Users logged in:          0
  Memory usage: 5%               IPv4 address for docker0: 172.17.0.1
  Swap usage:   0%               IPv4 address for enp1s0:  192.168.87.10
  Temperature:  40.0 C


0 updates can be installed immediately.
0 of these updates are security updates.


*** System restart required ***
Last login: Wed Jan 27 09:16:14 2021 from 192.168.87.131
<span class="terminal_green">tj@server1</span>:<span class="terminal_tilde">~</span>$ </samp>

<p>Hvis linien <em>*** System restart required ***</em> er der skal du genstarte din server</p>

<pre><code>sudo reboot</code></pre>

<p>Login over SSH, og tjek at alt er som det skal være.</p>

<p>Tillykke. din server er nu klar.</p>





		
</div><!	-- end: col-md-9 -->

<footer class="fixed-bottom text-center bg-light">

	<p onclick="parentNode.remove()"><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons licens" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a>Indholdet på Vidas.dk er  er licenseret under <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> og er skrevet af Thomas Jensen. (<a href="../hvem_er_jeg.html" target="_blank">Læs mere</a>)</p>

</footer>
	
	
</div><!-- end: row -->

</div> <!-- end: container-fluid -->


<!-- SCRIPT SECTION -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tocify/1.9.0/javascripts/jquery.tocify.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.3/js/bootstrap.min.js"></script>



<!-- HIGHLIGHT -->
	<script src="../js/highlight.pack.js" type="text/javascript"></script>
	<script>hljs.initHighlightingOnLoad();</script>

<!-- MATHJAX -->
<script type="text/javascript" 
	src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  displayAlign: "left",
  displayIndent: "0em"
});
</script>


<!-- TOCIFY -->
<script>
	$(function() {var toc = $("#toc").tocify({ selectors: "h2, h3, h4" }).data("toc-tocify"); });
</script>
<!-- GOOGLE ANALYTICS -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-89933285-1', 'auto');
  ga('send', 'pageview');
</script>

</body>
</html>
