<!DOCTYPE html>
<html lang="da">
<head>
  <title>Vidas.dk</title>
  <link rel="icon" href="../images/favicon.png">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link href='http://fonts.googleapis.com/css?family=Ubuntu+Mono|Ubuntu|Ubuntu+Condensed' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/bootstrap.min.css">
  <link rel="stylesheet" href="../css/jquery-ui.min.css">
  <link rel="stylesheet" href="../css/jquery.tocify.css">
  <link rel="stylesheet" href="../css/style_new.css" />
<!-- Scripts in bottom to speed up pageload-->
 

</head>
<body>
	
	
<div class="container-fluid">

<div class="row-fluid">
	
<div class="col-sm-3">
	
	<div id="toc">
	
		<div id="toc_headline"></div>
	
	</div>

</div><!-- Start slut 1. kolonne - TOC -->
	
<div class="col-sm-9">
	
<div class="title">Kommandoer <br/>Rettigheder</div>

<table class="">
	<thead>
		<tr>
			<th>Rettighed</th>
			<th>Forklaring</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>r - <b>R</b>ead (læse)</td>
			<td>Man kan tse indholdet af filen.</td>
		</tr>
		<tr>
			<td>w - <b>W</b>rite (skrive)</td>
			<td>Man kan ændre på indholdet i filen. Hvis der ikke er læse-rettigheder kan man ikke se indholdet, men man kan stadig ændre i den. Det kan f.eks. være logfiler som der skal skrives i, men som kun <span class="inl_cmd">root</span> skal læse i</td>
		</tr>
		<tr>
			<td>x - e<b>X</b>ecute (udførelse)</td>
			<td>Filen kan tolkes som et program og derfor køres af operativsystemet.</td>
		</tr>
	</tbody>
</table>

<p>Ved hjælp af disse 3 parametre styres alle filer, mapper og enheder på computere. Lad os kigge på et eksempel nemlig <span class="inl_cmd">/etc/passwd</span> som er den fil der styrer brugerne på Linux .</p>

<code class="cmd">ls -al /etc/passwd</code>

<pre class="ubuntu_terminal">
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ ls -al /etc/passwd
-rw-r--r-- 1 root root 2013 mar 16 20:05 /etc/passwd
</pre>

<p>Den linie giver os alle de informationer om rettigheder vi har behov for</p>

<table class="cmd_table">
	<tbody>
		<tr>
			<td>-rw-r--r--  </td>
			<td>Oversigt over filens retttigheder</td>
		</tr>
		<tr>
			<td>1</td>
			<td>Antal hardlinks * (se note nedenfor)</td>
		</tr>
		<tr>
			<td>root root</td>
			<td>Brugeren og gruppen</td>
		</tr>
		<tr>
			<td>2013</td>
			<td>Filens størrelse</td>
		</tr>
		<tr>
			<td>mar 16 20:05</td>
			<td>tidsstempel</td>
		</tr>
		<tr>
			<td>/etc/passwd</td>
			<td>Filens navn</td>
		</tr>
	</tbody>
</table>

<p>* I Linux kan man have <span class="inl_cmd">hard</span> og <span class="inl_cmd">symbolic</span> links. Forskellen er, at hvis man sletter et hardlink, så forsvinder filen. Hvis man sletter et softlink, så er det kun henvisningen til filen man sletter. Filen er altså uskadt</p>

<p>Læg mærke til, at der både findes en bruger og en gruppe der hedder <span class="inl_cmd">root</span>. Alle brugere har som standard både tildelt en gruppe med deres egen navn. Det betyder at alle brugere har mulighed for at tilføje brugere til deres grupper så de selv kan tildele rettigheder til filer og mapper.</p>

<h1>Aflæsning af rettigheder</h1>

<table class="centreret">
	<thead>
		<tr>
			<th>Filtype</th>
			<th colspan="3">Bruger</th>
			<th colspan="3">Gruppe</th>
			<th colspan="3">Alle</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>type</td>
			<td>read</td>
			<td>write</td>
			<td>execute</td>
			<td>read</td>
			<td>write</td>
			<td>execute</td>
			<td>read</td>
			<td>write</td>
			<td>execute</td>			
		</tr>
		<tr>
			<td>-</td>
			<td>r</td>
			<td>w</td>
			<td>-</td>
			<td>r</td>
			<td>-</td>
			<td>-</td>
			<td>r</td>
			<td>-</td>
			<td>-</td>			
		</tr>

	</tbody>
</table>

<p>Vi kan altså sige om denne fil at brugeren er <span class="inl_cmd">root</span>, som må læse og skrive i filen. Alle andre (gruppe og alle). De er nødvendigt for alle at kunne læse denne fil, da det er den der administrere adgangen til systemet. Kigger vi ind i filen kan vise hvad den har at sige om vores bruger, her <span class="inl_cmd">tj</span>. Da alle har ret til at læse i filen kan jeg kommandoen den som mig selv.</p>

<pre class="ubuntu_terminal">
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">/home</span>$ cat /etc/passwd | grep tj
<span class="red">tj</span>:x:1000:1000:Thomas Jensen,,,:/home/<span class="red">tj</span>:/bin/bash
</pre>

<p>Den linie fortæller os om vores bruger, hvilket bruger- og gruppe id man har, ens hjemmemappe og hvilken kommandofortolker vi har adgang til. Det lille x i starten henviser til vores kodeord, som er lagret i filen <span class="inl_cmd">/etc/shadow</span>.</p>

<p>Et andet eksempel er vores hjemmemappe, i dette tilfælde <span class="inl_cmd">/home/tj</span>. Vi kan se rettighedern ved at køre : <span class="inl_cmd">ls -al /home</span>.</p>

<pre class="ubuntu_terminal">
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ ls -al /home
totalt 12
drwxr-xr-x  3 root root 4096 maj 30 13:33 .
drwxr-xr-x 24 root root 4096 maj 30 13:51 ..
drwxr-xr-x 16 tj   tj   4096 jun  2 09:47 tj
</span>
</pre>

<h1>Superbrugeren</h1>

<p><span class="inl_cmd">root</span>-brugeren er ikke underlagt de rettigheder der er sat på på de enkelte filer. <span class="inl_cmd">root</span> kan og skal kunne alt. At have <span class="inl_cmd">root</span>-rettigheder på et system handler ikke kun om at man er god til Linux, men forudsætter også at man gør sig overvejelser om hvad man bruger disse rettigheder til.</p>

<p>Den danske grundlov (<a href="http://grundloven.dk/" target="_blank">http://grundloven.dk/</a>) siger følgende:</p>

<blockquote>
	
	<p><span class="bold">§ 72</span></p>

	<p>Boligen er ukrænkelig. Husundersøgelser, beslaglæggelse og undersøgelse af breve og andre papirer samt brud på post-, telegraf- og telefonhemmeligheden må, hvor ingen lov hjemler en særegen undtaglse, alene ske efter en retskendelse. 
	</p>
	
</blockquote>

<p>Grundloven har gode retningslinier til superbrugeren. Du må alt der ikke krænker brugeren, dvs. hjælpe brugeren med at løse sin opgave. Det gælder også selvom brugeren er dit barn, din partner eller kollega. Brugerens personlige filer og mapper er vedkommendes ejendom, og hvis man som administrator <span class="inl_cmd">krænker</span> dem ved at læse dem - så er det et grundlovsbrud! </p>

<p>Den eneste undtagelse er, når brugeren har fået at vide at det ikke er brugerens private ejendom, f.eks. hvor en virksomhed eller skole stiller ressourcen til rådighed for dig.</p>

<h1><span class="inl_cmd">chown</span></h1>

<p><span class="inl_cmd">chown</span> (<span class="inl_cmd">change owner</span>) bruges til, at ændre ejer og gruppe på en fil eller en mappe.</p>

<p>Det er kun <span class="inl_cmd">root</span> der kan ændre ejerskab på filer.</p>

<span class="afsnit">Ændring af ejerskab</span>

<code class="cmd">sudo chown tj ~/testfil</code>

<span class="afsnit">Ændring af ejerskab og gruppe</span>

<p>Herunder ændres filen til at have ejeren og gruppen tj</p>

<code class="cmd">sudo chown tj:tj ~/testfil</code>

<p>Man kan også anvende følgende "shorthand"</p>
<code class="cmd">sudo chown tj: ~/testfil</code>

<span class="afsnit">Ændring af ejerskab på mapper og undermapper</span>

<p>Skal man ændre rettigheder på alle filer i en mappe anvender man <span class="inl_cmd">-R</span> (recursive). Nedestående kommando ændrer ejerskab på alle filer i mappen <span class="inl_cmd">/data</span></p>

<code class="cmd">sudo chown -R tj: /data</code>


<pre class="ubuntu_terminal">
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ sudo touch testfil
[sudo] adgangskode for tj: 
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ ls -al testfil
-rw-r--r-- 1 root root 0 jun  2 10:41 testfil
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ sudo chown tj:tj testfil
-rw-r--r-- 1 tj tj 0 jun  2 10:41 testfil
</pre>

<p>man-page: <span class="inl_cmd">chown</span>
<a href="http://manpages.ubuntu.com/manpages/trusty/man1/chown.1.html" target="_blank">
http://manpages.ubuntu.com/manpages/trusty/man1/chown.1.html</a></p>


<h1><span class="inl_cmd">chgrp</span></h1>

<p>Ligesom ovenfor, men virker på grupper</p>

<p>Det er kun <span class="inl_cmd">root</span> der kan ændre gruppe på filer.</p>

<h1><span class="inl_cmd">chmod</span></h1>

<p><span class="inl_cmd">chmod</span> ændrer rettighederne på filen. Husk at anvende <span class="inl_cmd">sudo</span> hvis du ikke har rettighederne til filen:</p>

<code class="cmd">chmod [-R][rettigheder] [fil/mappe]</code>

<p>Skal det gælde alle undermapper indsættes -R (recursiv)</p>

<p>Et eksempel, hvor rettighederne sættes til at brugeren har alle rettigheder (<span class="inl_cmd">rwx</span>) og alle har ret til at læse og udføre (<span class="inl_cmd">r-w</span>) svarende til rettigheder for html-filerne på en webserver:</p>

<code class="cmd">chmod 705 testfil</code>

<pre class="ubuntu_terminal">
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ ls -al | grep <span class="red">testfil</span>
-rw-rw-r--  1 tj   tj       0 jun  3 17:02 testfil
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ chmod 705 testfil
<span class="green1">tj@tj-VirtualBox</span>:<span class="blue1">~</span>$ ls -al | grep testfil
-rwx---r-x  1 tj   tj       0 jun  3 17:02 <span class="red">testfil</span>
</pre>

<p>Som vi så ovenfor er de 10 første tegn et udtryk for filens rettigheder, og skal forstås efter nedestående skema (filtyper vil blive forklaret længere nede).</p>

<table class="centreret">
	<thead>
		<tr>
			<th>Filtype</th>
			<th colspan="3">Bruger</th>
			<th colspan="3">Gruppe</th>
			<th colspan="3">Alle</th>
		</tr>
	</thead>
	<tbody>
		<tr><td>-</td>
			<td>r</td>
			<td>w</td>
			<td>x</td>
			<td>r</td>
			<td>w</td>
			<td>x</td>
			<td>r</td>
			<td>w</td>
			<td>x</td>			
		</tr>
		<tr>
			<td></td>
			<td>read</td>
			<td>write</td>
			<td>execute</td>
			<td>read</td>
			<td>write</td>
			<td>execute</td>
			<td>read</td>
			<td>write</td>
			<td>execute</td>			
		</tr>
	</tbody>
</table>

<p>Rettighederne kan sættes for hver kategori ved hjælp af talmellem <span class="inl_cmd">0</span> og <span class="inl_cmd">7</span> efter nedestående skema.</p>

<table class="centreret">
	<thead>
		<tr>
			<th>Talværdi</th>
			<th>r <br/> 2² = 4</th>
			<th>w <br/> 2¹ = 2</th>
			<th>x <br/> 2⁰ = 1</th>
			<th>Samlet</th>
			<th>Rettigheder</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>7</td>
			<td>1</td>
			<td>1</td>
			<td>1</td>
			<td>rwx</td>
			<td>Alle (læse, skrive og udføre)</td>
		</tr>
		<tr>
			<td>6</td>
			<td>1</td>
			<td>1</td>
			<td>0</td>
			<td>-wx</td>
			<td>Læse og skrive</td>
		</tr>
		<tr>
			<td>5</td>
			<td>1</td>
			<td>0</td>
			<td>1</td>
			<td>r-x</td>
			<td>Læse og udføre</td>
		</tr>
		<tr>
			<td>4</td>
			<td>1</td>
			<td>0</td>
			<td>0</td>
			<td>r--</td>
			<td>Læse</td>
		</tr>
		<tr>
			<td>3</td>
			<td>0</td>
			<td>1</td>
			<td>1</td>
			<td>-wx</td>
			<td>Skrive og udføre</td>
		</tr>
		<tr>
			<td>2</td>
			<td>0</td>
			<td>1</td>
			<td>0</td>
			<td>-w-</td>
			<td>Skrive</td>
		</tr>
		<tr>
			<td>1</td>
			<td>0</td>
			<td>0</td>
			<td>1</td>
			<td>--x</td>
			<td>udføre</td>
		</tr>
		<tr>
			<td>0</td>
			<td>0</td>
			<td>0</td>
			<td>0</td>
			<td>---</td>
			<td>Ingen</td>
		</tr>		
	</tbody>
</table>


<p>Eksempler</p>

<table class="">
	<thead>
		<tr>
			<th>Kommando</th>
			<th>Rettigheder</th>
			<th>Bruger</th>
			<th>Gruppe</th>
			<th>Alle</th>

		</tr>
	</thead>
	<tbody>
		<tr>
			<td><span class="inl_cmd">chmod 660 testfil</span></td>
			<td>r w - r w - - - -</td>
			<td>r w -</td>
			<td>r w -</td>
			<td>- - -</td>

		</tr>
		<tr>
			<td><span class="inl_cmd">chmod 700 testfil</span></td>
			<td>r w x - - - - - -</td>
			<td>r - -</td>
			<td>- - -</td>
			<td>- - -</td>
		</tr>
	</tbody>
</table>

<code class="cmd">chmod -R 705 /var/www/html</code>

<p><span class="inl_cmd">705</span> kombinationen er meget anvendt på systemer hvor brugeren skal have alle rettigheder, men alle skal kunne se filerne og udføre programmerne UDEN at kunne ændre på dem. F.eks. på en webserver som har filerne i mappen <span class="inl_cmd">/var/www/html</span> og dennes undermapper</p>

<p>Vær opmærksom på, at man ikke kan fratage root' rettigheder til en fil/mappe. Selvom man køre en <span class="inl_cmd">chmod 000</span> vil root stadig kunne tilgå dem og sætte nye rettigheder. Man kan altså ikke låse sig ud af en fil.</p>


<p>man-page: <span class="inl_cmd">chmod</span>
<a href="http://manpages.ubuntu.com/manpages/trusty/man1/chmod.1.html" target="_blank">
http://manpages.ubuntu.com/manpages/trusty/man1/chmod.1.html</a></p>





	
</div><!-- end: col-md-9 -->

<footer>

	<p><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons licens" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a>Indholdet på Vidas.dk er licenseret under <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> og er skrevet af Thomas Jensen. (<a href="../hvem_er_jeg.html" target="_blank">Læs mere</a>)</p>

</footer>
	
	
</div><!-- end: row-fluid -->

</div> <!-- end: container-fluid -->


<!-- SCRIPT SECTION -->
<script type="text/javascript" src="../js/jquery.min.js"></script>
<script type="text/javascript" src="../js/jquery-ui.min.js"></script>
<script type="text/javascript" src="../js/jquery.tocify.min.js"></script>
<script type="text/javascript" src="../js/bootstrap.min.js"></script>

<!-- PRETTYFY-->
<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>


<!-- HIGHLIGHT -->
	<script src="../js/highlight.pack.js" type="text/javascript"></script>
	<script>hljs.initHighlightingOnLoad();</script>

<!-- MATHJAX -->
<script type="text/javascript" 
	src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  displayAlign: "left",
  displayIndent: "0em"
});
</script>


<!-- TOCIFY -->
<script>
	$(function() {var toc = $("#toc").tocify({ selectors: "h1, h2, h3, h4" }).data("toc-tocify"); });
</script>
<!-- GOOGLE ANALYTICS -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-89933285-1', 'auto');
  ga('send', 'pageview');
</script>

</body>
</html>
