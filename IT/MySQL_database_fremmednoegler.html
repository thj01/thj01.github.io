<!DOCTYPE html>
<html lang="en">
<head>
  <title>Vidas.dk</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link href='http://fonts.googleapis.com/css?family=Ubuntu+Mono|Ubuntu|Ubuntu+Condensed' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/bootstrap.min.css">
  <link rel="stylesheet" href="../css/jquery-ui.min.css">
  <link rel="stylesheet" href="../css/jquery.tocify.css">
  <link rel="stylesheet" href="../css/style_new.css" />
<!-- Scripts in bottom to speed up pageload-->
 

</head>
<body>
	
	
<div class="container-fluid">

<div class="row-fluid">
	
<div class="col-sm-3">
	
	<div id="toc">
	
		<div id="toc_headline"></div>
	
	</div>

</div><!-- Start slut 1. kolonne - TOC -->
	
<div class="col-sm-9">
	
<div class="title">MySQL - Fremmednøgler</div>

<p>Video: <a href="https://youtu.be/4_NPdw2Anf8" target="_blank">https://youtu.be/4_NPdw2Anf8</a></p>

<p>MySQL er en relations database, og man skaber relationerne mellem tabellerne ved hjælp af nøgler. Relationerne skabes ved at man forbinder to felter med hinanden, og kaldes et <span class="inl_cmd">foreign key relationship</span>. De to nøgletyper vi vil anvende i denne sammenhæng er <span class="inl_cmd">primary key</span> og <span class="inl_cmd">foreign key</span>, som også bliver kaldt for en <span class="inl_cmd">fremmednøgle</span>.

<p>Relationen kan mellem <span class="inl_cmd">primary key</span> og <span class="inl_cmd">foreign key</span> kan have mange funktionaliteter, men vi vil i denne sammenhæng anvende dem til at sikre, at data der anvendes andre steder ikke kan blive slettet.</p>

<p>Forestil dig en tabel med lærere, hvoraf nogle er mentorer og der er oprettet en selvstændig tabel der omhandler mentorer. For at undgå redundans vil man igennem normaliseringsprocessen sørge for at data kun står et sted, og derfor vil mentortabellen være afhængig af data i lærertabellen. Fremmednøglen forhindrer at man kan slettet en lærer i lærertabellen, hvis den bliver anvendt i mentortabellen.  </p>

<p>I denne guide vil vi oprette en fremmednøgle mellem de to tabeller <span class="inl_cmd">klasser_og_mentorer</span> og <span class="inl_cmd">lærere</span></p>

<h1>Krav til fremmednøgler</h1>

<p>For at man kan oprette relationer mellem tabeller kræver det at databeserne er af typen <span class="inl_cmd">InnoDB</span> (som er standard for MySQL), og at felterne der skal anvendes er indekseret. At et felt er indekseret betyder at MySQL kender til feltet og derfor kan danne relationer mellem kendte felter.</p>

<h1>Indekser et felt</h1>

<h2>I phpMyAdmin</h2>

<p>Åbn tabellen <span class="inl_cmd">klasser_og_mentorer</span> i <span class="inl_cmd">Struktur</span>-fanen.</p>

<figure id="">

	<img class="p90" src="images/mysql_fremmednoegle_01.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<p>Klik på <span class="inl_cmd">indeks</span>, for at se hvilke felter i tabellen der er er indekseret</p>

<figure id="">

	<img class="p90" src="images/mysql_fremmednoegle_02.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<p>For at få feltet <span class="inl_cmd">Mentor</span> til at være indekseret, går du ud mod højre på linien og klikker på <span class="inl_cmd">Indeks</span>. I dette tilfælde er vinduet forstørret, så feltet står i menuen <span class="inl_cmd">Mere</span>.</p>

<figure id="">

	<img class="p90" src="images/mysql_fremmednoegle_03.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<p>Bekræft at du vil oprette indekset</p>

<figure id="">

	<img class="p35" src="images/mysql_fremmednoegle_04.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<p>Du kan kontrollere om indekset er oprettet ved at klikke på <span class="inl_cmd">indeks</span></p>

<figure id="">

	<img class="p90" src="images/mysql_fremmednoegle_05.png" alt="" title="" />

	<figcaption></figcaption>

</figure>




<h1>Opret relation mellem tabeller</h1>

<p>For at oprette relationer skal vi finde menuen <span class="inl_cmd">Designer</span></p>

<figure id="">

	<img class="p90" src="images/mysql_fremmednoegle_06.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<p>Inde i designervinduet får vi </p>

<figure id="">

	<img class="p90" src="images/mysql_fremmednoegle_07.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<figure id="">

	<img class="p90" src="images/mysql_fremmednoegle_08.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<figure id="">

	<img class="p90" src="images/mysql_fremmednoegle_09.png" alt="" title="" />

	<figcaption></figcaption>

</figure>
<h2>Opret indeks kommando</h2>

<p></p>

<pre>
	<code class="sql">
ALTER TABLE `klasser_og_mentorer` ADD INDEX(`Mentor`);
	</code>
</pre>
<h2>Vis indeks</h2>

<pre>
	<code class="sql">
SHOW INDEX FROM klasser_og_mentorer;
	</code>
</pre>


	
</div><!-- end: col-md-9 -->

<footer>

	<p><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons licens" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a>Indholdet på Vidas.dk er licenseret under <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> og er skrevet af Thomas Jensen. (<a href="../hvem_er_jeg.html" target="_blank">Læs mere</a>)</p>

</footer>
	
	
</div><!-- end: row-fluid -->

</div> <!-- end: container-fluid -->


<!-- SCRIPT SECTION -->
<script type="text/javascript" src="../js/jquery.min.js"></script>
<script type="text/javascript" src="../js/jquery-ui.min.js"></script>
<script type="text/javascript" src="../js/jquery.tocify.min.js"></script>
<script type="text/javascript" src="../js/bootstrap.min.js"></script>

<!-- PRETTYFY-->
<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>


<!-- HIGHLIGHT -->
	<script src="../js/highlight.pack.js" type="text/javascript"></script>
	<script>hljs.initHighlightingOnLoad();</script>

<!-- MATHJAX -->
<script type="text/javascript" async 		src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
		MathJax.Hub.Config({ jax: ["input/TeX","output/HTML-CSS"], displayAlign: "left"	});
</script>
<!-- TOCIFY -->
<script>
	$(function() {var toc = $("#toc").tocify({ selectors: "h1, h2, h3, h4" }).data("toc-tocify"); });
</script>
<!-- GOOGLE ANALYTICS -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-89933285-1', 'auto');
  ga('send', 'pageview');
</script>

</body>
</html>
