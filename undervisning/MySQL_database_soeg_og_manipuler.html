<!DOCTYPE html>

<head>
	
	<meta charset="UTF-8" lang="da"/>

	<title>MySQL - Søg og manipuler - Thomas Jensen</title>

	<link rel="stylesheet" href="../css/styles/docco.css" />

	<link rel="stylesheet" href="../css/style.css" />

	<link href='http://fonts.googleapis.com/css?family=Ubuntu+Mono|Ubuntu|Ubuntu+Condensed' rel='stylesheet' type='text/css'>
	
	<script src="../js/toc2.js" type="text/javascript"></script>
	<script src="https://code.jquery.com/jquery-2.2.2.js"></script>
	<script src="../js/highlight.pack.js" type="text/javascript"></script>
	<script>hljs.initHighlightingOnLoad();</script>

</head>

<!-- 

code highlighter : 

code converter : http://www.freebits.co.uk/convert-html-code-to-text.html 




-->



<html>

<body onload="generateTOC(document.getElementById('toc'));">

<footer id="license"></footer>

	<script> $( "#license" ).load( "license.html" ); </script>

	<div id="toc">
	<p>Indholdsfortegnelse</p>
	
	</div>

<div class="title">MySQL - Søg og manipuler</div>


<h1>Søgning i databasen</h1>

<p>Når databasen er oprettet kan man søge i databasen ved hjælp af et SQL (<span class="bold">S</span>tructured <span class="bold">Q</span>uery <span class="bold">L</span>anguage). I første omgang kan det virke uoverskueligt, men når man først forstår strukturen kan man lave meget præcise søgninger i sin(e) database(r). Se eksemplet herunder:</p>

<pre>
	<code class="SQL">
SELECT * FROM Klasse_og_elever WHERE Klasse='1a' OR Klasse='1b';
	</code>
</pre>

<p>Koden betyder:</p>

<ul class="disc">
	<li><pre><code class="SQL">SELECT * </code></pre></li>
	
		<p>Vælg alt ...</p>
	
	<li><pre><code class="SQL">FROM Klasse_og_elever</code></pre></li>
	
		<p>... fra tabellen <span class="inl_cmd">Klasse_og_elever</span></p>
	
	<li><pre><code class="SQL">WHERE Klasse='1a' OR Klasse='1b'</code></pre></li>
	
		<p>... hvor der står <span class="inl_cmd">1a</span> eller <span class="inl_cmd">1b</span></p>
		
	<li><pre><code class="SQL">;</code></pre></li>
	
		<p>Alle forspørgsler skal afsluttes med et semikolon (<span class="inl_cmd">;</span>) Det virker umiddelbart som unødvendigt, men det er praktisk senere når forspørgslerne bliver lange. Der vil man kunne lave linieskift mellem de enkelte dele af forspørgslen og først når <span class="inl_cmd">;</span> kommer vil det blive udført.!</p>
	
</ul>

<figure id="">

	<img class="" src="images/mysql_kald_eksempel.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<p>Læs mere: <a href="http://www.w3schools.com/sql/default.asp" target="_blank">http://www.w3schools.com/sql/default.asp</a></p>

<h2>Kald hele tabellen</h2>

<p>For at kalde fra hele tabellen skal vi først fortælle at vi vil kigge på alt inholdet og hvilken tabel det drejer sig om.</p>

<pre>
	<code class="SQL">
SELECT * FROM `Mentorer`;
	</code>
</pre>

<figure id="">

	<img class="" src="images/mysql_kald_hele_tabellen.png" alt="" title="" />

	<figcaption></figcaption>

</figure>


<h2>Kald en post</h2>

<p>For at se en hel post, skal vi igen vælge alt indholdet, og tabellen vi vil undersøge. Herefter fortæller vi hvilken data vi vil finde. Husk at angive tekststrenge med anførselstegn (<span class="inl_cmd">"*tekststreng*"</span>) eller citationstegn (<span class="inl_cmd">'*tekststreng*'</span>).</p>

<pre>
	<code class="SQL">
SELECT * FROM Mentorer WHERE Navn="Thomas Jensen";
	</code>
</pre>

<figure id="">

	<img class="" src="images/mysql_kald_en_post.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<h2>Kald bestemte felter</h2>

<p>Hvis vi kun vil have fra i nogle enkelte felter i hver post fortæller vi hvilke felter vi vil se og hvilken tabel det kommer fra.</p>

<pre>
	<code class="SQL">
SELECT Mentor,Mail FROM Mentorer;
	</code>
</pre>

<figure id="">

	<img class="" src="images/mysql_kald_bestemte_felter.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<h2>Kald med wildcard</h2>

<p>Nogle gange har man behov for at finde data, der har nogle fælles tegn. Det løser vi ved at anvende <span class="inl_cmd">"wildcards"</span>. Normal vil man i computerverdenen angive et wildcard med <span class="inl_cmd">*</span>, men i programmeringsverdenen har man oprindeligt anvendt procenttegnet (<span class="inl_cmd">%</span>) i tekststrenge.</p>

<p>Vi vælger igen alle data, i tabellen og søger denne gang med <span class="inl_cmd">LIKE</span> i stedet for <span class="inl_cmd">=</span>.</p>

<pre>
	<code class="SQL">
SELECT * FROM `Mentorer` WHERE Navn LIKE 'Thomas%';
	</code>
</pre>

<figure id="">

	<img class="" src="images/mysql_kald_med_wildcard.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<h2>Kald fra flere tabeller</h2>

<p>For at kalde fra Flere tabeller skal vi i <span class="inl_cmd">FROM</span> angive de tabeller vi vil søge i. Herefter skal vi angive i hvilke felter det vi søger står i. Det gøres ved at bygge stien op til feltet. Herunder vil vi anvende feltet <span class="inl_cmd">Mentor</span> fra begge tabeller. For at ramme det rigtige felt skriver vi først hvilken tabel det handler om, efterfulgt af et punktum og feltets navn. <span class="inl_cmd">Klasser_og_mentorer.Mentor</span> fortæller altså at det er feltet <span class="inl_cmd">Mentor</span> i tabellen <span class="inl_cmd">Klasser_og_mentorer</span>.</p>


<pre>
	<code class="SQL">
SELECT * FROM Klasser_og_mentorer,Mentorer WHERE Klasser_og_mentorer.Mentor='tj' AND Mentorer.Mentor="tj";
	</code>
</pre>

<figure id="">

	<img class="" src="images/mysql_kald_med_flere_tabeller.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<p>Den søgning kan vi gøre mere præcis ved at udvælge de felter der skal udskrives fra tabellerne. Vi erstatter <span class="inl_cmd">SELECT *</span>, med den konkrete felter med den fulde adresse.</p>

<pre>
	<code class="SQL">
SELECT Klasser_og_mentorer.Klasse,Mentorer.Navn,Mentorer.Mobil,Mentorer.Mail 
FROM Klasser_og_mentorer,Mentorer 
WHERE Klasser_og_mentorer.Mentor='tj' AND Mentorer.Mentor="tj";
	</code>
</pre>

<figure id="">

	<img class="" src="images/mysql_kald_med_flere_tabeller2.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<h1>Manipulation med data</h1>

<h2>Indsæt ny post</h2>

<pre>
	<code class="sql">
INSERT INTO `Mentorer` 
(`Mentor`, `Navn`, `Lokale`, `Mobil`, `Mail`)
VALUES
('dd', 'Dennis Dinesen', '20', '23344520', 'dd@fakemail.dk')
;
	</code>
</pre>

<h2>Ændr felt værdi</h2>

<p></p>

<pre>
	<code class="sql">
UPDATE `Mentorer` SET `Navn` = 'Dennis Dahl' WHERE `Mentorer`.`Mentor` = 'dd';
	</code>
</pre>

<h2>Ændr kolonnenavn</h2>

<p></p>

<pre>
	<code class="sql">
RENAME table Mentorer to Lærere;
	</code>
</pre>

<h2>Ændr tabelnavn</h2>

<p></p>

<pre>
	<code class="sql">
ALTER TABLE Lærere change Mentor Lærere varchar(3);
	</code>
</pre>



<h1>Oprette ...</h1>

<p></p>

<h2>Opret database</h2>

<p></p>

<pre>
	<code class="sql">
CREATE DATABASE inventar
	</code>
</pre>

<h2>Opret tabel</h2>

<p></p>

<pre>
	<code class="sql">
CREATE TABLE `test`.`Lærere`
(
`Lærer` VARCHAR(3) NOT NULL ,
`Navn` VARCHAR(50) NOT NULL ,
`Mobil` VARCHAR(8) NOT NULL ,
`Mail` VARCHAR(50) NOT NULL 
);
	</code>
</pre>

<h2>Lav Unik nøgle</h2>

<p></p>

<pre>
	<code class="sql">
ALTER TABLE `Lærere` ADD PRIMARY KEY(`Lærer`);
	</code>
</pre>


<h2>Tilføj kolonner</h2>

<p></p>

<pre>
	<code class="sql">
ALTER TABLE `Lærere` 
ADD `fag1` VARCHAR(10) NOT NULL AFTER `Mail`,
ADD `fag2` VARCHAR(10) NOT NULL AFTER `fag1`;
	</code>
</pre>

<h1>Information</h1>

<p></p>

<h2>Informationer om tabel</h2>

<p></p>

<pre>
	<code class="sql">
DESCRIBE klasse_og_elever
	</code>
</pre>

<h2>Informationer om række</h2>

<p></p>

<pre>
	<code class="sql">
DESCRIBE klasse_og_elever "Startår"
	</code>
</pre>

<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
	</body>

</html>
