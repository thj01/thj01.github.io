<!DOCTYPE html>

<head>
	
	<meta charset="UTF-8" lang="da"/>

	<title>Vidas.dk</title>

	<link rel="stylesheet" href="../css/style.css" />
	<link rel="stylesheet" href="../css/styles/docco.css" />
	<link href='http://fonts.googleapis.com/css?family=Ubuntu+Mono|Ubuntu|Ubuntu+Condensed' rel='stylesheet' type='text/css'>

	<script src="http://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
	<script src="../js/toc2.js" type="text/javascript"></script>
	<script>$(function(){$("#license").load("license.html"); });</script>
	<script type="text/javascript" async
		src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
		MathJax.Hub.Config({ jax: ["input/TeX","output/HTML-CSS"], displayAlign: "left"
 		});
	</script>
        <script>
	$(document).ready(function(){
		$(".hide").click(function(){$("#toc").hide();});
		$(".show").click(function(){$("#toc").show();});
	});
	</script>
</head>
<!-- 
code highlighter : https://highlightjs.org/
code converter : http://www.freebits.co.uk/convert-html-code-to-text.html 
-->
<html>
<body onload="generateTOC(document.getElementById('toc'));">

<footer id="license"></footer>

<header>
	<div class="show" id="toggle_menu"></div> 
</header>

<div class="toggle">
	<div id="toc" class="hide">
		<div id="toc_title"><span class=""><a href="#" target="">(Luk)</a></span></div>	
	</div>
</div>
		
<p></p><p></p>

<div class="title">MySQL - Opret en database</div>

<h1>Opret database og tabeller</h1>

<p></p>

<p>I dette kapitel vil vi oprette databasen med de tre tabeller vi har lavet ved hjælp af normaliseringsprocessen, og kalde den: <span class="inl_cmd">mentorer</span>. Tabellerne skal oprettes efter nedestående skemaer, og vil blive eksemplificeret ved hjælp af <span class="inl_cmd">tabel 1: klasser_og_mentorer</span>:</p>

<h2>Overblik</h2>

<p>Det vi skal gøre er følgende:</p>

<ol class="">
	<li>Opret databasen</li>
	<li>Opret tabel 1</li>
	<li>Indtast data</li>
	<li>Opret tabel 2</li>
	<li>...</li>

</ol>



<h2>Skemaer til tabellerne</h2>

<h3>Skema tabel 1</h3>

<table class="">
	<thead>
		<tr>
			<th colspan="4">Tabel 1: klasser_og_mentorer</th>
		</tr>
		<tr>
			<th>Kolonnenavn</th>
			<th>Datatype</th>
			<th>Længde/værdi</th>
			<th>Indeks</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>Klasse</td>
			<td>VARCHAR</td>
			<td>3</td>
			<td>PRIMARY</td>
		</tr>
		<tr>
			<td>Mentor</td>
			<td>VARCHAR</td>
			<td>3</td>
			<td>&nbsp;-&nbsp;</td>
		</tr>
	</tbody>
</table>

<p></p>

<table class="">
	<thead>
		<tr>
			<th colspan="2">Tabel 1: klasser_og_mentorer</th>
		</tr>
		<tr>
			<th>Klasse (primær nøgle)</th>
			<th>Mentor</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>1a</td>
			<td>tj</td>
		</tr>
		<tr>
			<td>2a</td>
			<td>tj</td>
		</tr>
		<tr>
			<td>3a</td>
			<td>tj</td>
		</tr>
		<tr>
			<td>1b</td>
			<td>ba</td>
		</tr>
		<tr>
			<td>2b</td>
			<td>ba</td>
		</tr>
		<tr>
			<td>3b</td>
			<td>ba</td>
		</tr>
		<tr>
			<td>1x</td>
			<td>cc</td>
		</tr>
		<tr>
			<td>2x</td>
			<td>cc</td>
		</tr>
	</tbody>
</table>

<h3>Skema tabel 2</h3>

<table class="">
	<thead>
		<tr>
			<th colspan="4">Tabel 2: mentorer</th>
		</tr>
		<tr>
			<th>Kolonnenavn</th>
			<th>Datatype</th>
			<th>Længde/værdi</th>
			<th>Indeks</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>Mentor</td>
			<td>VARCHAR</td>
			<td>3</td>
			<td>PRIMARY</td>
		</tr>
		<tr>
			<td>Navn</td>
			<td>VARCHAR</td>
			<td>50</td>
			<td>&nbsp;-&nbsp;</td>
		</tr>
		<tr>
			<td>Lokale</td>
			<td>VARCHAR</td>
			<td>4</td>
			<td>&nbsp;-&nbsp;</td>
		</tr>
		<tr>
			<td>Mobil</td>
			<td>INT</td>
			<td>8</td>
			<td>&nbsp;-&nbsp;</td>
		</tr>
		<tr>
			<td>Mail</td>
			<td>VARCHAR</td>
			<td>50</td>
			<td>&nbsp;-&nbsp;</td>
		</tr>
	</tbody>
</table>

<p></p>

<table class="">
	<thead>
		<tr>
			<th colspan="5">Tabel 2: mentorer</th>
		</tr>
		<tr>
			<th>Mentor (Primær nøgle)</th>
			<th>Navn</th>
			<th>Lokale</th>
			<th>Mobil</th>
			<th>Mail</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>tj</td>
			<td>Thomas Jensen</td>
			<td>17</td>
			<td>23344517</td>
			<td>tj@fakemail.dk</td>
		</tr>
		<tr>
			<td>ba</td>
			<td>Bent Andersen</td>
			<td>18</td>
			<td>23344518</td>
			<td>ba@fakemail.dk</td>
		</tr>
		<tr>
			<td>cc</td>
			<td>Christina Carlsen</td>
			<td>19</td>
			<td>23344519</td>
			<td>cc@fakemail.dk</td>
		</tr>
	</tbody>
</table>

<h3>Skema tabel 3</h3>

<table class="">
	<thead>
		<tr>
			<th colspan="4">Tabel 3: klasser_og_elever</th>
		</tr>
		<tr>
			<th>Kolonnenavn</th>
			<th>Datatype</th>
			<th>Længde/værdi</th>
			<th>Indeks</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>Klasse</td>
			<td>VARCHAR</td>
			<td>3</td>
			<td>PRIMARY</td>
		</tr>
		<tr>
			<td>Antal Elever</td>
			<td>TINYINT</td>
			<td>2</td>
			<td>&nbsp;-&nbsp;</td>
		</tr>
		<tr>
			<td>Piger</td>
			<td>TINYINT</td>
			<td>2</td>
			<td>&nbsp;-&nbsp;</td>
		</tr>
		<tr>
			<td>Drenge</td>
			<td>TINYINT</td>
			<td>2</td>
			<td>&nbsp;-&nbsp;</td>
		</tr>
		<tr>
			<td>Startår</td>
			<td>YEAR</td>
			<td>4</td>
			<td>&nbsp;-&nbsp;</td>
		</tr>
	</tbody>
</table>

<p></p>

<table class="">
	<thead>
		<tr>
			<th colspan="5">Tabel 3: klasser_og_elever</th>
		</tr>
		<tr>
			<th>Klasse (Primær nøgle)</th>
			<th>Antal elever</th>
			<th>Piger</th>
			<th>Drenge</th>
			<th>Startår</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>1a</td>
			<td>17</td>
			<td>9</td>
			<td>8</td>
			<td>2016</td>
		</tr>
		<tr>
			<td>2a</td>
			<td>22</td>
			<td>10</td>
			<td>12</td>
			<td>2015</td>
		</tr>
		<tr>
			<td>3a</td>
			<td>21</td>
			<td>8</td>
			<td>13</td>
			<td>2014</td>
		</tr>
		<tr>
			<td>1b</td>
			<td>16</td>
			<td>8</td>
			<td>8</td>
			<td>2016</td>
		</tr>
		<tr>
			<td>2b</td>
			<td>24</td>
			<td>13</td>
			<td>11</td>
			<td>2015</td>
		</tr>
		<tr>
			<td>3b</td>
			<td>22</td>
			<td>9</td>
			<td>13</td>
			<td>2014</td>
		</tr>
		<tr>
			<td>1x</td>
			<td>28</td>
			<td>13</td>
			<td>15</td>
			<td>2016</td>
		</tr>
		<tr>
			<td>2x</td>
			<td>31</td>
			<td>17</td>
			<td>14</td>
			<td>2015</td>
		</tr>
	</tbody>
</table>

<h3>Udskriv skemaer</h3>

<p></p>

<p>Tabeloversigterne kan udskrives her: <a href="MySQL_database_tabeloversigt_print.html" target="_blank">MySQL_database_tabeloversigt_print.html</a></p>

<h2>Indtastning</h2>

<p>Når databasen er startet op får vi adgang til hovedvinduet. For at oprette en ny dtabase vælger vi <span class="inl_cmd">Ny</span> i menuen til venstre. I feltet <span class="bold">Databasenavn</span> skriver du: <span class="inl_cmd">mentorer</span> og i <span class="bold">Tegnsæt (sortering)</span> vælger du: <span class="inl_cmd">utf8_danish_ci</span> og klikker på <span class="knap">Opret</span>.</p>

<figure id="">

	<img class="p90" src="images/mysql_XAMPP_opret_tabel1_02.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<p>Da det er den første tabel gør MySQL opmærksom på, at der ingen tabeller er i databasen. Opret tabellen: <span class="inl_cmd">klasser_og_mentorer</span>, og sæt antallet af kolonner til <span class="inl_cmd">2</span>. Klik på <span class="knap">Udfør</span>.</p>

<figure id="">

	<img class="p90" src="images/mysql_XAMPP_opret_tabel1_03.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<p>I dette vindue skal du konfigurere de enkelte felter i databasen. I denne tabel er der to felter i hver post: <span class="inl_cmd">Klasse</span> og <span class="inl_cmd">Mentor</span>. Konfigurer dem som her, men vent med at trykke <span class="knap">Gem</span> indtil vi har sat <span class="inl_cmd">Primærnøglen</span>:</p>

<figure id="">

	<img class="p90" src="images/mysql_XAMPP_opret_tabel1_04.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<p>Før vi gemmer skal vi sætte feltet <span class="inl_cmd">Klasse</span> til at være primærnøgle. Kør vinduet mod venstre og find feltet <span class="inl_cmd">Indeks</span> og vælg <span class="inl_cmd">Primary</span>.</p>

<figure id="">

	<img class="p90" src="images/mysql_XAMPP_opret_tabel1_05.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<p> Når du vælger <span class="inl_cmd">Primary</span> popper vunduet <span class="inl_cmd">Tilføj indeks</span> op. Her vælger du blot <span class="knap">Udfør</span>, da vi ikke ønsker at konfigurere det mere:</p>

<figure id="">

	<img class="p40" src="images/mysql_XAMPP_opret_tabel1_06.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<p>Vælg <span class="knap">Udfør</span> og når du er tilbage i hovedvinduet vælger du <span class="knap">Gem</span></p>

<p>Her kan du kontrollere at din tabel er blevet oprettet korrekt. Læg mærke til at der er kommet en guldnøgle efter <span class="inl_cmd">Klasse</span>.</p>

<figure id="">

	<img class="p90" src="images/mysql_XAMPP_opret_tabel1_07.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<h1>Indtast data</h1>

<p>Vælg menuen indsæt og indtast indholdet</p>

<figure id="">

	<img class="p90" src="images/mysql_XAMPP_opret_tabel1_08.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<p>Når du har indtastet dine data klikker du på <span class="knap">Udfør</span></p>

<p>Jeg har i dette tilfælde valgt at indtaste noget forkert. Begge indtastninger har anført <span class="inl_cmd">1a</span> som Klasse. Da vi har sat feltet Klasse til at være <span class="inl_cmd">Primary</span> brokker MySQL sig:</p>

<figure id="">

	<img class="p35" src="images/mysql_XAMPP_opret_tabel1_09.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<p>Ret <span class="inl_cmd">1a</span> til <span class="inl_cmd">2a</span> i andet tilfælde og klik <span class="knap">udfør</span>.</p>

<p>Klik på menuen <span class="inl_cmd">Vis</span>, så du kan se dine indtastede data</p>

<figure id="">

	<img class="p90" src="images/mysql_XAMPP_opret_tabel1_10.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<p>Indtast resten af tabellen og opret herefter de 3 andre tabeller.</p>

<h1>Eksporter og importer</h1>

<blockquote class="center">
	<p>
		Rigtige mænd tager ikke backup ... de græder bare
	</p>
</blockquote>

<p>Når man arbejder med data i alle sammenhænge bør man have backup af sine vigtige filer. phpMyAdmin gør det nemt at tage backup af ens database. I database sammenhæng eksporterer man.</p>

<h2>Eksporter databasen</h2>

<p>For at eksportere en database vælger man menuen <span class="inl_cmd">Eksporter</span>:</p>

<figure id="">

	<img class="p90" src="images/mysql_eksporter.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<p>Vi beholder det forudvalgte <span class="inl_cmd">SQL</span>format og klikker på <span class="knap">Udfør</span>. Herefter bliver filen gem i mappen <span class="inl_cmd">Overførsler</span> under det samme navn som databasen hedder med endelsen <span class="inl_cmd">.sql</span>. I dette tilfælde <span class="inl_cmd">mentorer.sql</span>.</p>

<p>Det kan anbefales at filen med det samme omdøbes, så det bliver tydeligt hvornår backup'en er taget f.eks: <span class="inl_cmd">mentorer031116</span>.</p>

<p>Indholdet af denne fil er de kommandoer der skal til for at gendanne databasen:</p>

<details>

	<summary>Vis koden i den eksporterede fil</summary>

<pre>
	<code class="SQL">
-- phpMyAdmin SQL Dump
-- version 4.5.1
-- http://www.phpmyadmin.net
--
-- Vært: 127.0.0.1
-- Genereringstid: 03. 11 2016 kl. 17:06:25
-- Serverversion: 10.1.16-MariaDB
-- PHP-version: 5.6.24

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

--
-- Database: `mentorer`
--

-- --------------------------------------------------------

--
-- Struktur-dump for tabellen `klasser_og_mentorer`
--

CREATE TABLE `klasser_og_mentorer` (
  `Klasse` varchar(3) COLLATE utf8_danish_ci NOT NULL,
  `Mentor` varchar(3) COLLATE utf8_danish_ci NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_danish_ci;

--
-- Data dump for tabellen `klasser_og_mentorer`
--

INSERT INTO `klasser_og_mentorer` (`Klasse`, `Mentor`) VALUES
('1a', 'tj'),
('1b', 'ba'),
('1x', 'cc'),
('2a', 'tj'),
('2b', 'ba'),
('2x', 'cc'),
('3a', 'tj'),
('3b', 'ba');

-- --------------------------------------------------------

--
-- Struktur-dump for tabellen `klasse_og_elever`
--

CREATE TABLE `klasse_og_elever` (
  `Klasse` varchar(3) COLLATE utf8_danish_ci NOT NULL,
  `Antal Elever` tinyint(2) NOT NULL,
  `Piger` tinyint(2) NOT NULL,
  `Drenge` tinyint(2) NOT NULL,
  `Startår` year(4) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_danish_ci;

--
-- Data dump for tabellen `klasse_og_elever`
--

INSERT INTO `klasse_og_elever` (`Klasse`, `Antal Elever`, `Piger`, `Drenge`, `Startår`) VALUES
('1a', 17, 9, 8, 2016),
('1b', 16, 8, 8, 2016),
('1x', 28, 13, 15, 2016),
('2a', 22, 10, 12, 2015),
('2b', 24, 13, 11, 2015),
('2x', 31, 17, 14, 2015),
('3a', 21, 8, 13, 2015),
('3b', 22, 9, 13, 2015);

-- --------------------------------------------------------

--
-- Struktur-dump for tabellen `mentorer`
--

CREATE TABLE `mentorer` (
  `Mentor` varchar(3) COLLATE utf8_danish_ci NOT NULL,
  `Navn` varchar(50) COLLATE utf8_danish_ci NOT NULL,
  `Lokale` varchar(4) COLLATE utf8_danish_ci NOT NULL,
  `Mobil` int(8) NOT NULL,
  `Mail` varchar(50) COLLATE utf8_danish_ci NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_danish_ci;

--
-- Data dump for tabellen `mentorer`
--

INSERT INTO `mentorer` (`Mentor`, `Navn`, `Lokale`, `Mobil`, `Mail`) VALUES
('ba', 'Bent Andersen', '18', 23344518, 'ba@fakemail.dk'),
('cc', 'Christina Carlsen', '19', 23344519, 'cc@fakemail.dk'),
('tj', 'Thomas Jensen', '17', 23344517, 'tj@fakemail.dk');

--
-- Begrænsninger for dumpede tabeller
--

--
-- Indeks for tabel `klasser_og_mentorer`
--
ALTER TABLE `klasser_og_mentorer`
  ADD PRIMARY KEY (`Klasse`);

--
-- Indeks for tabel `klasse_og_elever`
--
ALTER TABLE `klasse_og_elever`
  ADD PRIMARY KEY (`Klasse`);

--
-- Indeks for tabel `mentorer`
--
ALTER TABLE `mentorer`
  ADD PRIMARY KEY (`Mentor`);

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
	</code>
</pre>

<span class="afsnit"></span>

<p><span class="bold">Hent filen:</span> <a href="files/mentor_db_v1.sql" target="_blank">mentor_db_v1.sql</a></p>

</details>

<h2>Importer</h2>

<p>Vi kan prøve at importere databasen under et andet navn. Det første vi gør er at oprette en ny database til indholdet. Husk at sætte tegnsæt(<span class="inl_cmd">utf8-danish_ci</span>). Herefter vælger vi fanen <span class="inl_cmd">Importer</span></p>

<figure id="">

	<img class="p90" src="images/mysql_importer.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<p>Herefter skal du:</p>

<ol class="">
	<li>Klikke på <span class="knap">Vælg fil</span></li>
	<li>Navigere hen til din fil og klikke på <span class="knap">Åbn</span></li>
	<li>Scrolle ned ad siden og klikke på <span class="knap">Udfør</span> </li>
</ol>

<p></p>

<figure id="">

	<img class="p90" src="images/mysql_importer_succes.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<p>For at teste om det er lykkes vælger du fanen <span class="inl_cmd">Struktur</span>.</p>

<figure id="">

	<img class="p90" src="images/mysql_importer_succes_tjek.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<h2>Ryd op i dine backups</h2>

<figure id="">

	<img class="p40" src="http://imgs.xkcd.com/comics/old_files.png" alt="" title="" />

	<figcaption></figcaption>

</figure>

<p>Taget fra: <a href="https://xkcd.com/1360/" target="_blank">https://xkcd.com/1360/</a></p>


<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
	</body>

</html>
